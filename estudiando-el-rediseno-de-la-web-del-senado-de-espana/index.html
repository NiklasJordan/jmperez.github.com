<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta http-equiv=Accept-CH content="DPR, Viewport-Width, Width"><title>Estudiando el rediseño de la web del Senado de España - José M. Pérez</title><meta name=description content="I am a software engineer who loves web development. Speaker and open-source contributor."><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"><link rel=author href="https://plus.google.com/107456024651797783420"/><link rel=alternate type=application/rss+xml title="Jose M. Perez" href=https://jmperezperez.com/feed.xml><meta name=twitter:card content=summary><meta name=twitter:url content="https://jmperezperez.com/estudiando-el-rediseno-de-la-web-del-senado-de-espana/" property=og:url><meta name=twitter:title content="Estudiando el rediseño de la web del Senado de España - José M. Pérez" property=og:title><meta name=twitter:site content=@jmperezperez><meta property=og:image content=https://res.cloudinary.com/jmperez/image/upload/f_auto,c_scale/v1519156883/profile_ysrm5y.jpg><meta name=twitter:image content=https://res.cloudinary.com/jmperez/image/upload/f_auto,c_scale/v1519156883/profile_ysrm5y.jpg><meta property=fb:app_id content=1702266270006013><meta property=fb:pages content="1639848659664211"/><link rel=canonical href="https://jmperezperez.com/estudiando-el-rediseno-de-la-web-del-senado-de-espana/"/><style>a,a:hover{color:#2a7cb2}.post::after,hr{display:block;clear:both}#page,.main-header,.videoWrapper{position:relative}.code,code,pre{letter-spacing:0}.code-wrap pre,pre{white-space:pre-wrap}.caption,.main-header,.me,.pagination,.pagination a,footer{text-align:center}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:none;font:inherit;margin:0;padding:0;vertical-align:baseline}button,input{background:0 0}body{background:#fff;color:#555;font-family:Georgia,Times;font-weight:300;font-style:normal;font-size:19px;line-height:1.725;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-text-size-adjust:100%}blockquote,em{font-style:italic}@media(max-width:800px){body{font-size:17px}}@media(max-width:600px){body{font-size:15px}}h1,h2,h3,h4,h5{color:#212121;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:600;font-size:1em;line-height:1.3;margin-bottom:1em}h2,h3,h4,h5{margin-top:2em}#menu a,.button{font-weight:400}.post ol,.post ul,amp-video,amp-vimeo,amp-youtube,iframe,p,video{margin:0 0 1em}.quote,blockquote,ol,ul{margin:0 0 15px}twitterwidget{margin-bottom:1em!important}a{font-weight:inherit;text-decoration:none;transition:color .15s ease-out,border-bottom-color .15s ease-out}p a{border-bottom:1px solid #eee}p a:hover{border-bottom-color:#212121}strong{font-weight:700}h2,h3{font-weight:400}h1{font-size:1.7em}h2{color:#444;font-size:1.6em}h3{color:#666;font-size:1.4em}h4{font-size:1.18em}h5{font-size:1em}a h1,a h2,a h3,a h4,a h5{transition:color .15s ease-out}a:hover h1,a:hover h2,a:hover h3,a:hover h4,a:hover h5{color:#3498db}blockquote{border-left:2px solid #ccc;padding-left:20px}ol,ul{padding-left:25px}ul{list-style:square}ol{list-style:decimal}hr{background:#eee;color:#eee;height:2px;margin:30px auto;width:50%}.main-header,.post,.post .svg-container object{width:100%}code,pre{color:#333;font-family:Courier,Menlo,Monaco;font-size:.8em;overflow-x:auto}.author,.main-header{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}pre{padding:.8em 1em}code{margin:0}.post::after{content:''}.main-header{background-color:#005689;overflow:hidden;padding:1em}#menu{display:inline-block;margin:1px 0}#menu a{color:#fff;font-size:14px;margin-left:15px;padding:20px 10px;text-transform:uppercase}@media(max-width:500px){#menu a{margin-left:10px;padding:10px 5px}}#menu a:first-child{margin-left:0}#menu a[aria-current]{font-weight:700}#page{margin:0 auto;max-width:40em;padding:3em 2em}.videoWrapper{height:0;margin-bottom:1em;padding-bottom:56.25%;padding-top:25px}.videoWrapper amp-youtube,.videoWrapper iframe{height:100%;left:0;position:absolute;top:0;width:100%}.wrapper{border-top:2px solid #eee;padding:3em 0}.wrapper:first-child{border-top:none;padding-top:5%}.posts-list h2{margin-top:0}.post{display:block}.post div[itemprop=articleBody]>p:first-child{color:#333}.post li{margin-bottom:.5em}.post p img{border:1px solid #eee;display:block;max-width:100%}.post img+.caption{padding-top:5px}.post .svg-container{margin-bottom:5%;max-width:100%;text-align:center}video{height:auto;max-width:100%}.pagination a{min-width:30px;max-height:30px}footer{background:rgba(0,0,0,.05);padding:2em}.button{background-color:#fff;border:1px solid #555;border-radius:20px;color:#555;display:inline-block;font-size:13px;line-height:10px;padding:10px 20px;transition:background-color .15s ease-out}.button:hover{background-color:#3498db;border-color:transparent;color:#fff}.button.inactive{background-color:#ccc;color:#fff}.search-goog input{border:2px solid #ddd;padding:10px}.search-goog input[type=submit]{background-color:#ddd;cursor:pointer}@media only screen and (max-width:768px){#page,.wrapper{margin:0;max-width:100%;padding:1.5em;width:100%}.wrapper{padding:10% 0}.wraper::after{clear:both;content:'';display:block}.post{margin:0 auto;max-width:640px}}.outscreen{height:1px;left:-1000px;overflow:hidden;position:absolute;top:auto;width:1px}.callout{border:1px solid #eee;border-left-color:#777;border-left-width:5px;border-radius:3px;font-size:90%;padding:20px;margin:20px 0}.author{font-size:.8em;margin-bottom:2em}.author .name{line-height:1.5;padding-top:.35em}.bd,.media{overflow:hidden;zoom:1}.media .img{float:left}.avatar-img{border-radius:100%;height:3.5em;margin-right:.5em;width:3.5em}.highlight{border:1px solid #eee;margin-bottom:1em;overflow-x:auto}.code{background:#fff;color:#333;display:block;overflow-x:auto}.code .comment,.code .meta{color:#969896}.code .emphasis,.code .quote,.code .string,.code .strong,.code .template-variable,.code .variable{color:#df5000}.code .keyword,.code .selector-tag,.code .type{color:#a71d5d}.code .attribute,.code .bullet,.code .literal,.code .symbol{color:#0086b3}.code .name,.code .section{color:#63a35c}.code .tag{color:#333}.code .attr,.code .selector-attr,.code .selector-class,.code .selector-id,.code .selector-pseudo,.code .title{color:#795da3}.code .addition{background-color:#eaffea;color:#55a532}.code .deletion{background-color:#ffecec;color:#bd2c00}.code .link{text-decoration:underline}.caption{display:block;font-size:.8em}.codepen-aspect-ratio>iframe{height:100%;position:absolute;width:100%}.twitter-tweet{margin-left:auto;margin-right:auto}.twitter-tweet::after{content:"";display:block;padding-bottom:20px;width:100%}.me{max-width:20em;margin:0 auto .5em}.me h1{margin-bottom:0}</style><link rel=amphtml href="/estudiando-el-rediseno-de-la-web-del-senado-de-espana/amp/"><meta name=theme-color content=#005689><link rel=manifest href=/manifest.json></head><body><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-39254352-1","auto"),ga("send","pageview");</script><header class=main-header><nav id=menu><a href="/">Blog</a> <a href="/projects/">Projects</a> <a href="/talks/">Speaking</a> <a href="/about-me/">About</a></nav></header><div id=page><article class=wrapper><div class=post><header><script type=application/ld+json>{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Estudiando el rediseño de la web del Senado de España",
  
  "description": "<p>Echa un vistazo al <a href="/revisitando-nueva-web-senado">análisis más reciente que he hecho de la web del Senado</a>, donde hablo sobre algunos cambios que han llevado a cabo desde que publicó el nuevo sitio. <a href="/assets/images/posts/senado-es-portada.jpg"><img src="/assets/images/posts/senado-es-portada-300x175.jpg" alt="Portada de Senado.es"></a></p>",
  
  "mainEntityOfPage":{
      "@type":"WebPage",
      "@id":"https://jmperezperez.com/estudiando-el-rediseno-de-la-web-del-senado-de-espana/"
  },
  "datePublished": "2012-11-12T17:17:35.000Z",
  "dateModified": "2018-01-04T11:39:58.000Z",
  
  "author": {
      "@type": "Person",
      "name": "Jose M. Perez"
  },
  "publisher": {
      "@type": "Organization",
      "name": "Jose M. Perez's Blog"
      
      ,
      "logo": {
        "@type": "ImageObject",
        "url": "https://jmperezperez.com/assets/images/logo.png",
        "width": 600,
        "height": 60
      }
      
  }
}</script><div class="media author"><div class=img><a href="/about-me/"><img src=https://res.cloudinary.com/jmperez/image/upload/w_120,f_auto,c_scale/v1519156883/profile_ysrm5y.jpg class=avatar-img alt="" height=53 width=53 sizes=53px></a></div><div class=bd><address class=name itemprop=author itemscope itemtype=https://schema.org/Person><a href="/about-me/" itemprop=name>José M. Pérez</a></address><meta class=post-data itemprop=datePublished content=2012-11-12T17:17:35.000Z>November 12 2012</div></div><h1>Estudiando el rediseño de la web del Senado de España</h1></header><p>Echa un vistazo al <a href=/revisitando-nueva-web-senado>análisis más reciente que he hecho de la web del Senado</a>, donde hablo sobre algunos cambios que han llevado a cabo desde que publicó el nuevo sitio. <a href=/assets/images/posts/senado-es-portada.jpg><img src=/assets/images/posts/senado-es-portada-300x175.jpg alt="Portada de Senado.es"></a></p><a id=more></a><p>Hoy se ha presentado el rediseño de la web del Senado de España. Sin entrar a valorar su coste o la necesidad, quería analizarla desde el punto de vista de implementación frontend.</p><p>Particularmente, me gustan los análisis que hacen webs como <a href=http://zoompf.com/blog target=_blank rel=noopener>zoompf</a> sobre distintos sitios web, presentando los problemas encontrados y ofreciendo soluciones.</p><p>Aquí hablaré sobre algunos problemas de ámbito general y otros específicos sobre rendimiento web.</p><h2 id=Problemas-generales><a href=#Problemas-generales class=headerlink title="Problemas generales"></a>Problemas generales</h2><p>Hay algunos problemas relacionados con XSS (que parece que ya se ha resuelto), indexado y navegación.</p><h3 id=senado-es-no-funciona-sin-www><a href=#senado-es-no-funciona-sin-www class=headerlink title="senado.es no funciona sin www"></a>senado.es no funciona sin www</h3><p><a href=/assets/images/posts/www-senado.png><img src=/assets/images/posts/www-senado-300x153.png alt="Conversación en Twitter sobre redirección de la web del Senado"></a></p><p>Al igual que en la anterior versión de la web, la dirección <a href=http://senado.es target=_blank rel=noopener>senado.es</a> no funciona. Es necesario acceder a <a href=http://www.senado.es target=_blank rel=noopener>www.senado.es</a> para poder ver el contenido. Aunque se puede solucionar fácilmente, es un pena que se les haya pasado por alto.</p><p>Pese <a href=https://twitter.com/jmperezperez/status/267910552288911360 target=_blank rel=noopener>haber sido notificados</a>, 2 días después del lanzamiento, el problema persistía.</p><h3 id=No-indexable><a href=#No-indexable class=headerlink title="No indexable"></a>No indexable</h3><p>Por alguna razón, han decidido que su <a href=http://www.senado.es/robots.txt target=_blank rel=noopener>robots.txt</a> indique a los buscadores que su contenido no se indexe (<a href=https://twitter.com/polpitart/status/267930153592709120 target=_blank rel=noopener>fuente</a>).</p><figure class="highlight plain"><table><tr><td class=code><pre><span class=line>#No permitimos acceso a todos los robots de indexación</span><br><span class=line>User-agent: Oracle Secure Enterprise Search</span><br><span class=line>Disallow:</span><br><span class=line>User-agent: *</span><br><span class=line>Disallow: /</span><br><span class=line>Disallow: /legis9/publicaciones/html/textos/CG_B015.html</span><br><span class=line>Disallow: /legis9/publicaciones/pdf/cortes/bocg/CG_B015.PDF</span><br><span class=line>Disallow: /legis9/publicaciones/html/textos/CG_B100.html</span><br><span class=line>Disallow: /legis9/publicaciones/pdf/cortes/bocg/CG_B100.PDF</span><br><span class=line># No limitamos la hora de indexación</span><br><span class=line>#Visit-time: 0300-0400</span><br></pre></td></tr></table></figure><p>Además, no se ha implementado ningún tipo de redirección para mantener el acceso a las páginas de la antigua web que estaban indexadas en los motores de búsqueda (<a href="http://formatinternet.wordpress.com/2012/11/12/los-problemas-del-desarrollo-web-en-espana-resumidos-en-senado-es/" target=_blank rel=noopener>fuente</a>).</p><h3 id=Problemas-de-conexi-243-n><a href=#Problemas-de-conexi-243-n class=headerlink title="Problemas de conexi&#243;n"></a>Problemas de conexi&#243;n</h3><p>Desde que se publicó, el nuevo sitio web ha estado sin funcionar varias veces, ya sea por supuestos ataques DOS o por cualquier otra causa. Esto muestra que la infraestructura no es adecuada o no se han previsto mecanismos para mantener la web operativa en situaciones de mucho tráfico.</p><h3 id=Selecci-243-n-de-idioma><a href=#Selecci-243-n-de-idioma class=headerlink title="Selecci&#243;n de idioma"></a>Selecci&#243;n de idioma</h3><p>Aunque el sitio soporta múltiples idiomas, al cambiar el idioma se hace un envío de un formulario POST, se establece el idioma pero la URL se mantiene. Esto, unido a la política de indexación, hace imposible indexar el contenido en los distintos idiomas soportados por la web.</p><h3 id=No-responsive-ni-m-243-vil><a href=#No-responsive-ni-m-243-vil class=headerlink title="No responsive ni m&#243;vil"></a>No responsive ni m&#243;vil</h3><p>La verdad es que es difícil justificar la inexistencia de un sitio móvil o soporte de responsive design cuando se lleva a cabo un sitio completamente nuevo. Unido al poco cuidado en la carga de los distintos componentes de la página, se hace poco recomendable utilizar el sitio desde un dispositivo móvil (<a href="http://mobitest.akamai.com/m/results.cgi?testid=121114_K2_5" target=_blank rel=noopener>fuente</a>).</p><h2 id=Rendimiento-web><a href=#Rendimiento-web class=headerlink title="Rendimiento web"></a>Rendimiento web</h2><p>Si entramos a valorar el rendimiento web tenemos bastantes puntos que tratar. Puedes echar un vistazo a <a href=http://gtmetrix.com/reports/www.senado.es/cCUUkJUm target=_blank rel=noopener>las puntuaciones Page Speed y YSlow de la página principal en GTmetrix</a>, el resultado de <a href="http://www.webpagetest.org/result/121112_7M_DP6/" target=_blank rel=noopener>WebPageTest usando Chrome desde París</a> y <a href="http://www.webpagetest.org/result/121112_RQ_F0H/" target=_blank rel=noopener>IE8 desde Madrid</a>, y el <a href=http://scans.zoompf.com/s/e2b8609e20721c1548291f3fd94acaed/report.html target=_blank rel=noopener>análisis de zoompf</a>, este último teniendo en cuenta 146 páginas de la web del Senado. <img src=/assets/images/posts/gtmetrix-senado-es.jpg alt="Puntuación Page Speed y YSlow de www.senado.es"> <em>Puntuación Page Speed y YSlow de www.senado.es</em></p><h3 id=Compresi-243-n-gzip><a href=#Compresi-243-n-gzip class=headerlink title="Compresi&#243;n gzip"></a>Compresi&#243;n gzip</h3><p>Sólo en la página principal se podría ahorrar 476.6KiB (un 30% del total) habilitando la compresión gzip (<a href=http://gtmetrix.com/reports/www.senado.es/cCUUkJUm target=_blank rel=noopener>fuente</a>).</p><h3 id=Falta-de-cacheo><a href=#Falta-de-cacheo class=headerlink title="Falta de cacheo"></a>Falta de cacheo</h3><p>No se especifica política alguna de cacheo de los distintos recursos (JS, PNG, JPG) por lo que el navegador decide si los cachea o no y por cuánto tiempo. Además, los recursos no especifican correctamente su tipo Mime (<a href=http://gtmetrix.com/reports/www.senado.es/cCUUkJUm target=_blank rel=noopener>fuente</a>).</p><h3 id=Errores-404><a href=#Errores-404 class=headerlink title="Errores 404"></a>Errores 404</h3><p>Al menos en la página principal, hay 2 requests que resultan en errores 404 (<a href="http://www.webpagetest.org/result/121112_7M_DP6/1/details/" target=_blank rel=noopener>fuente</a>). <img src=/assets/images/posts/404-senado-es.jpg alt="Errores 404 en la web del Senado"> <em>Errores 404 en la web del Senado</em></p><h3 id=Im-225-genes-no-optimizadas><a href=#Im-225-genes-no-optimizadas class=headerlink title="Im&#225;genes no optimizadas"></a>Im&#225;genes no optimizadas</h3><p>Las imágenes GIF, PNG y JPG pueden ser optimizadas ahorrando una cantidad valiosa de tráfico (<a href=http://scans.zoompf.com/s/e2b8609e20721c1548291f3fd94acaed/report.html#187 target=_blank rel=noopener>fuente</a>).</p><h3 id=No-sprites><a href=#No-sprites class=headerlink title="No sprites"></a>No sprites</h3><p>Hay 51 peticiones a imágenes en la página principal (de las 66 que hay en total). Muchas de ellas se corresponden con pequeños iconos que podrían fácilmente formar parte de un sprite. Y, mejor aún, algunas imágenes podrían reemplazarse utilizando CSS3.</p><h3 id=Minificaci-243-n-de-ficheros><a href=#Minificaci-243-n-de-ficheros class=headerlink title="Minificaci&#243;n de ficheros"></a>Minificaci&#243;n de ficheros</h3><p>El único CSS o JS minificado es la librería jQuery. Todo el resto de ficheros, incluida <a href=http://www.senado.es/web/js/jquery-ui-1.8-custom-v.js target=_blank rel=noopener>una versión personalizada de jQuery UI</a>, está sin minificar. Claramente, no existe un proceso de <em>build</em> que tenga en cuenta la minificación de estos ficheros antes de subirlos al sitio web.</p><h3 id=Malas-pr-225-cticas-de-Javascript><a href=#Malas-pr-225-cticas-de-Javascript class=headerlink title="Malas pr&#225;cticas de Javascript"></a>Malas pr&#225;cticas de Javascript</h3><p>Echando un vistazo a ficheros como <a href=http://www.senado.es/web/js/funciones.js target=_blank rel=noopener>funciones.js</a>, vemos como se repiten una y otra vez los mismos selectores de elementos del DOM.</p><figure class="highlight js"><table><tr><td class=code><pre><span class=line><span class=function><span class=keyword>function</span> <span class=title>inicializarVariablesGenerales</span>(<span class=params></span>)</span>&#123;</span><br><span class=line>	<span class=comment>// No lleva el var por eso son globales</span></span><br><span class=line>	globales = &#123;</span><br><span class=line>		monthNames: [$(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>0</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>1</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>2</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>3</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>4</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>5</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>6</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>7</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>8</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>9</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>10</span>).text(),</span><br><span class=line>					 $(<span class=string>'#calendario_nombre_meses option'</span>).eq(<span class=number>11</span>).text()</span><br><span class=line>					],</span><br><span class=line>		resultAjax: <span class=keyword>new</span> <span class=built_in>Array</span>(<span class=number>31</span>),</span><br><span class=line>		dateFormat: <span class=string>'ddmmyy'</span>,</span><br><span class=line>		firstDay: <span class=number>1</span>,</span><br><span class=line>                ...</span><br></pre></td></tr></table></figure><h2 id=Otros-sitios-cubriendo-detalles-de-implementaci-243-n><a href=#Otros-sitios-cubriendo-detalles-de-implementaci-243-n class=headerlink title="Otros sitios cubriendo detalles de implementaci&#243;n"></a>Otros sitios cubriendo detalles de implementaci&#243;n</h2><p>Otras webs están recogiendo también algunos problemas a nivel técnico:</p><ul><li><a href="http://formatinternet.wordpress.com/2012/11/12/los-problemas-del-desarrollo-web-en-espana-resumidos-en-senado-es/" target=_blank rel=noopener>Los problemas del desarrollo web en España resumidos en senado.es</a> en format internet</li><li><a href="http://www.pedroventura.com/desarrollo-web/la-nueva-timo-web-del-senado-que-cuesta-medio-millon-de-euros/" target=_blank rel=noopener>La nueva timo web del Senado que cuesta medio millón de euros</a> en pedroventura.com</li><li><a href="http://www.social4u.es/analisis-de-la-web-del-senado/" target=_blank rel=noopener>Análisis de la web del Senado</a> en social4u.es</li></ul><h2 id=M-225-s-problemas><a href=#M-225-s-problemas class=headerlink title="M&#225;s problemas"></a>M&#225;s problemas</h2><p>Si sabes de algún problema más o alguna posible mejora, añádelo en los comentarios. El propósito de este post es promover las mejores prácticas en cuanto a desarrollo web se refiere.</p></div><hr/></article></div><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(n){})["catch"](function(n){})});</script><footer><section class=links><a href=https://twitter.com/jmperezperez>@jmperezperez</a> on Twitter · <a href=https://github.com/JMPerez>GitHub</a> · <a href=http://www.linkedin.com/in/jmperezperez>LinkedIn</a></section></footer></body></html>