<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Jose M. Perez&#39;s Blog</title>
  
  <subtitle>Web development, performance, and some other good practices.</subtitle>
  <link href="/feed.xml" rel="self"/>
  
  <link href="https://jmperezperez.com/"/>
  <updated>2018-04-04T09:04:09.088Z</updated>
  <id>https://jmperezperez.com/</id>
  
  <author>
    <name>Jose M. Perez</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Displaying Page Load Metrics on Your Site</title>
    <link href="https://jmperezperez.com/page-load-footer/"/>
    <id>https://jmperezperez.com/page-load-footer/</id>
    <published>2018-03-30T05:00:00.000Z</published>
    <updated>2018-04-04T09:04:09.088Z</updated>
    
    <content type="html"><![CDATA[<p>I was browsing <a href="https://timkadlec.com" target="_blank" rel="noopener">Tim Kadlec’s website</a> and I noticed he had added page load time metrics in the footer.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1522388675/load-time/tim-kadlec-load-time.png" sizes="(max-width: 768px) 100vw, 684px" style="border: 0"> <small class="caption">Tim Kadlec’s site shows how long the page took to load in the footer.</small></p><p>Stoyan Stefanov also realized and wrote <a href="http://www.phpied.com/this-page-loaded-in-x-seconds/" target="_blank" rel="noopener">“This page loaded in X seconds”</a>, a blog post describing the code used for this. Stoyan also created a bookmark that shows an alert with the load time of the current page. The data is obtained from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/performance" target="_blank" rel="noopener"><code>window.performance</code></a>.</p><p>I liked the idea and added a similar snippet that shows the page load time in the footer (you should see it if you scroll to the bottom). If your browser supports the <a href="https://css-tricks.com/paint-timing-api/" target="_blank" rel="noopener">Paint Timing API</a> you will see a couple of extra metrics: First Paint and First Contentful Paint.<a id="more"></a></p><h2 id="First-Paint-and-First-Contentful-Paint"><a href="#First-Paint-and-First-Contentful-Paint" class="headerlink" title="First Paint and First Contentful Paint"></a>First Paint and First Contentful Paint</h2><p>Page load time is a metric that tells us part of the story. Yet it might not reflect how fast the visible area loads. For instance, a page with lots of images will report a large page load time, since the <code>load</code> event will be triggered when all of them are fetched, even though the above-the-fold content might load way earlier. It is still a good idea, since it forces us to think about lazy-loading the resources when needed.</p><p>I have written before about <a href="https://www.smashingmagazine.com/2018/02/progressive-image-loading-user-perceived-performance/" target="_blank" rel="noopener">user perceived performance</a> and metrics that tell how long it takes to render something on the page. Using the <a href="/paint-timing-api/">Paint Timing API</a> we can get the <a href="https://w3c.github.io/paint-timing/#sec-terminology" target="_blank" rel="noopener">First Paint and First Contentful Paint metrics</a>.</p><p>My code snippet extends Tim’s and Stoyan’s to report these metrics, obtained running <code>performance.getEntriesByType(&#39;paint&#39;)</code>:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, () =&gt; &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> t = <span class="built_in">window</span>.performance &amp;&amp; performance.timing;</span><br><span class="line">    <span class="keyword">const</span> round2 = <span class="function"><span class="params">num</span> =&gt;</span> <span class="built_in">Math</span>.round(num * <span class="number">100</span>) / <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">if</span> (t) &#123;</span><br><span class="line">      <span class="keyword">const</span> timingStats = <span class="built_in">document</span>.querySelector(<span class="string">'.timing-stats'</span>);</span><br><span class="line">      <span class="keyword">const</span> loadTime = (t.loadEventEnd - t.navigationStart) / <span class="number">1000</span>;</span><br><span class="line">      <span class="keyword">let</span> timingStatsHTML = <span class="string">`This page loaded in <span class="subst">$&#123;round2(loadTime)&#125;</span> seconds. `</span>;</span><br><span class="line">      <span class="keyword">const</span> perfEntries = performance.getEntriesByType(<span class="string">'paint'</span>);</span><br><span class="line">      perfEntries.forEach(<span class="function">(<span class="params">perfEntry, i, entries</span>) =&gt;</span> &#123;</span><br><span class="line">        timingStatsHTML += <span class="string">`<span class="subst">$&#123;perfEntry.name&#125;</span> was <span class="subst">$&#123;round2(perfEntry.startTime <span class="regexp">/ 1000)&#125; seconds. `;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">      &#125;);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">      timingStats.innerHTML = timingStatsHTML;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">    &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">  &#125;, 0);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">&#125;);</span></span></span></span><br></pre></td></tr></table></figure><p>In the future I would like to extend the reported metrics to include <a href="https://developers.google.com/web/tools/lighthouse/audits/first-meaningful-paint" target="_blank" rel="noopener">First Meaningful Paint</a> (whenever it is implemented, see <a href="https://docs.google.com/document/d/1BR94tJdZLsin5poeet0XoTW60M0SjvOJQttKT-JK8HI/view" target="_blank" rel="noopener">a description of the heuristics here</a>) and <a href="https://developers.google.com/web/tools/lighthouse/audits/first-interactive" target="_blank" rel="noopener">Time to Interactive</a> (using <a href="https://github.com/GoogleChromeLabs/tti-polyfill" target="_blank" rel="noopener">GoogleChromeLabs/tti-polyfill</a>).</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1522388641/load-time/performance-metrics.jpg" sizes="(max-width: 768px) 100vw, 684px"> <small class="caption">Slide from <a href="https://www.youtube.com/watch?v=6Ljq-Jn-EgU" target="_blank" rel="noopener">Web Performance: Leveraging the Metrics that Most Affect User Experience from Google I/O ‘17</a> showing different key moments during a page load.</small></p><p>If you are into this topic, I recommend you to watch the talk <a href="https://www.youtube.com/watch?v=6Ljq-Jn-EgU" target="_blank" rel="noopener">Web Performance: Leveraging the Metrics that Most Affect User Experience from Google I/O ‘17</a>.</p><p>The Resource Timing API allows to <a href="https://developer.mozilla.org/docs/Web/API/Resource_Timing_API/Using_the_Resource_Timing_API#Size_matters" target="_blank" rel="noopener">know the transfer size of the assets fetched by the page</a>. For CORS requests is necessary to <a href="https://developer.mozilla.org/docs/Web/API/Resource_Timing_API/Using_the_Resource_Timing_API#Coping_with_CORS" target="_blank" rel="noopener">include the <code>timing-allow-origin</code> header</a> set up properly to return the transfer size. Otherwise they will report 0 as the transfer size.</p><p>Another caveat is that there doesn’t seem to be a way to know the transfer size of the page itself. One could calculate the length of the document’s innerHTML, but that won’t match the transfer size if the response was compressed (which hopefully was).</p><p>Let’s have a look at an example:</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale,dpr_auto/v1522831856/load-time/resource-timing-api-page-size.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Calculating the transferred size of the requests using Resource Timing API."> <small class="caption">Calculating the transferred size of the request susing Resource Timing API.</small></p><p>The page that I’m loading, served from jmperezperez.com, makes requests to fetch assets from res.cloudinary.com and www.google-analytics.com, which are external domains. Once loaded, I run this code to calculate the transferred size:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> totalBytes = performance.getEntriesByType(<span class="string">'resource'</span>)</span><br><span class="line">  .reduce(<span class="function">(<span class="params">a, r</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + r.transferSize;</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Page size is <span class="subst">$&#123;<span class="built_in">Math</span>.round(totalBytes <span class="regexp">/ 1024)&#125; kB`);</span></span></span></span><br></pre></td></tr></table></figure><p>The reported transferred size according to the dev tools is 113 kB, while the calculated using the code above (Resource Timing API) is 107 kB. Both res.cloudinary.com and www.google-analytics.com set the <code>timing-allow-origin: *</code> response header, which let us get the right <code>transferSize</code>.</p><p>You can read more about Cloudinary’s usage of Server Timing on their recent post “<a href="https://cloudinary.com/blog/inside_the_black_box_with_server_timing" target="_blank" rel="noopener">Inside the Black Box with Server-Timing</a>”.</p><p>Although we can’t get the exact page load size, using these APIs get us way closer.</p><h2 id="Reporting-Metrics-Inline-and-RUM"><a href="#Reporting-Metrics-Inline-and-RUM" class="headerlink" title="Reporting Metrics Inline and RUM"></a>Reporting Metrics Inline and RUM</h2><p>These new browser APIs allow us to access metrics from JavaScript, which previously could only be accessed manually using the developer tools. Access from the browser means we can show them to the user or report them to a Real User Monitoring solution to track and optimize user’s experience.</p><p>Displaying these metrics on our sites is a way to communicate publicly that we are taking performance seriously.</p>]]></content>
    
    <summary type="html">
    
      Showing page load, First Paint, and First Contentful Paint Displaying on your site to prove you care about web performance.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Sketchy SVGs with RoughJS</title>
    <link href="https://jmperezperez.com/roughjs/"/>
    <id>https://jmperezperez.com/roughjs/</id>
    <published>2018-03-25T20:50:00.000Z</published>
    <updated>2018-03-26T14:25:39.233Z</updated>
    
    <content type="html"><![CDATA[<p>I love hand-drawn graphs and I have always fantasized about applying it to vector images. That’s why I was very happy to find out about <a href="https://roughjs.com/" target="_blank" rel="noopener">RoughJS</a>, a library that draws SVG primitives like lines, curves, arcs, polygons, circles, ellipses and paths on a Canvas in a hand-drawn style.</p><a id="more"></a><div class="codepen-aspect-ratio" style="margin-bottom: 10px; padding-bottom: 75%; position: relative; width: 100%"><iframe id="cp_embed_RMVGbd" src="//codepen.io/milesmanners/embed/RMVGbd?height=513&theme-id=0&slug-hash=RMVGbd&default-tab=full" scrolling="no" frameborder="no" height="513" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="684" style="width: 684; overflow: hidden"></iframe></div><p><small class="caption">Applying RoughJS to some icons from <a href="https://fontawesome.com/" target="_blank" rel="noopener">Font Awesome</a></small></p><p>The tool can be very handy for given an informal look to diagrams and charts in some slides or presentations. Do check their <a href="https://github.com/pshihn/rough/wiki/Examples" target="_blank" rel="noopener">examples page</a>, which is very impressive.</p><p>If you have a SVG you can draw the primitives that compose it. In the next example I’m applying RoughJS to <a href="https://twitter.com/javivelasco" target="_blank" rel="noopener">Javi Velasco</a>‘s SF Palace of Fine Arts SVG from <a href="https://zeit.co/day" target="_blank" rel="noopener">Zeit’s Day</a>, going through its paths.</p><div class="codepen-aspect-ratio" style="margin-bottom: 10px; padding-bottom:75%; position: relative; width: 100%"><iframe id="cp_embed_QmqdwQ" src="//codepen.io/jmperez/embed/QmqdwQ?height=513&theme-id=0&slug-hash=QmqdwQ&default-tab=full" scrolling="no" frameborder="no" height="513" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="684" style="width: 684; overflow: hidden"></iframe></div><p><small class="caption">RoughJS applied to a SVG of the Palace of Fine Arts in San Francisco created by Zeit (<a href="https://zeit.co/day" target="_blank" rel="noopener">source</a>).</small></p><h4 id="Contour-RoughJS"><a href="#Contour-RoughJS" class="headerlink" title="Contour + RoughJS"></a>Contour + RoughJS</h4><p>In the past I worked on a tool called <a href="https://github.com/JMPerez/contour" target="_blank" rel="noopener">Contour</a> that creates a SVG based on the edges detected on a bitmap image (more info on <a href="/drawing-edges-svg/">this blog post</a>).</p><p>I wanted to test the combination of Contour and RoughJS, so I took the output of Contour for 3 music album artworks. Contour outputs a SVG with polylines, which doesn’t seem to be supported by RoughJS at the moment, but <a href="https://codepen.io/jakealbaugh/pen/GZwgzV" target="_blank" rel="noopener">it’s straightforward to convert to paths</a>.</p><div class="codepen-aspect-ratio" style="margin-bottom: 10px; padding-bottom: 100%; position: relative; width: 100%"><iframe id="cp_embed_dmzdeb" src="//codepen.io/jmperez/embed/dmzdeb?height=684&theme-id=0&slug-hash=dmzdeb&default-tab=full" scrolling="no" frameborder="no" height="684" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="684" style="width: 684; overflow: hidden"></iframe></div><p><small class="caption">RoughJS drawing the above SVGs with some custom options</small></p><p>The effect is very subtle, in part because Contour generates lots of short lines, but gives the drawing a sketchy style in some traces. Changing the “simplification” and “roughness” <a href="https://github.com/pshihn/rough/wiki" target="_blank" rel="noopener">options</a> allows to tweak the result.</p><h4 id="Related-Content"><a href="#Related-Content" class="headerlink" title="Related Content"></a>Related Content</h4><p>If you have read this far you probably like vector images and hand drawing. <a href="https://twitter.com/etportis" target="_blank" rel="noopener">Eric Portis</a> shared with me recently a SIGGRAPH 2011 paper called “<a href="http://graphics.stanford.edu/~niloy/research/animated_construction_line_drawing/animatedConstructionLineDrawing_sigga11.html" target="_blank" rel="noopener">Animated Construction of Line Drawings</a>”, where they infer a plausible stroke order of a static input drawing.</p><div class="videoWrapper"><iframe width="720" height="405" src="https://www.youtube.com/embed/kme8xbb0sug" frameborder="0" allowfullscreen></iframe></div><p>The predicted stroke is comparable to the order used by human artists. I think it’s really interesting, though I haven’t found any actual implementation of the algorithm on a website.</p><h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>RoughJS is another tool that pushes vector images forward, adding an artistic hand-drawn touch to them. I’m looking forward to see how the project evolves and how it is applied in different use cases.</p>]]></content>
    
    <summary type="html">
    
      Applying RoughJS to vector images to get a hand-drawn effect.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Taking A Look At The State Of Progressive Images And User Perception</title>
    <link href="https://jmperezperez.com/progressive-images-user-perception/"/>
    <id>https://jmperezperez.com/progressive-images-user-perception/</id>
    <published>2018-02-07T11:30:00.000Z</published>
    <updated>2018-02-07T21:48:54.499Z</updated>
    
    <content type="html"><![CDATA[<p>I have just published my first article on Smashing Magazine. There I talk about progressive image loading techniques and what we know about how users perceive them.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1518013062/smashing/filmstrip.png" sizes="(max-width: 768px) 100vw, 684px"> <small class="caption">Percentage of visual completeness increases using progressive image loading.</small></p><p>Read more on <a href="https://www.smashingmagazine.com/2018/02/progressive-image-loading-user-perceived-performance/" target="_blank" rel="noopener">Smashing Magazine</a>.</p><a id="more"></a>]]></content>
    
    <summary type="html">
    
      Progressive image loading techniques and what we know about how users perceived them.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Choosing a Platform for Blogging</title>
    <link href="https://jmperezperez.com/choosing-platform-blogging/"/>
    <id>https://jmperezperez.com/choosing-platform-blogging/</id>
    <published>2018-01-04T11:30:00.000Z</published>
    <updated>2018-01-07T11:34:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>Or why no single platform is the best one.</p><p>As a web developer I consider <strong><a href="https://jmperezperez.com">my personal website</a> part of my portfolio</strong>. It’s the canonical site where I write about the topics I care about. <a href="https://jmperezperez.com/personal-projects/">It helps me remembering ideas and resources</a>. It also gives me a public presence on Internet beyond <a href="https://www.linkedin.com/in/jmperezperez" target="_blank" rel="noopener">LinkedIn</a> and <a href="https://twitter.com/jmperezperez" target="_blank" rel="noopener">Twitter</a>.</p><p>But It’s not only about the contents. <strong>It’s also about how they are delivered</strong>. My blog is my playground, a space where I can play with browser APIs and put in practice ideas about accessibility and performance.</p><a id="more"></a><p>Several years ago I would use Wordpress to create the content, and wouldn’t care so much about low-level stuff. After all, I was focused on doing .NET and Java applications development, and didn’t care much about the web. Nobody read my blog, and scalability or performance were topics that felt far.</p><h3 id="My-Workflow"><a href="#My-Workflow" class="headerlink" title="My Workflow"></a>My Workflow</h3><p>Fast-forward to these days I use a different workflow:</p><ol><li>I write my posts on my personal blog using Markdown. The blog uses <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> behind the scenes, but this isn’t really important. Most <a href="https://www.staticgen.com/" target="_blank" rel="noopener">static site generators</a> support Markdown these days.</li><li>Posts and pages are exported to a static HTML pages. As a bonus, an <a href="https://www.ampproject.org/" target="_blank" rel="noopener">AMP</a> version is also generated. I use a <a href="https://github.com/tea3/hexo-generator-amp" target="_blank" rel="noopener">hexo generator</a> that does the heavy lifting to create an AMP-compatible version.</li><li>After publishing it, I <a href="https://help.medium.com/hc/en-us/articles/214550207-Import-post" target="_blank" rel="noopener">import the post on Medium</a>. Imported stories include a <a href="https://support.google.com/webmasters/answer/139066?hl=en" target="_blank" rel="noopener">canonical URL</a> pointing to the original post on my blog. This is important so search engines don’t see it as duplicated content. In other words, this is good for SEO.</li></ol><p>This workflow seems a good compromise to me.</p><p>First, <strong>I want to keep my blog as the canonical place where users will find the content</strong>. All publishing platforms I have used are still up and running today, so this is not the issue. I like keeping a link back to my site, where I have full control of what is delivered, and visitors can know more about me and my projects.</p><p>Second, <strong>I think AMP can be good for users to identify content that loads fast</strong> (more on this later). I have been following closely some runts about the AMP format. I’m not a big fan of it, and I would prefer that Google displayed somehow that a page result is fast enough, without having to be an AMP page.</p><p>Third, I don’t want to miss the network effect of a platform like Medium. Until recently, very few visitors would access my site. When Google is your main source you need to rank very well. I know enough about SEO to firmly belief <strong>that the best tip is to create useful content.</strong></p><p>Medium posts look beautiful with very little effort. More importantly, <strong>Medium has a great network effect</strong>. It makes it easy for people to follow editors (at least easier than having to subscribe to a RSS feed using some external app or web) and the content can be showcased through tags. I definitely think that using Medium has been key to get a higher exposure.</p><p>Medium also has <a href="https://toppub.xyz/" target="_blank" rel="noopener">publications</a> where you can submit your stories. An example is <a href="https://medium.freecodecamp.org/how-to-get-published-in-the-freecodecamp-medium-publication-9b342a22400e" target="_blank" rel="noopener">Free Code Camp</a> and <a href="https://hackernoon.com/" target="_blank" rel="noopener">Hacker Noon</a>. They can give you feedback to improve your post, and will also do minor editings to make it more compelling.</p><p><img style="margin:0 auto; max-width:300px" src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1514724301/medium-stats_dko2nz.png" sizes="(max-width: 768px) 100vw, 684px"> <small class="caption">A screenshot of my posts stats a little after I published that SVG post.</small></p><p>I’m not trying to get as many visits as possible for the sake of it. I have received lots of interesting comments about my posts on Twitter and Medium. And these posts have opened me the doors to speak at conferences, give interviews and write guest posts. And I hope my posts have inspired and helped other developers, the same way their contributions have shaped my knowledge.</p><h4 id="A-Word-about-Performance"><a href="#A-Word-about-Performance" class="headerlink" title="A Word about Performance"></a>A Word about Performance</h4><p>As a web developer who likes to talk about Web Performance Optimization, I can’t help keeping an eye on the platforms where I’m posting my content.</p><p>Interestingly, I’m not the only one who cares about it. Some users <a href="https://medium.com/@jmperezperez/using-svg-as-placeholders-more-image-loading-techniques-bed1b810ab2c" target="_blank" rel="noopener">discussed the performance of the SVG placeholders post on Medium</a>:</p><blockquote><p>Am I the only person who finds it ironic that a web page about keeping web pages small comes with multiple megabytes of Javascript?</p><p>It doesn’t need it, folks. It’s a static blog page.</p><p><a href="https://news.ycombinator.com/item?id=15699302" target="_blank" rel="noopener">Hacker News comment on Using SVG as image placeholders</a></p></blockquote><p>In my defense I will say I have little control on Medium.com’s web performance. Also, Medium’s strong point is not performance, as I’ll show in a moment.</p><p>I said earlier that I’m not a big fan of AMP. It is marketed as a project that “enables the creation of websites and ads that are consistently fast, beautiful and high-performing across devices and distribution platforms”.</p><p>Here’s a quick test I recorded using Webpagetest to measure how quickly the page loaded on the 3 platforms:</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1515069420/webpagetest-blog-amp-medium_ktuuib.jpg" sizes="(max-width: 768px) 100vw, 684px"><small class="caption"><a href="http://www.webpagetest.org/video/compare.php?tests=180104_QD_5bacc8fc6eddec2cd66f1d5709164188,180104_YD_da5b176b352b4a2ea79154003240653a,180104_G7_9de5273b03f346f1e9e71bb7cd21420e" target="_blank" rel="noopener">WebPageTest run</a> of the same post on 3 different formats/platforms.</small></p><p>As with Medium, AMP is a matter of trade-offs. I really like that the format enforces good practices, and for most sites it will mean a faster experience. And the fact that users can identify an AMP site with the thunder icon. T<strong>he biggest win for AMP is in organizations that would prioritize ads and tracking pixels over performance.</strong> In <a href="https://adactio.com/journal/9646" target="_blank" rel="noopener">Jeremy Keith</a>’s words:</p><blockquote><p>Now when the boss says “Slap a three megabyte JavaScript library on it so we can show a carousel”, the developers can only respond with “Google says No.”</p><p>When the boss says “Slap a ton of third-party trackers on it so we can monetise those eyeballs”, the developers can only respond with “Google says No.”</p></blockquote><p>Of course, if you are a performance geek you can make things faster. Just keep in mind that AMP is not a silver bullet. If you want to read more about AMP I recommend you to check out <a href="https://css-tricks.com/need-catch-amp-debate/" target="_blank" rel="noopener">Chris Coyier’s “Need to Catch Up on the AMP Debate?”</a>.</p><h4 id="Choose-what-is-best-for-you"><a href="#Choose-what-is-best-for-you" class="headerlink" title="Choose what is best for you"></a>Choose what is best for you</h4><p>As with everything in this life, <strong>every platform has its pros and cons</strong>. Hopefully my workflow can help you getting a more informed decision on where you publish your content.</p>]]></content>
    
    <summary type="html">
    
      Why I keep my personal blog, use AMP, and cross-publish to Medium.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>My 2017</title>
    <link href="https://jmperezperez.com/my-2017/"/>
    <id>https://jmperezperez.com/my-2017/</id>
    <published>2017-12-31T11:50:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>This year has been a ride. More blogging and speaking at events than ever, and the feeling that it was well worth it.<a id="more"></a></p><h2 id="Blogging"><a href="#Blogging" class="headerlink" title="Blogging"></a>Blogging</h2><p>During 2017 I wrote 18 blog posts. This is a high increase respect <a href="/my-2016">2016</a>.</p><p>My post <a href="/svg-placeholders">Using SVG as placeholders — More Image Loading Techniques</a> was an unprecedented success. It was widely shared and got the attention of <a href="https://medium.freecodecamp.org/" target="_blank" rel="noopener">freeCodeCamp</a>, which spread it even further.</p><p><img style="margin:0 auto; max-width:300px" src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1514724301/medium-stats_dko2nz.png" sizes="(max-width: 768px) 100vw, 684px"></p><p><small class="caption">That escalated quickly. From a couple hundred views a day, suddenly it went up to +40k.</small></p><p>The post made it to <a href="https://news.ycombinator.com/item?id=15696596" target="_blank" rel="noopener">the top of Hacker News</a>, renowned sites about frontend articles (<a href="https://css-tricks.com/svg-as-a-placeholder/" target="_blank" rel="noopener">CSS Tricks</a>, <a href="https://www.webdesignerdepot.com/2017/11/popular-design-news-of-the-week-november-13-2017-november-19-2017/" target="_blank" rel="noopener">Webdesigner Depot</a>, <a href="https://adactio.com/links/13108" target="_blank" rel="noopener">Adactio</a>), and newsletters (<a href="http://css-weekly.com/issue-290/" target="_blank" rel="noopener">CSS Weekly</a>, <a href="http://mailchi.mp/smashingmagazine/smashing-194-big-bang-relaunch-ux-and-fighting-scammers-1131597" target="_blank" rel="noopener">Smashing Magazine</a>, <a href="http://reactnativecoach.com/issues/16" target="_blank" rel="noopener">React Native Coach</a>).</p><p>Most of my work to write that post was about ollecting ideas and examples from very talented developers. I’m happy that lots of developers have found out about them through this post, and I hope this serves to give more attention to their impressive work.</p><p>Not only was the SVG post published in the sites I love reading. Some other posts of mine got referenced from <a href="https://images.guide/#-a-id-lazy-load-non-critical-images-href-lazy-load-non-critical-images-lazy-load-non-critical-images-a-" target="_blank" rel="noopener">Addy Osmani’s excellent images.guide</a>, <a href="http://calendar.perfplanet.com/2017/progressive-image-loading-using-intersection-observer-and-sqip/" target="_blank" rel="noopener">Perfplanet’s calendar</a>, and <a href="https://cloudinary.com/blog/an_introduction_to_progressive_image_rendering" target="_blank" rel="noopener">Cloudinary</a>.</p><p>This is definitely a push for me to continue documenting techniques to improve website performance.</p><p>On a broader note, I continued making improvements to this blog. I moved many images to <a href="https://cloudinary.com" target="_blank" rel="noopener">Cloudinary</a>, which scales and reencodes the images to tailor them to the user’s device. This resulted in shorter load times, <a href="https://twitter.com/jmperezperez/status/929039257808916480" target="_blank" rel="noopener">especially in 3G</a>. I should strive for good performance on a site that promotes it.</p><h2 id="Open-source-projects"><a href="#Open-source-projects" class="headerlink" title="Open source projects"></a>Open source projects</h2><p>I built a couple of open-source projects related with Spotify. The first one is a library to interact with Spotify’s Connect API called <a href="https://github.com/JMPerez/spotify-player" target="_blank" rel="noopener">spotify-player</a> which I described on <a href="/spotify-connect-api">Playing with the Spotify Connect API</a>. The second one is <a href="https://github.com/JMPerez/c" target="_blank" rel="noopener">C - Collaborative listening</a>, a collaborative room where users can propose, vote and listen to music.</p><h2 id="Conferences-and-interviews"><a href="#Conferences-and-interviews" class="headerlink" title="Conferences and interviews"></a>Conferences and interviews</h2><p>This year I spoke at <a href="/render-conf-oxford-2017">RenderConf in Oxford</a>, <a href="/jsdayes-madrid-2017">JSDayES in Madrid</a>, <a href="/speaking-alicante-frontend">Alicante Frontend</a>, and <a href="/frontfest-moscow-2017">Frontfest in Moscow</a>. I also attended <a href="/react-alicante-2017">React Alicante</a>‘s first edition, in my home town, which I enjoyed a lot.</p><p>I was interviewed by <a href="https://twitter.com/c_isabelromero" target="_blank" rel="noopener">Isabel Romero</a>, who works at <a href="https://ulab.es" target="_blank" rel="noopener">ULab</a>, the coworking space in Alicante that hosts the meetup <a href="https://www.meetup.com/Alicante-Frontend/" target="_blank" rel="noopener">Alicante Frontend</a>. You can <a href="https://www.youtube.com/watch?v=HLczq5ay8H0" target="_blank" rel="noopener">watch the recording on Youtube</a>.</p><p>Something new this year was <a href="/wecodesign-pwa">a podcast I recorded about PWAs</a> with Ignacio and Carmen from <a href="http://wecodesignpodcast.com" target="_blank" rel="noopener">Wecodesign</a>, a Spanish podcast about web development and design. I realised I talk too much and I need to sort my ideas a bit better :)</p><h2 id="Work"><a href="#Work" class="headerlink" title="Work"></a>Work</h2><p>I kept having fun at Spotify working in a fabulous team that builds <a href="https://open.spotify.com/" target="_blank" rel="noopener">Spotify’s web player</a> amongst other projects.</p><h2 id="What’s-next-in-2018"><a href="#What’s-next-in-2018" class="headerlink" title="What’s next in 2018?"></a>What’s next in 2018?</h2><p>My priorities for 2018 are shifting. I’ll spend more time with my family and less time coding and writing. I would like to read more about leading change in organizations and soft skills, and less about the latest CSS and JS news.</p>]]></content>
    
    <summary type="html">
    
      Wrapping up 2017 - A summary of what I have done during this year.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Speaking at FrontFest 2017 in Moscow, Russia</title>
    <link href="https://jmperezperez.com/frontfest-moscow-2017/"/>
    <id>https://jmperezperez.com/frontfest-moscow-2017/</id>
    <published>2017-12-03T16:00:00.000Z</published>
    <updated>2018-01-07T12:14:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>A couple of weeks ago I attended <a href="https://2017.frontfest.ru/" target="_blank" rel="noopener">FrontFest 2017</a> in Moscow. There were around 200 attendees at Digital October, an impressive venue. I had a lot of fun and met many local developers.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1512318752/frontfest/frontfest-01.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Jose M. Perez speaking at Frontfest Moscow 2017"></p><a id="more"></a><p>FrontFest is one of the several JS conferences that take place in Moscow, which has a healthy web community with several meetups that host up to 500 people.</p><p>This single-day event was comprised of 5 tracks filled with talks and workshops. Most of the talks and workshops were in Russian, though there was always one talk or workshop in English at a given time.</p><p>I especially liked <a href="https://2017.frontfest.ru/lecture/3/" target="_blank" rel="noopener">Blaine Cook’s talk</a> about UX and developer responsibility managing user authentication. I also enjoyed Mathieu’s <a href="https://2017.frontfest.ru/lecture/15/" target="_blank" rel="noopener">live-coding</a> and following workshop, where we coded <a href="https://github.com/p01/twinStickShooter" target="_blank" rel="noopener">a simple yet very fun game</a>.</p><h2 id="My-talk-about-“Progressive-Image-Rendering”"><a href="#My-talk-about-“Progressive-Image-Rendering”" class="headerlink" title="My talk about “Progressive Image Rendering”"></a>My talk about “Progressive Image Rendering”</h2><div class="videoWrapper"><iframe width="720" height="405" src="https://www.youtube.com/embed/rmq1iEKsmBc" frameborder="0" allowfullscreen></iframe></div><p>I had been playing with SVG techniques during the weeks before the event, which I had documented on <a href="/svg-placeholders/">Using SVG as placeholders — More Image Loading Techniques</a>. Thus, it was a great opportunity to include them in the talk.</p><p>I also mentioned the <a href="https://www.chromestatus.com/feature/5637156160667648" target="_blank" rel="noopener">Image Decode API</a>. I first knew about it through <a href="https://twitter.com/p01/" target="_blank" rel="noopener">Mathieu ‘p01’ Henri</a>, who told me there were early discussions to implement it when we met at <a href="/render-conf-oxford-2017">RenderConf Oxford</a>. Even though it’s not widely supported I thought it was a good opportunity to talk about it.</p><p>This API prevents the browser from blocking the UI when decoding an image, and can be handy when doing lazy-load. Check also <a href="https://medium.com/dailyjs/image-loading-with-image-decode-b03652e7d2d2" target="_blank" rel="noopener">this post</a> for an example on how to use it.</p><h3 id="Slides"><a href="#Slides" class="headerlink" title="Slides"></a>Slides</h3><p>The slides are available on <a href="https://slides.com/jmperez/pir-frontfest" target="_blank" rel="noopener">slides.com/jmperez/pir-frontfest</a> and you can also see them right here embedded:</p><div class="videoWrapper"><iframe src="//slides.com/jmperez/pir-frontfest/embed" width="576" height="420" scrolling="no" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen></iframe></div>]]></content>
    
    <summary type="html">
    
      I attended FrontFest 2017 conference and talked about image performance, lazy-loading, placeholders and creative SVGs.
    
    </summary>
    
    
      <category term="images" scheme="https://jmperezperez.com/tags/images/"/>
    
      <category term="talks" scheme="https://jmperezperez.com/tags/talks/"/>
    
  </entry>
  
  <entry>
    <title>Using SVG as placeholders — More Image Loading Techniques</title>
    <link href="https://jmperezperez.com/svg-placeholders/"/>
    <id>https://jmperezperez.com/svg-placeholders/</id>
    <published>2017-10-29T21:30:00.000Z</published>
    <updated>2018-03-19T15:24:36.014Z</updated>
    
    <content type="html"><![CDATA[<p>I’m passionate about image performance optimisation and making images load fast on the web. One of the most interesting areas of exploration is placeholders: what to show when the image hasn’t loaded yet.</p><p>During the last days I have come across some loading techniques that use SVG, and I would like to describe them in this post.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1509278557/jmperez-composition-primitive_j8zyfn.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Example of a SVG generated using 10 and 100 triangles based on a bitmap image"> <small class="caption">Generating SVGs from images can be used for placeholders. Keep reading!</small></p><a id="more"></a><p>In this post we will go through these topics:</p><ul><li>Overview of different types of placeholders</li><li>SVG-based placeholders (edges, shapes and silhouettes)</li><li>Automating the process.</li></ul><h3 id="Overview-of-different-types-of-placeholders"><a href="#Overview-of-different-types-of-placeholders" class="headerlink" title="Overview of different types of placeholders"></a>Overview of different types of placeholders</h3><p>In the past <a href="/lazy-loading-images">I have written about placeholders and lazy-load of images</a>, and also <a href="https://www.youtube.com/watch?v=szmVNOnkwoU" target="_blank" rel="noopener">talked about it</a>. When doing lazy-loading of images it’s a good idea to think about what to render as a placeholder, since it can have a big impact in user’s perceived performance. In the past I described several options:</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1509278557/placeholder-options_vtwp6b.png" sizes="(max-width: 768px) 100vw, 684px"> <small class="caption">Several strategies to fill the area of an image before it loads.</small></p><ul><li><strong>Keeping the space empty for the image</strong>: In a world of responsive design, this prevents content from jumping around. Those layout changes are bad from a user’s experience point of view, but also for performance. The browser is forced to do layout re calculations every time it fetches the dimensions of an image, leaving space for it.</li><li><strong>Placeholder</strong>: Imagine that we are displaying a user’s profile image. We might want to display a silhouette in the background. This is shown while the main image is loaded, but also when that request failed or when the user didn’t set any profile picture at all. These images are usually vector-based, and due to their small size are a good candidate to be inlined.</li><li><strong>Solid colour</strong>: Take a colour from the image and use it as the background colour for the placeholder. This can be the dominant colour, the most vibrant… The idea is that it is based on the image you are loading and should help making the transition between no image to image loaded smoother.</li><li><strong>Blurry image</strong>: Also called blur-up technique. You render a tiny version of the image and then transition to the full one. The initial image is tiny both in pixels and kBs. To remove artifacts the image is scaled up and blurred. I have written previously about this on <a href="/medium-image-progressive-loading-placeholder">How Medium does progressive image loading</a>, <a href="/webp-placeholder-images">Using WebP to create tiny preview images</a>, and <a href="/more-progressive-image-loading">More examples of Progressive Image Loading</a>.</li></ul><p>Turns out there are many other variations and lots of smart people are developing other techniques to create placeholders.</p><p>One of them is having gradients instead of solid colours. The gradients can create a more accurate preview of the final image, with very little overhead (increase in payload).</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale,w_1368/v1509278575/gradient-background_jyymty.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Using gradients as backgrounds. Screenshot from Gradify"> <small class="caption">Using gradients as backgrounds. Screenshot from Gradify, which is not online anymore. Code <a href="https://github.com/fraser-hemp/gradify" target="_blank" rel="noopener">on GitHub</a>.</small></p><p>Another technique is using SVGs based on the image, which is getting some traction with recent experiments and hacks.</p><h3 id="SVG-based-placeholders"><a href="#SVG-based-placeholders" class="headerlink" title="SVG-based placeholders"></a>SVG-based placeholders</h3><p>We know SVGs are ideal for vector images. In most cases we want to load a bitmap one, so the question is how to vectorise an image. Some options are using edges, shapes and areas.</p><h4 id="Edges"><a href="#Edges" class="headerlink" title="Edges"></a>Edges</h4><p>In <a href="/drawing-edges-svg">a previous post</a> I explained how to find out the edges of an image and create an animation. My initial goal was to try to draw regions, vectorising the image, but I didn’t know how to do it. I realised that using the edges could also be innovative and I decided to animate them creating a “drawing” effect.</p><div class="codepen-aspect-ratio" style="margin-bottom: 10px; padding-bottom: 100%; position: relative; width: 100%"><iframe id="cp_embed_oogqdp" src="//codepen.io/jmperez/embed/oogqdp?height=600&theme-id=0&slug-hash=oogqdp&default-tab=result" scrolling="no" frameborder="no" height="600" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="600" style="width: 600; overflow: hidden"></iframe></div><h4 id="Shapes"><a href="#Shapes" class="headerlink" title="Shapes"></a>Shapes</h4><p>SVG can also be used to draw areas from the image instead of edges/borders. In a way, we would vectorise a bitmap image to create a placeholder.</p><p>Back in the days I tried to do something similar with triangles. You can see the result in my talks <a href="/cssconfau16/#/45">at CSSConf</a> and <a href="/renderconf17/#/46">Render Conf</a>.</p><div class="codepen-aspect-ratio" style="margin-bottom: 10px; padding-bottom: 74%; position: relative; width: 100%"><iframe id="cp_embed_BmaWmQ" src="//codepen.io/jmperez/embed/BmaWmQ?height=444&theme-id=0&slug-hash=BmaWmQ&default-tab=result" scrolling="no" frameborder="no" height="444" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="600" style="width: 600; overflow: hidden"></iframe></div><p>The codepen above is a proof of concept of a SVG-based placeholder composed of 245 triangles. The generation of the triangles is based on <a href="https://en.wikipedia.org/wiki/Delaunay_triangulation" target="_blank" rel="noopener">Delaunay triangulation</a> using <a href="https://github.com/possan/polyserver" target="_blank" rel="noopener">Possan’s polyserver</a>. As expected, the more triangles the SVG uses, the bigger the file size.</p><h4 id="Primitive-and-SQIP-a-SVG-based-LQIP-technique"><a href="#Primitive-and-SQIP-a-SVG-based-LQIP-technique" class="headerlink" title="Primitive and SQIP, a SVG-based LQIP technique"></a>Primitive and SQIP, a SVG-based LQIP technique</h4><p>Tobias Baldauf has been working on another Low-Quality Image Placeholder technique using SVGs called <a href="https://github.com/technopagan/sqip" target="_blank" rel="noopener">SQIP</a>. Before digging into SQIP itself I will give an overview of <a href="https://github.com/fogleman/primitive" target="_blank" rel="noopener">Primitive</a>, a library on which SQIP is based.</p><p>Primitive is quite fascinating and I definitely recommend you to check it out. It converts a bitmap image into a SVG composed of overlapping shapes. Its small size makes it suitable for inlining it straight into the page. One less roundtrip, and a meaningful placeholder within the initial HTML payload.</p><p>Primitive generates an image based on shapes like triangles, rectangles and circles (and a few others). In every step it adds a new one. The more steps, the resulting image looks closer to the original one. If your output is SVG it also means the size of the output code will be larger.</p><p>In order to understand how Primitive works, I ran it through a couple of images. I generated SVGs for the pictures using 10 shapes and 100 shapes:</p><div><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-281184-square-10.svg_ifiu2z.png" sizes="(max-width: 768px) 33vw, 228px" alt="Processing a picture through Primitive using 10 shapes" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-281184-square-100.svg_tkr8el.png" sizes="(max-width: 768px) 33vw, 228px" alt="Processing a picture through Primitive using 100 shapes" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367395/pexels-photo-281184-square_tuhvso.jpg" sizes="(max-width: 768px) 33vw, 228px" alt="Original picture" style="width:32%;float:left;padding-bottom:10px"></div><p><small class="caption">Processing <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square.jpg">this picture</a> using Primitive, using <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-10.svg">10 shapes</a> and <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-100.svg">100 shapes</a>.</small></p><div><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-618463-square-10.svg_aeonon.png" sizes="(max-width: 768px) 33vw, 228px" alt="Processing a picture through Primitive using 10 shapes" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-618463-square-100.svg_t6pwcv.png" sizes="(max-width: 768px) 33vw, 228px" alt="Processing a picturethrough Primitive using 100 shapes" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367395/pexels-photo-618463-square_pmbi9x.jpg" sizes="(max-width: 768px) 33vw, 228px" alt="Original picture" style="width:32%;float:left;padding-bottom:10px"></div><p><small class="caption">Processing <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square.jpg">this picture</a> using Primitive, using <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-10.svg">10 shapes</a> and <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-100.svg">100 shapes</a>.</small></p><p>When using 10 shapes the images we start getting a grasp of the original image. In the context of image placeholders there is potential to use this SVG as the placeholder. Actually, the code for the SVG with 10 shapes is really small, around 1030 bytes, which goes down to ~640 bytes when passing the output through SVGO.</p><div class="code-wrap"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">width</span>=<span class="string">"1024"</span> <span class="attr">height</span>=<span class="string">"1024"</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#817c70"</span> <span class="attr">d</span>=<span class="string">"M0 0h1024v1024H0z"</span>/&gt;</span><span class="tag">&lt;<span class="name">g</span> <span class="attr">fill-opacity</span>=<span class="string">".502"</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#03020f"</span> <span class="attr">d</span>=<span class="string">"M178 994l580 92L402-62"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#f2e2ba"</span> <span class="attr">d</span>=<span class="string">"M638 894L614 6l472 440"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#fff8be"</span> <span class="attr">d</span>=<span class="string">"M-62 854h300L138-62"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#76c2d9"</span> <span class="attr">d</span>=<span class="string">"M410-62L154 530-62 38"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#62b4cf"</span> <span class="attr">d</span>=<span class="string">"M1086-2L498-30l484 508"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#010412"</span> <span class="attr">d</span>=<span class="string">"M430-2l196 52-76 356"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#eb7d3f"</span> <span class="attr">d</span>=<span class="string">"M598 594l488-32-308 520"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#080a18"</span> <span class="attr">d</span>=<span class="string">"M198 418l32 304 116-448"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#3f201d"</span> <span class="attr">d</span>=<span class="string">"M1086 1062l-344-52 248-148"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#ebd29f"</span> <span class="attr">d</span>=<span class="string">"M630 658l-60-372 516 320"</span>/&gt;</span><span class="tag">&lt;/<span class="name">g</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>The images generated with 100 shapes are larger, as expected, weighting ~5kB after SVGO (8kB before). They have a great level of detail with a still small payload. The decision of how many triangles to use will depend largely on the type of image (eg contrast, amount of colours, complexity) and level of detail.</p><p>It would be possible to create a script similar to <a href="https://github.com/technopagan/cjpeg-dssim" target="_blank" rel="noopener">cpeg-dssim</a> that tweaks the amount of shapes used until a <a href="https://en.wikipedia.org/wiki/Structural_similarity" target="_blank" rel="noopener">structural similarity</a> threshold is met (or a maximum number of shapes in the worst case).</p><p>These resulting SVGs are great also to use as background images. Being size-constrained and vector-based they are a good candidate for hero images and large backgrounds that otherwise would show artifacts.</p><h4 id="SQIP"><a href="#SQIP" class="headerlink" title="SQIP"></a>SQIP</h4><p>In <a href="https://github.com/technopagan/sqip" target="_blank" rel="noopener">Tobias’ own words</a>:</p><blockquote><p>SQIP is an attempt to find a balance between these two extremes: it makes use of <a href="https://github.com/fogleman/primitive" target="_blank" rel="noopener">Primitive</a> to generate a SVG consisting of several simple shapes that approximate the main features visible inside the image, optimizes the SVG using <a href="https://github.com/svg/svgo" target="_blank" rel="noopener">SVGO</a> and adds a Gaussian Blur filter to it. This produces a SVG placeholder which weighs in at only ~800–1000 bytes, looks smooth on all screens and provides an visual cue of image contents to come.</p></blockquote><p>The result is similar to using a tiny placeholder image for the blur-up technique (what <a href="/medium-image-progressive-loading-placeholder">Medium</a> and <a href="/more-progressive-image-loading">other sites</a> do). The difference is that instead of using a bitmap image, eg JPG or WebP, the placeholder is SVG.</p><p>If we run SQIP against the original images we’ll get this:</p><div><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:342,f_auto,c_scale,w_670/v1509370309/pexels-photo-281184-square-sqip.svg_zspgb0.png" sizes="(max-width: 768px) 50vw, 342px" alt="SQIP applied to an image" style="width:49%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:342,f_auto,c_scale,w_670/v1509370308/pexels-photo-618463-square-sqip.svg_qjrexh.png" sizes="(max-width: 768px) 50vw, 342px" alt="SQIP applied to an image" style="width:49%;float:left;padding-bottom:10px"></div><p><small class="caption">The output images using SQIP for <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-sqip.svg">the first picture</a> and <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-sqip.svg">the second one</a>.</small></p><p>The output SVG is ~900 bytes, and inspecting the code we can spot the <code>feGaussianBlur</code> filter applied to the group of shapes:</p><div class="code-wrap"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 2000 2000"</span>&gt;</span><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">"b"</span>&gt;</span><span class="tag">&lt;<span class="name">feGaussianBlur</span> <span class="attr">stdDeviation</span>=<span class="string">"12"</span> /&gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#817c70"</span> <span class="attr">d</span>=<span class="string">"M0 0h2000v2000H0z"</span>/&gt;</span><span class="tag">&lt;<span class="name">g</span> <span class="attr">filter</span>=<span class="string">"url(#b)"</span> <span class="attr">transform</span>=<span class="string">"translate(4 4) scale(7.8125)"</span> <span class="attr">fill-opacity</span>=<span class="string">".5"</span>&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#000210"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(50.41098 -3.7951 11.14787 148.07886 107 194.6)"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#eee3bb"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(-56.38179 17.684 -24.48514 -78.06584 205 110.1)"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#fff4bd"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(35.40604 -5.49219 14.85017 95.73337 16.4 123.6)"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#79c7db"</span> <span class="attr">cx</span>=<span class="string">"21"</span> <span class="attr">cy</span>=<span class="string">"39"</span> <span class="attr">rx</span>=<span class="string">"65"</span> <span class="attr">ry</span>=<span class="string">"65"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#0c1320"</span> <span class="attr">cx</span>=<span class="string">"117"</span> <span class="attr">cy</span>=<span class="string">"38"</span> <span class="attr">rx</span>=<span class="string">"34"</span> <span class="attr">ry</span>=<span class="string">"47"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#5cb0cd"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(-39.46201 77.24476 -54.56092 -27.87353 219.2 7.9)"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#e57339"</span> <span class="attr">d</span>=<span class="string">"M271 159l-123-16 43 128z"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#47332f"</span> <span class="attr">cx</span>=<span class="string">"214"</span> <span class="attr">cy</span>=<span class="string">"237"</span> <span class="attr">rx</span>=<span class="string">"242"</span> <span class="attr">ry</span>=<span class="string">"19"</span>/&gt;</span><span class="tag">&lt;/<span class="name">g</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>SQIP can also output an image tag with the SVG contents Base 64 encoded:</p><div class="code-wrap"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"640"</span> <span class="attr">src</span>=<span class="string">"example.jpg"</span> <span class="attr">alt</span>=<span class="string">"Add descriptive alt text"</span> <span class="attr">style</span>=<span class="string">"background-size: cover; background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAw...&lt;stripped base 64&gt;...PjwvZz48L3N2Zz4=);"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h4 id="Silhouettes"><a href="#Silhouettes" class="headerlink" title="Silhouettes"></a>Silhouettes</h4><p>We just had a look at using SVGs for edges and primitive shapes. Another possibility is to vectorise the images “tracing” them. <a href="https://twitter.com/mikaelainalem" target="_blank" rel="noopener">Mikael Ainalem</a> shared <a href="https://codepen.io/ainalem/full/aLKxjm/" target="_blank" rel="noopener">a codepen</a> a few days ago showing how to use a 2-colour silhouette as a placeholder. The result is really pretty:</p><video controls style="max-width:100%" width="690" height="459"><source src="https://res.cloudinary.com/jmperez/video/upload/dpr_auto,f_auto,q_auto,c_scale/v1509278615/silhouette-lazy-loading_evq9xq.mp4" type="video/mp4"></video><p>The SVGs in this case were hand drawn, but the technique quickly spawned integrations with tools to automate the process.</p><ul><li><a href="https://www.gatsbyjs.org" target="_blank" rel="noopener">Gatsby</a>, a static site generator using React supports these traced SVGs now. It uses <a href="https://www.npmjs.com/package/potrace" target="_blank" rel="noopener">a JS port of potrace</a> to vectorise the images.</li></ul><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Excited to announce that Gatsby now has super simple support for traced SVG!<br><br>Thanks to <a href="https://twitter.com/fk?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@fk</a> for his great work!<a href="https://t.co/XfgEDbSILA" target="_blank" rel="noopener">https://t.co/XfgEDbSILA</a> <a href="https://t.co/wTwOgT8C5V" target="_blank" rel="noopener">pic.twitter.com/wTwOgT8C5V</a></p>&mdash; Gatsby (@gatsbyjs) <a href="https://twitter.com/gatsbyjs/status/923304195666485248?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">25 October 2017</a></blockquote><ul><li><a href="https://craftcms.com" target="_blank" rel="noopener">Craft 3 CMS</a>, which also added support for silhouettes. It uses <a href="https://github.com/nystudio107/craft3-imageoptimize/blob/master/src/lib/Potracio.php" target="_blank" rel="noopener">a PHP port of potrace</a>.</li></ul><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Cool video of using inline SVG images as lazy loading placeholders w/ ImageOptimize &amp; Craft 3 from <a href="https://twitter.com/slebbo?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@slebbo</a> <a href="https://t.co/E1dYA4ayow" target="_blank" rel="noopener">https://t.co/E1dYA4ayow</a> <a href="https://twitter.com/hashtag/craftcms?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#craftcms</a> <a href="https://t.co/ruf8i6URCT" target="_blank" rel="noopener">pic.twitter.com/ruf8i6URCT</a></p>&mdash; nystudio107 (@nystudio107) <a href="https://twitter.com/nystudio107/status/920673966091534338?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">18 October 2017</a></blockquote><ul><li><a href="https://github.com/EmilTholin/image-trace-loader" target="_blank" rel="noopener">image-trace-loader</a>, a Webpack loader that uses potrace to process the images.</li></ul><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">I just released image-trace-loader, a <a href="https://twitter.com/hashtag/webpack?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#webpack</a> loader that exports traced outlines as image/svg+xml data.<a href="https://t.co/2VZaKVaE4p" target="_blank" rel="noopener">https://t.co/2VZaKVaE4p</a> <a href="https://t.co/vRma67R7zb" target="_blank" rel="noopener">pic.twitter.com/vRma67R7zb</a></p>&mdash; Emil Tholin (@Tholle1234) <a href="https://twitter.com/Tholle1234/status/920423596346019840?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">17 October 2017</a></blockquote><p>It’s also interesting to see a comparison of the output between Emil’s webpack loader (based on potrace) and Mikael’s hand-drawn SVGs.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Comparison of <a href="https://twitter.com/mikaelainalem?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@mikaelainalem</a> &#39;s SVG lazy-loading technique <a href="https://t.co/mbqVpxzn72" target="_blank" rel="noopener">https://t.co/mbqVpxzn72</a> with @Tholle123&#39;s webpack loader <a href="https://t.co/3jxjtNP8dm" target="_blank" rel="noopener">https://t.co/3jxjtNP8dm</a> <a href="https://t.co/tChcPK0mIK" target="_blank" rel="noopener">pic.twitter.com/tChcPK0mIK</a></p>&mdash; Yuriy Nemtsov (@nemtsovy) <a href="https://twitter.com/nemtsovy/status/920647706799955970?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">18 October 2017</a></blockquote><p>I assume the output generated by potrace is using the default options. However, it’s possible to tweak them. Check <a href="https://github.com/EmilTholin/image-trace-loader#options" target="_blank" rel="noopener">the options for image-trace-loader</a>, which are pretty much <a href="https://www.npmjs.com/package/potrace#parameters" target="_blank" rel="noopener">the ones passed down to potrace</a>.</p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>We have seen different tools and techniques to generate SVGs from images and use them as placeholders. The same way <a href="/webp-placeholder-images/">WebP is a fantastic format for thumbnails</a>, SVG is also an interesting format to use in placeholders. We can control the level of detail (and thus, size), it’s highly compressible and easy to manipulate with CSS and JS.</p><h2 id="Extra-Resources"><a href="#Extra-Resources" class="headerlink" title="Extra Resources"></a>Extra Resources</h2><p>This post made it to <a href="https://news.ycombinator.com/item?id=15696596" target="_blank" rel="noopener">the top of Hacker News and got a lot of points and comments</a>. I’m very grateful for that, and for all the links to other resources that have been shared in the comments on that page. Here are a few of them!</p><ul><li><a href="https://github.com/Tw1ddle/geometrize-haxe" target="_blank" rel="noopener">Geometrize</a> is a port of Primitive written in Haxe. There is also <a href="https://github.com/Tw1ddle/geometrize-haxe-web" target="_blank" rel="noopener">a JS implementation</a> that you can try out directly <a href="http://www.samcodes.co.uk/project/geometrize-haxe-web/" target="_blank" rel="noopener">on your browser</a>.</li><li><a href="https://github.com/ondras/primitive.js" target="_blank" rel="noopener">Primitive.js</a>, which is a port of Primitive in JS. Also, <a href="https://github.com/cielito-lindo-productions/primitive.nextgen" target="_blank" rel="noopener">primitive.nextgen</a>, which is a port of the Primitive desktop app using Primitive.js and Electron.</li><li>There are a couple of Twitter accounts where you can see examples of images generated with Primitive and Geometrize. Check out <a href="https://twitter.com/PrimitivePic" target="_blank" rel="noopener">@PrimitivePic</a> and <a href="https://twitter.com/Geometrizer" target="_blank" rel="noopener">@Geometrizer</a>.</li><li><a href="https://github.com/jankovicsandras/imagetracerjs" target="_blank" rel="noopener">imagetracerjs</a>, which is a raster image tracer and vectorizer written in JavaScript. There are also ports for <a href="https://github.com/jankovicsandras/imagetracerjava" target="_blank" rel="noopener">Java</a> and <a href="https://github.com/jankovicsandras/imagetracerandroid" target="_blank" rel="noopener">Android</a>.</li></ul><h2 id="Related-Posts"><a href="#Related-Posts" class="headerlink" title="Related Posts"></a>Related Posts</h2><p>If you have enjoyed this post, check out these other posts I have written about techniques loading images:</p><ul><li><a href="/medium-image-progressive-loading-placeholder">How Medium does progressive image loading</a></li><li><a href="/webp-placeholder-images">Using WebP to create tiny preview images</a></li><li><a href="/more-progressive-image-loading">More examples of Progressive Image Loading</a></li></ul><p><em>This post is also available <a href="/es/svg-placeholders">in Spanish</a></em></p><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>]]></content>
    
    <summary type="html">
    
      Web Performance Optimisation by lazy-loading images using SVGs as placeholders, representing edges, shapes and silhouettes.
    
    </summary>
    
    
      <category term="svg" scheme="https://jmperezperez.com/tags/svg/"/>
    
  </entry>
  
  <entry>
    <title>Usando SVG como placeholders — Más técnicas de carga de imágenes</title>
    <link href="https://jmperezperez.com/es/svg-placeholders/"/>
    <id>https://jmperezperez.com/es/svg-placeholders/</id>
    <published>2017-10-29T21:30:00.000Z</published>
    <updated>2018-03-19T15:24:57.718Z</updated>
    
    <content type="html"><![CDATA[<p>Me apasiona la optimización del rendimiento de imágenes y hacer que las imágenes carguen rápido. Una de las áreas de estudio más interesantes es el placeholder: qué mostrar cuando la imagen todavía no se ha cargado.</p><p>Durante los últimos días me he encontrado con algunas técnicas de carga que usan SVG, y me gustaría describirlas en este post.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1509278557/jmperez-composition-primitive_j8zyfn.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Ejemplo de un SVG generado utilizando 10 y 100 triángulos basado en una imagen de mapa de bits"> <small class="caption">Los SVGs generados a partir de imágenes pueden ser usados como placeholders. ¡Sigue leyendo!</small></p><a id="more"></a><p>En esta publicación hablaré sobre estos temas:</p><ul><li>Descripción general de los diferentes tipos de placeholders</li><li>Placeholders basados en SVG (contornos, formas y siluetas)</li><li>Automatización del proceso.</li></ul><h3 id="Descripcion-general-de-los-diferentes-tipos-de-placeholders"><a href="#Descripcion-general-de-los-diferentes-tipos-de-placeholders" class="headerlink" title="Descripción general de los diferentes tipos de placeholders"></a>Descripción general de los diferentes tipos de placeholders</h3><p>En el pasado <a href="/lazy-loading-images">he escrito sobre placeholders y lazy-load de imágenes</a>, y también <a href="https://www.youtube.com/watch?v=szmVNOnkwoU" target="_blank" rel="noopener">he dado charlas sobre ello</a>. Cuando se hace lazy-load de imágenes es conveniente pensar en qué renderizar como placeholder, dado que puede tener un gran impacto en el rendimiento percibido por el usuario. Hace un tiempo describí algunas opciones:</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1509278557/placeholder-options_vtwp6b.png" sizes="(max-width: 768px) 100vw, 684px"> <small class="caption">Diferentes estrategias para rellenar el área de una imagen mientras ésta carga.</small></p><ul><li><strong>Mantener el espacio vacío para las imágenes</strong>: En un mundo de diseño responsive, reservar el área para la imagen evita que el contenido salte. Los cambios de layout son malos desde el punto de vista de la experiencia de usuario, pero también son nefastos en cuanto al rendimiento. El navegador debe recalcular el layout cada vez que obtiene las dimensiones de una imagen, para dejar espacio para la misma.</li><li><strong>Placeholder</strong>: Imagina que estamos mostrando la imagen de perfil de un usuario. Quizás queremos mostrar una silueta como imagen de background. Esta imagen se muestra mientras la imagen principal está cargando, pero también si la petición falla o si el usuario no ha establecido ninguna imagen de perfil. Habitualmente estas imágenes son vectoriales, y dado su pequeño tamaño son excelentes candidatas para ser servidas inline.</li><li><strong>Color sólido</strong>: Podemos tomar un color de la imagen y usarlo como color de fondo en el placeholder. Puede ser el color dominante, el más vibrante… La idea es que está basado o extraído de la imagen que se desea cargar, y el resultado debería ayudar a suavizar la transición entre “no imagen” e “imagen cargada”.</li><li><strong>Imagen desenfocada</strong>: También llamada técnica <em>blur up</em>. Se renderiza una versión muy pequeña de la imagen y se hace la transición a la imagen completa. La imagen inicial es pequeña tanto en píxeles como en kBs. Para eliminar artefactos de compresión la imagen se amplía y se desenfoca. He escrito previamente sobre este tema en <a href="/medium-image-progressive-loading-placeholder">Cómo Medium hacer carga progresiva de imágenes</a>, <a href="/webp-placeholder-images">Usando WebP para crear previsualizaciones pequeñas</a>, y <a href="/more-progressive-image-loading">Más ejemplos de carga progresiva de imágenes</a>.</li></ul><p>Resulta que hay muchas otras variaciones y mucha gente inteligente desarrollando otras técnicas para crear placeholders.</p><p>Una de ellas es generar gradientes o degradados en vez de colores sólidos. Los gradientes pueden crear una previsualización de la imagen final más precisa, con unos pocos bytes extra.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale,w_1368/v1509278575/gradient-background_jyymty.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Usando gradientes como fondos. Captura tomada de Gradify"> <small class="caption">Usando gradientes como fondos. Captura de Gradify, que ya no está disponible on-line. El código <a href="https://github.com/fraser-hemp/gradify" target="_blank" rel="noopener">está en GitHub</a>.</small></p><p>Otra técnica consiste en utilizar SVGs basados en la imagen, que está popularizándose gracias a algunos hacks y experimentos recientes.</p><h3 id="Placeholders-basados-en-SVG"><a href="#Placeholders-basados-en-SVG" class="headerlink" title="Placeholders basados en SVG"></a>Placeholders basados en SVG</h3><p>Sabemos que los SVGs son ideales para imágenes vectoriales. En la mayoría de casos queremos cargar una imagen de mapa de bits (JPG, PNG…), así que la cuestión es cómo vectorizar la imagen. Podemos utilizar contornos, formas y áreas.</p><h4 id="Contornos"><a href="#Contornos" class="headerlink" title="Contornos"></a>Contornos</h4><p>En <a href="/drawing-edges-svg">un post anterior</a> expliqué cómo calcular los contornos de una imagen y animarlos. Mi objetivo inicial era intentar dibujar regiones, vectorizando la imagen, pero no sabía cómo hacerlo. Me di cuenta de que usando los contornos también podía ser innovador y decidí animarlos para crear un efecto de “dibujado”.</p><div class="codepen-aspect-ratio" style="margin-bottom: 10px; padding-bottom: 100%; position: relative; width: 100%"><iframe id="cp_embed_oogqdp" src="//codepen.io/jmperez/embed/oogqdp?height=600&theme-id=0&slug-hash=oogqdp&default-tab=result" scrolling="no" frameborder="no" height="600" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="600" style="width: 600; overflow: hidden"></iframe></div><h4 id="Formas"><a href="#Formas" class="headerlink" title="Formas"></a>Formas</h4><p>También podemos usar SVG para dibujar áreas de la imagen en lugar de contornos o bordes. De alguna manera estaríamos vectorizando una imagen de mapa de bits para crear un placeholder.</p><p>En su día intenté hacer algo similar con triángulos. Puedes ver el resultado en mis charlas <a href="/cssconfau16/#/45">en CSSConf</a> y <a href="/renderconf17/#/46">Render Conf</a>.</p><div class="codepen-aspect-ratio" style="margin-bottom: 10px; padding-bottom: 74%; position: relative; width: 100%"><iframe id="cp_embed_BmaWmQ" src="//codepen.io/jmperez/embed/BmaWmQ?height=444&theme-id=0&slug-hash=BmaWmQ&default-tab=result" scrolling="no" frameborder="no" height="444" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="600" style="width: 600; overflow: hidden"></iframe></div><p>Este codepen es una prueba de concepto de un placeholder basado en SVG compuesto por 245 triángulos. La generación de los triángulos utiliza la <a href="https://es.wikipedia.org/wiki/Triangulaci%C3%B3n_de_Delaunay" target="_blank" rel="noopener">triangulación de Delaunay</a> a partir del proyecto <a href="https://github.com/possan/polyserver" target="_blank" rel="noopener">polyserver de Possan</a>. Como es de esperar, a mayor número de triángulos, mayor es el tamaño del fichero resultante.</p><h4 id="Primitive-y-SQIP-una-tecnica-LQIP-basada-en-SVG"><a href="#Primitive-y-SQIP-una-tecnica-LQIP-basada-en-SVG" class="headerlink" title="Primitive y SQIP, una técnica LQIP basada en SVG"></a>Primitive y SQIP, una técnica LQIP basada en SVG</h4><p>Tobias Baldauf ha estado trabajando en otra técnica LQIP (<em>Low-Quality Image Placeholder</em>) usando SVGs llamada <a href="https://github.com/technopagan/sqip" target="_blank" rel="noopener">SQIP</a>. Antes de adentrarnos en SQIP, me gustaría describir <a href="https://github.com/fogleman/primitive" target="_blank" rel="noopener">Primitive</a>, una librería que SQIP utiliza internamente.</p><p>Primitive es fascinante y recomiendo definitivamente que le eches un ojo. Convierte una imagen de mapa de bits en un SVG compuesto por formas que se solapan. Su pequeño tamaño lo hace ideal para incluirlo de forma inline en la página. Así se consigue reducir una petición, a la vez que se renderiza un placeholder bastante cercano a la imagen final incrustada en el cuerpo del HTML inicial.</p><p>Primitive genera una imagen basada en figuras como triángulos, rectángulos y círculos entre otros. En cada paso añade una figura. A más pasos, la imagen resultante se va pareciendo más a la imagen original. Si el formato de salida elegido es SVG, también significa que el fichero será más grande cuantas más figuras contenga.</p><p>Para comprender cómo funciona Primitive lo ejecuté tomando un par de imágenes de prueba. Generé SVGs a partir de las imágenes usando 10 y 100 triángulos:</p><div><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-281184-square-10.svg_ifiu2z.png" sizes="(max-width: 768px) 33vw, 228px" alt="Procesando una imagen usando Primitive con 10 triángulos" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-281184-square-100.svg_tkr8el.png" sizes="(max-width: 768px) 33vw, 228px" alt="Procesando una imagen usando Primitive con 100 triángulos" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367395/pexels-photo-281184-square_tuhvso.jpg" sizes="(max-width: 768px) 33vw, 228px" alt="Imagen original" style="width:32%;float:left;padding-bottom:10px"></div><p><small class="caption">Procesando <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square.jpg">esta imagen</a> con Primitive, usando <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-10.svg">10 triángulos</a> y <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-100.svg">100 triángulos</a>.</small></p><div><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-618463-square-10.svg_aeonon.png" sizes="(max-width: 768px) 33vw, 228px" alt="Procesando una imagen usando Primitive con 10 triángulos" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-618463-square-100.svg_t6pwcv.png" sizes="(max-width: 768px) 33vw, 228px" alt="Procesando una imagen usando Primitive con 100 triángulos" style="width:32%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367395/pexels-photo-618463-square_pmbi9x.jpg" sizes="(max-width: 768px) 33vw, 228px" alt="Imagen original" style="width:32%;float:left;padding-bottom:10px"></div><p><small class="caption">Procesando <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square.jpg">esta imagen</a> con Primitive, usando <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-10.svg">10 triángulos</a> y <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-100.svg">100 triángulos</a>.</small></p><p>Usando 10 triángulos las imágenes empiezan a parecerse a la versión original. Estas imágenes SVG pueden ser adecuadas como placeholders. De hecho el código del SVG de 10 triángulos es muy pequeño, unos 1.030 bytes, que pueden reducirse hasta unos 640 bytes si pasamos la salida por SVGO.</p><div class="code-wrap"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">width</span>=<span class="string">"1024"</span> <span class="attr">height</span>=<span class="string">"1024"</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#817c70"</span> <span class="attr">d</span>=<span class="string">"M0 0h1024v1024H0z"</span>/&gt;</span><span class="tag">&lt;<span class="name">g</span> <span class="attr">fill-opacity</span>=<span class="string">".502"</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#03020f"</span> <span class="attr">d</span>=<span class="string">"M178 994l580 92L402-62"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#f2e2ba"</span> <span class="attr">d</span>=<span class="string">"M638 894L614 6l472 440"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#fff8be"</span> <span class="attr">d</span>=<span class="string">"M-62 854h300L138-62"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#76c2d9"</span> <span class="attr">d</span>=<span class="string">"M410-62L154 530-62 38"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#62b4cf"</span> <span class="attr">d</span>=<span class="string">"M1086-2L498-30l484 508"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#010412"</span> <span class="attr">d</span>=<span class="string">"M430-2l196 52-76 356"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#eb7d3f"</span> <span class="attr">d</span>=<span class="string">"M598 594l488-32-308 520"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#080a18"</span> <span class="attr">d</span>=<span class="string">"M198 418l32 304 116-448"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#3f201d"</span> <span class="attr">d</span>=<span class="string">"M1086 1062l-344-52 248-148"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#ebd29f"</span> <span class="attr">d</span>=<span class="string">"M630 658l-60-372 516 320"</span>/&gt;</span><span class="tag">&lt;/<span class="name">g</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>Las imágenes generadas con 100 triángulos son más grandes, en kB, como es de esperar. En esta prueba las imágenes ocupan unos 5kB tras aplicar SVGO (8kB antes). Tienen un gran nivel de detalle en un tamaño comedido. La decisión de cuántos triángulos usar depende mucho del tipo de imagen (por ejemplo contraste, cantidad de colores, complejidad de la forma) y el nivel de detalle deseado.</p><p>Sería posible crear un script similar a <a href="https://github.com/technopagan/cjpeg-dssim" target="_blank" rel="noopener">cpeg-dssim</a> que ajusta la cantidad de formas hasta llegar a un umbral de <a href="https://en.wikipedia.org/wiki/Structural_similarity" target="_blank" rel="noopener">similaridad estructural</a>, o un máximo número de formas en el peor caso.</p><p>Los SVGs resultantes son una buena opción también como imágenes de fondo. Dado que son vectoriales y tienen un tamaño limitado, son un buen candidato para imágenes <em>hero</em> y fondos de gran tamaño que de otro modo mostrarían artefactos de compresión.</p><h4 id="SQIP"><a href="#SQIP" class="headerlink" title="SQIP"></a>SQIP</h4><p>En <a href="https://github.com/technopagan/sqip" target="_blank" rel="noopener">palabras de Tobias</a>:</p><blockquote><p>SQIP es un intento de encontrar un balance entre estos dos extremos: hace uso de <a href="https://github.com/fogleman/primitive" target="_blank" rel="noopener">Primitive</a> para generar un SVG consistente en varias formas sencillas que aproximan las principales características visibles dentro de la imagen, optimiza el SVG utilizando <a href="https://github.com/svg/svgo" target="_blank" rel="noopener">SVGO</a> y le añade un filtro de desenfoque gaussiano. Esto produce un placeholder SVG que pesa sólo ~800–1000 bytes, se ve bien en todas las pantallas y proporciona una pista visual del contenido de la imagen que se va a cargar.</p></blockquote><p>El resultado es similar a utilizar una imagen pequeña como placeholder en la técnica blur-up (lo que <a href="/medium-image-progressive-loading-placeholder">Medium</a> y <a href="/more-progressive-image-loading">otros sitios</a> hacen). La diferencia es que, en lugar de utilizar una imagen bitmap como JPG o WebP, el placeholder usa SVG.</p><p>Si ejecutamos SQIP con las imágenes originales obtenemos esto:</p><div><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:342,f_auto,c_scale,w_670/v1509370309/pexels-photo-281184-square-sqip.svg_zspgb0.png" sizes="(max-width: 768px) 50vw, 342px" alt="SQIP aplicado a una imagen" style="width:49%;float:left;margin-right:2%;padding-bottom:10px"><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:342,f_auto,c_scale,w_670/v1509370308/pexels-photo-618463-square-sqip.svg_qjrexh.png" sizes="(max-width: 768px) 50vw, 342px" alt="SQIP aplicado a una imagen" style="width:49%;float:left;padding-bottom:10px"></div><p><small class="caption">Las imágenes resultantes tras aplicar SQIP sobre <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-sqip.svg">la primera imagen</a> y <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-sqip.svg">la segunda</a>.</small></p><p>El SVG resultante ocupa ~900 bytes. Inspeccionando el código podemos observar el filtro <code>feGaussianBlur</code> aplicado al grupo de formas:</p><div class="code-wrap"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 2000 2000"</span>&gt;</span><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">"b"</span>&gt;</span><span class="tag">&lt;<span class="name">feGaussianBlur</span> <span class="attr">stdDeviation</span>=<span class="string">"12"</span> /&gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#817c70"</span> <span class="attr">d</span>=<span class="string">"M0 0h2000v2000H0z"</span>/&gt;</span><span class="tag">&lt;<span class="name">g</span> <span class="attr">filter</span>=<span class="string">"url(#b)"</span> <span class="attr">transform</span>=<span class="string">"translate(4 4) scale(7.8125)"</span> <span class="attr">fill-opacity</span>=<span class="string">".5"</span>&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#000210"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(50.41098 -3.7951 11.14787 148.07886 107 194.6)"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#eee3bb"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(-56.38179 17.684 -24.48514 -78.06584 205 110.1)"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#fff4bd"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(35.40604 -5.49219 14.85017 95.73337 16.4 123.6)"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#79c7db"</span> <span class="attr">cx</span>=<span class="string">"21"</span> <span class="attr">cy</span>=<span class="string">"39"</span> <span class="attr">rx</span>=<span class="string">"65"</span> <span class="attr">ry</span>=<span class="string">"65"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#0c1320"</span> <span class="attr">cx</span>=<span class="string">"117"</span> <span class="attr">cy</span>=<span class="string">"38"</span> <span class="attr">rx</span>=<span class="string">"34"</span> <span class="attr">ry</span>=<span class="string">"47"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#5cb0cd"</span> <span class="attr">rx</span>=<span class="string">"1"</span> <span class="attr">ry</span>=<span class="string">"1"</span> <span class="attr">transform</span>=<span class="string">"matrix(-39.46201 77.24476 -54.56092 -27.87353 219.2 7.9)"</span>/&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">fill</span>=<span class="string">"#e57339"</span> <span class="attr">d</span>=<span class="string">"M271 159l-123-16 43 128z"</span>/&gt;</span><span class="tag">&lt;<span class="name">ellipse</span> <span class="attr">fill</span>=<span class="string">"#47332f"</span> <span class="attr">cx</span>=<span class="string">"214"</span> <span class="attr">cy</span>=<span class="string">"237"</span> <span class="attr">rx</span>=<span class="string">"242"</span> <span class="attr">ry</span>=<span class="string">"19"</span>/&gt;</span><span class="tag">&lt;/<span class="name">g</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>SQIP también puede imprimir como resultado una etiqueta <code>img</code> con el contenido del SVG codificado en Base 64:</p><div class="code-wrap"><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"640"</span> <span class="attr">src</span>=<span class="string">"example.jpg"</span> <span class="attr">alt</span>=<span class="string">"Add descriptive alt text"</span> <span class="attr">style</span>=<span class="string">"background-size: cover; background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAw...&lt;stripped base 64&gt;...PjwvZz48L3N2Zz4=);"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><h4 id="Siluetas"><a href="#Siluetas" class="headerlink" title="Siluetas"></a>Siluetas</h4><p>Acabamos de ver cómo usar SVGs para contornos y formas básicas. Otra posibilidad es vectorizar las imágenes “trazándolas”. <a href="https://twitter.com/mikaelainalem" target="_blank" rel="noopener">Mikael Ainalem</a> compartió <a href="https://codepen.io/ainalem/full/aLKxjm/" target="_blank" rel="noopener">un codepen</a> hace unos días mostrando cómo usar una silueta con 2 colores como placeholder. El resultado es muy bonito:</p><video controls style="max-width:100%" width="690" height="459"><source src="https://res.cloudinary.com/jmperez/video/upload/dpr_auto,f_auto,q_auto,c_scale/v1509278615/silhouette-lazy-loading_evq9xq.mp4" type="video/mp4"></video><p>En este caso los SVGs están dibujados a mano, pero la técnica inspiró rápidamente a desarrolladores que crearon integraciones con herramientas que automatizaban el proceso.</p><ul><li><a href="https://www.gatsbyjs.org" target="_blank" rel="noopener">Gatsby</a>, un generador de sitios estáticos basado en React, soporta estos SVGs trazados. Utiliza <a href="https://www.npmjs.com/package/potrace" target="_blank" rel="noopener">un port de potrace a JavaScript</a> para vectorizar las imágenes.</li></ul><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Excited to announce that Gatsby now has super simple support for traced SVG!<br><br>Thanks to <a href="https://twitter.com/fk?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@fk</a> for his great work!<a href="https://t.co/XfgEDbSILA" target="_blank" rel="noopener">https://t.co/XfgEDbSILA</a> <a href="https://t.co/wTwOgT8C5V" target="_blank" rel="noopener">pic.twitter.com/wTwOgT8C5V</a></p>&mdash; Gatsby (@gatsbyjs) <a href="https://twitter.com/gatsbyjs/status/923304195666485248?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">25 October 2017</a></blockquote><ul><li><a href="https://craftcms.com" target="_blank" rel="noopener">Craft 3 CMS</a>, que también añadió soporte para siluetas. Utiliza <a href="https://github.com/nystudio107/craft3-imageoptimize/blob/master/src/lib/Potracio.php" target="_blank" rel="noopener">un port de potrace a PHP</a>.</li></ul><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Cool video of using inline SVG images as lazy loading placeholders w/ ImageOptimize &amp; Craft 3 from <a href="https://twitter.com/slebbo?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@slebbo</a> <a href="https://t.co/E1dYA4ayow" target="_blank" rel="noopener">https://t.co/E1dYA4ayow</a> <a href="https://twitter.com/hashtag/craftcms?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#craftcms</a> <a href="https://t.co/ruf8i6URCT" target="_blank" rel="noopener">pic.twitter.com/ruf8i6URCT</a></p>&mdash; nystudio107 (@nystudio107) <a href="https://twitter.com/nystudio107/status/920673966091534338?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">18 October 2017</a></blockquote><ul><li><a href="https://github.com/EmilTholin/image-trace-loader" target="_blank" rel="noopener">image-trace-loader</a>, un loader de Webpack que utiliza potrace para procesar las imágenes.</li></ul><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">I just released image-trace-loader, a <a href="https://twitter.com/hashtag/webpack?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#webpack</a> loader that exports traced outlines as image/svg+xml data.<a href="https://t.co/2VZaKVaE4p" target="_blank" rel="noopener">https://t.co/2VZaKVaE4p</a> <a href="https://t.co/vRma67R7zb" target="_blank" rel="noopener">pic.twitter.com/vRma67R7zb</a></p>&mdash; Emil Tholin (@Tholle1234) <a href="https://twitter.com/Tholle1234/status/920423596346019840?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">17 October 2017</a></blockquote><p>También es interesante ver una comparación de la salida obtenida por el loader de webpack de Emil (basado en potrace) y los SVGs dibujados a mano de Mikael.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Comparison of <a href="https://twitter.com/mikaelainalem?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@mikaelainalem</a> &#39;s SVG lazy-loading technique <a href="https://t.co/mbqVpxzn72" target="_blank" rel="noopener">https://t.co/mbqVpxzn72</a> with @Tholle123&#39;s webpack loader <a href="https://t.co/3jxjtNP8dm" target="_blank" rel="noopener">https://t.co/3jxjtNP8dm</a> <a href="https://t.co/tChcPK0mIK" target="_blank" rel="noopener">pic.twitter.com/tChcPK0mIK</a></p>&mdash; Yuriy Nemtsov (@nemtsovy) <a href="https://twitter.com/nemtsovy/status/920647706799955970?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">18 October 2017</a></blockquote><p>Asumo que la salida generada por potrace utiliza las opciones por defecto. Adicionalmente, es posible ajustarlas. Lee <a href="https://github.com/EmilTholin/image-trace-loader#options" target="_blank" rel="noopener">las opciones para image-trace-loader</a>, que son prácticamente <a href="https://www.npmjs.com/package/potrace#parameters" target="_blank" rel="noopener">las que se pasan a potrace</a>.</p><h2 id="Resumen"><a href="#Resumen" class="headerlink" title="Resumen"></a>Resumen</h2><p>Hemos visto diferentes herramientas y técnicas para generar SVGs basados en imágenes bitmap y utilizarlos como placeholders. De la misma forma que <a href="/webp-placeholder-images/">WebP es un formato fantástico para previsualizaciones</a>, SVG es también un formato interesante para aplicar en los placeholders. Podemos controlar el nivel de detalle (y por consiguiente, su tamaño), es altamente comprimible y es fácil de manipular con CSS y JS.</p><h2 id="Recursos-extra"><a href="#Recursos-extra" class="headerlink" title="Recursos extra"></a>Recursos extra</h2><p>Este post llegó a <a href="https://news.ycombinator.com/item?id=15696596" target="_blank" rel="noopener">lo alto de Hacker News, consiguiendo muchos puntos y comentarios</a>. Me siento orgulloso por ello, y por todos los enlaces a otros recursos que han sido compartidos en los comentarios de esa página. Aquí tienes algunos de ellos:</p><ul><li><a href="https://github.com/Tw1ddle/geometrize-haxe" target="_blank" rel="noopener">Geometrize</a> es un port de Primitive escrito en Haxe. También hay <a href="https://github.com/Tw1ddle/geometrize-haxe-web" target="_blank" rel="noopener">una implementación en JavaScript</a> que puedes probar directamente <a href="http://www.samcodes.co.uk/project/geometrize-haxe-web/" target="_blank" rel="noopener">en tu navegador</a>.</li><li><a href="https://github.com/ondras/primitive.js" target="_blank" rel="noopener">Primitive.js</a>, que es un port de Primitive en JavaScript. También, <a href="https://github.com/cielito-lindo-productions/primitive.nextgen" target="_blank" rel="noopener">primitive.nextgen</a>, que es un port de la aplicación de escritorio de Primitive utilizando Primitive.js y Electron.</li><li>Hay un par de cuentas de Twitter donde puedes ver ejemplos de imágenes generadas con Primitive y Geometrize: <a href="https://twitter.com/PrimitivePic" target="_blank" rel="noopener">@PrimitivePic</a> y <a href="https://twitter.com/Geometrizer" target="_blank" rel="noopener">@Geometrizer</a>.</li><li><a href="https://github.com/jankovicsandras/imagetracerjs" target="_blank" rel="noopener">imagetracerjs</a>, que es un tracer de imágenes ráster y vectorizador escrito en JavaScript. También hay ports para <a href="https://github.com/jankovicsandras/imagetracerjava" target="_blank" rel="noopener">Java</a> y <a href="https://github.com/jankovicsandras/imagetracerandroid" target="_blank" rel="noopener">Android</a>.</li></ul><h2 id="Posts-relacionados"><a href="#Posts-relacionados" class="headerlink" title="Posts relacionados"></a>Posts relacionados</h2><p>Si te ha gustado este post, echa un vistazo a estos otros en los que he escrito sobre técnicas para cargar imágenes:</p><ul><li><a href="/medium-image-progressive-loading-placeholder">Cómo Medium carga imágenes de forma progresiva</a></li><li><a href="/webp-placeholder-images">Usando WebP para crear pequeñas previsualizaciones</a></li><li><a href="/more-progressive-image-loading">Más ejemplos de carga de imágenes progresiva</a></li></ul><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>]]></content>
    
    <summary type="html">
    
      Optimización del rendimiento web utilizando carga diferida de imágenes con SVGs como placeholders, representando contornos, formas y siluetas.
    
    </summary>
    
    
      <category term="svg" scheme="https://jmperezperez.com/tags/svg/"/>
    
  </entry>
  
  <entry>
    <title>Duotone using CSS blend modes</title>
    <link href="https://jmperezperez.com/duotone-using-css-blend-modes/"/>
    <id>https://jmperezperez.com/duotone-using-css-blend-modes/</id>
    <published>2017-10-26T04:15:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>In a past post I explained <a href="/duotone-using-fecolormatrix">how to use SVG and a <code>feColorMatrix</code> filter</a> to apply a duotone effect to an image. This time I’m going to show how to achieve a similar effect with only CSS.</p><a id="more"></a><p>Demo &amp; Code: <a href="http://codepen.io/jmperez/pen/wrVxga" target="_blank" rel="noopener">https://codepen.io/jmperez/pen/wrVxga</a></p><iframe id="cp_embed_wrVxga" src="//codepen.io/jmperez/embed/wrVxga?height=367&theme-id=0&slug-hash=wrVxga&default-tab=result" scrolling="no" frameborder="no" height="367" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="100%" style="width: 100%; overflow: hidden"></iframe><p>The code consists of a <code>&lt;div/&gt;</code> that has an image set as a background. Then, we add a <code>::before</code> and an <code>::after</code> pseudo-elements with the colours we want to apply and the right blend modes.</p><p>Previously, my colleague Thodoris described how to achieve this effect <a href="http://blog.72lions.com/blog/2015/7/7/duotone-in-js" target="_blank" rel="noopener">in JS using Canvas</a> and <a href="http://blog.72lions.com/blog/2015/7/18/duotone-in-ios" target="_blank" rel="noopener">in iOS</a>. I also reproduced it using <a href="/duotone-using-fecolormatrix">SVG and a <code>feColorMatrix</code> filter</a>.</p><p>This version is based on the technique described by Una Kravets:</p><p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Duotone images are so <a href="https://twitter.com/hashtag/trendy?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#trendy</a> right now 😎<br><br>Had some airport time so I drew out how to get this effect w/one div in CSS 😊 <a href="https://twitter.com/hashtag/devdoodles?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#devdoodles</a> <a href="https://t.co/WENOWlwcUY" target="_blank" rel="noopener">pic.twitter.com/WENOWlwcUY</a></p>&mdash; Una Kravets 👩🏻‍💻 (@Una) <a href="https://twitter.com/Una/status/923231326420922368?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">25 October 2017</a></blockquote></p><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>which is also what the <a href="http://lukyvj.github.io/colofilter.css/" target="_blank" rel="noopener">colofilter.css</a> library is based on to achieve the duotone effect.</p>]]></content>
    
    <summary type="html">
    
      Using CSS blend modes to apply a duotone effect to an image.
    
    </summary>
    
    
      <category term="svg" scheme="https://jmperezperez.com/tags/svg/"/>
    
  </entry>
  
  <entry>
    <title>Hablando sobre PWA en el podcast WeCodeSign</title>
    <link href="https://jmperezperez.com/wecodesign-pwa/"/>
    <id>https://jmperezperez.com/wecodesign-pwa/</id>
    <published>2017-10-03T16:00:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>Esta semana se ha publicado <a href="http://wecodesignpodcast.com/2017/10/03/progressive-web-apps/" target="_blank" rel="noopener">el podcast sobre Progressive Web Apps</a> que grabé con Ignacio Villanueva y Carmen Ansio para WeCodeSign.</p><a id="more"></a><p>En él hablamos sobre qué son las PWA, cómo se originaron y cómo podemos implementarlas. También compartimos algunos recursos útiles que nos harán más fácil trabajar con Service Workers.</p><p><a href="http://wecodesignpodcast.com/2017/10/03/progressive-web-apps/" target="_blank" rel="noopener"><img src="/assets/images/posts/wecodesign-pwa.jpg" alt="WeCodeSign Progressive Web Apps"></a></p><p><a href="http://wecodesignpodcast.com" target="_blank" rel="noopener">WeCodeSign</a> es uno de los podcasts líderes sobre desarrollo y diseño en español, y ha sido un honor formar parte de él. Podéis escucharlo desde su web, en <a href="https://itunes.apple.com/es/podcast/wecodesign-podcast/id1113501272" target="_blank" rel="noopener">iTunes</a>, <a href="http://www.ivoox.com/escuchar-audios-wecodesign-podcast_al_5101204_1.html" target="_blank" rel="noopener">iVoox</a>, <a href="http://www.spreaker.com/user/8737490" target="_blank" rel="noopener">Spreaker</a> y <a href="https://www.podkas.com/directorio/weckdesign-podcast-de-httpstwitter-comwecodesign/" target="_blank" rel="noopener">Podkas</a>.</p><hr><h2 id="Transcripcion"><a href="#Transcripcion" class="headerlink" title="Transcripción"></a>Transcripción</h2><p><strong>[Ignacio Villanueva] En el programa de hoy hablaremos sobre las Progressive Web Apps ,que es un término que se acuña a una nueva generación de aplicaciones que se basa en las nuevas tecnologías web para incrementar su funcionalidad. Tenemos el placer de contar con José Manuel Pérez, desarrollador web en Spotify.</strong></p><p><strong>Os dejamos con la entrevista, esperamos que la disfrutéis, y como siempre nos vemos al final.</strong></p><p><strong>Una vez más traemos a un invitado nuevo como siempre. Esta vez es un desarrollador que no trabaja en España y nos contará un poco acerca del tema y vamos a hablar sobre Progressive Web Apps.</strong></p><p>Así que bienvenido, José Manuel.</p><p>[José M. Pérez] Hola, muchas gracias. Pues sí, soy un desarrollador web, llevo unos diez años prácticamente haciendo web. Estudié informática en la Universidad de Alicante. Por aquel entonces la web era un desconocido. Como parte del plan de estudios estudiabas cómo hacer aplicaciones WAP. Prácticamente hacer aplicaciones móviles utilizando J2ME era lo único que había y tenías que luchar tú un poquito para encontrar alguna asignatura optativa donde se utilizara web y, bueno, hoy en día la verdad es que la situación ha cambiado bastante. Y nada, me alegro un montón de que la web sea mucho más importante que antes. Llevo cinco años trabajando en Spotify en Estocolmo trabajando haciendo web híbrida para móvil, aplicándolo a la aplicación de móvil aplicando web también a la aplicación híbrida de escritorio, utilizando web para implementar la aplicación para televisión y para PlayStation y últimamente estoy trabajando en el reproductor web. Así que nada, está súperbien porque te das cuenta de que puedes desarrollar utilizando el mismo lenguaje y prácticamente tienes acceso a cualquier plataforma. Esto viene un poco también de cuando solía trabajar en Tuenti en el sitio móvil de Tuenti, también ahí estuve haciendo cosillas para hacer una aplicación híbrida. También se integraban ciertas vistas dentro de la aplicación nativa.</p><p>Y nada, asegurándote de que la web funcionara en Nintendo DS, en PSP (PlayStation Portable), en la Blackberry 8520 que es lo que utilizaba todo el mundo. Y la verdad es que en esos momentos es cuando te das cuenta de que no puedes asumir nada, que un navegador tenga Javascript no significa que vaya a tener la capacidad de funcionar como te esperas, que haya una función declarada no significa que vaya a funcionar luego. Así que aprendí bastante a hacer lo que se llama Progressive Enhancement para asegurarte de que funciona con HTML y CSS y luego ya añadir funcionalidad con Javascript.</p><p>He sido bastante defensor de ese paradigma, aunque últimamente está siendo un poco complicado con todo el desarrollo de Javascript prácticamente basado en el lado de cliente. Esto es un poco lo que he estado haciendo últimamente.</p><p><strong>[I] Bueno, una pasada, porque la verdad es que hasta ahora, por lo menos que nos hayan comentado, no hemos tenido ningún invitado ni ninguna invitada que nos haya hablado sobre desarrollo Javascript para PSPs ni tecnologías un poco más antiguas, en este caso consolas.</strong></p><p>[J] En aquel momento yo trabajaba en Tuenti y la mayoría de usuarios eran jóvenes, se conectaban a Internet con lo que podían, normalmente utilizaban wifi, no tenían una conexión de datos. Se conectaban tarde, por la noche, prácticamente a escondidas de los padres, utilizando la consola o lo que podían tener a mano. De hecho la misma aplicación móvil funcionaba tanto en estas consolas portátiles como en la PlayStation 3 por ejemplo. Era un desafío bastante grande porque además utilizaban Netfront como navegador, no era WebKit, y daban un montón de problemas. Una de las razones por las que me interesó Spotify es porque tenían una plataforma para desarrollar aplicaciones web dentro de la aplicación de escritorio. Hoy en día es una cosa un poco más normal. Los que usamos Slack sabemos que tiene una versión web y otra de escritorio que es prácticamente lo mismo, Whatsapp también tiene una versión web y Telegram lo mismo. Se están viendo más y más ejemplos de aplicaciones que pueden correr tanto en webs como ser empaquetadas para poder instalarlas. En aquel entonces era una cosa bastante novedosa y es algo que me gustaría tratar en el tema de hoy; esta moda de Progressive Web Apps y hablar un poco de lo que teníamos antes y a lo que vienen a sustituir.</p><blockquote><p>PWA es un término de marketing, no se corresponde con ninguna versión nueva del estándar de Javascript. Muchas veces lo comparo con Web 2.0 o HTML5.</p></blockquote><p><strong>[Carmen Ansio] ¿Nos podrías explicar así resumidamente que es una Progressive Web App?</strong></p><p>[J] Pues lo primero que voy a decir es que es un término de marketing, no se corresponde con ninguna versión nueva del estándar de Javascript, ni nada parecido. Muchas veces lo comparo con Web 2.0 o HTML5. HTML5 sí era una versión nueva pero en realidad estamos hablando de todas estas APIs nuevas para poder desarrollar aplicaciones web o sitios web para los que les vamos a ir añadiendo alguna una funcionalidad.</p><p>El término Progressive Web App lo acuñó Alex Russell y Frances Berriman que eran 2 desarrolladores de Google. Hace un par de años escribieron <a href="https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/" target="_blank" rel="noopener">un post</a> y describían el término como websites que son responsive, que se parecen a aplicaciones nativas, que se puede instalar en la pantalla de inicio y que en algunos casos soportan modo offline. Es bastante interesante porque Alex estuvo hace poco explicando, <a href="https://twitter.com/slightlylate/status/879458731519389697" target="_blank" rel="noopener">en una serie de tweets</a>, cómo surgió el tema y el término PWA.</p><p>Hay mucha gente a la que no le gusta lo de Progressive Web Apps y no entiende por qué es “app” y no es “site”. En cuanto lees sobre el tema básicamente te dicen que PWA no es un término ara los desarrolladores, sino para para tu jefe. Es un término para el inversor, para el que va a hacer campaña de marketing de tu sitio. Es una forma de continuar construyendo proyectos en la web de forma abierta, que parezcan una aplicación y que normalmente tu compañía quiere hacer como aplicación nativa y no como web. Y la quieren hacer tres veces: una vez para Android, otra para iOS y otra, si pueden para Windows Phone. Al final es otra forma de decir que tenemos una serie de APIs, vamos a llamarla de alguna forma y con eso a ver si la gente se siente atraída y lo identifica como algo cool, algo novedoso, y que valga la pena verlo.</p><p>Esto lo escribieron ellos cuando estaban evaluando si tenían que tender hacia desarrollar aplicaciones para Chrome utilizando su sistema propietario, o tenían que ir más hacia un sistema más abierto, que es lo que defendían Alex y Francis. Se sentaron y estuvieron hablando sobre cómo unificar en un término esa funcionalidad de añadir a la pantalla de inicio, ServiceWorkers, notificaciones push y demás,</p><p>Cuando los desarrolladores escuchamos Progressive Web App tenemos que parar por un momento y pensar qué quiere decir, qué hay detrás. Google está promoviendo PWA y lo hace como una marca. Nosotros tenemos que verlo como un conjunto de herramientas que tenemos que tomar y aplicar a nuestras webs si así lo queremos. Muchas compañías que estaban centradas en desarrollar aplicaciones nativas ahora ven la web como una alternativa válida.</p><blockquote><p>Hay mucha gente nueva en Internet en muchos países emergentes que no quiere descargar. Las tarifas de datos son carísimas y quieren consumir contenido directamente, sin pasar por el proceso de instalación.</p></blockquote><p><strong>[I] Sí porque además hace tiempo que se demuestra que muchos usuarios se instalan cinco aplicaciones en el móvil y el resto no las abren nunca más. Son las típicas de mensajería instantánea, de redes sociales y las 2 extra de turno que se usen por el motivo que sea. Hay gente que obviamente sí usa más aplicaciones, los que estamos más en la web porque somos desarrolladores o más frikis, como queramos llamarlo. Supongo que depende un poco de cada perfil. Pero no hay que olvidar que la inmensa mayoría no somos nosotros que es todo el resto de personas que usan muy muy muy muy poquitas cosas.</strong></p><p>[J] Hasta ahora, para las empresas el objetivo era estar en las tiendas de aplicaciones y ésta era la única forma de obtener visibilidad. Si no estaban ahí el usuario no iba a poder descubrir la aplicación. Hubo un boom de aplicaciones que prácticamente no servían para nada. Para usar una aplicación tengo que pasar por todo el proceso de encontrar la aplicación, descargarla e instalarla, ocupando un espacio en el teléfono. En occidente, que hemos crecido con smartphones y tenemos buenas tarifas de datos, tenemos todavía la costumbre de estas aplicaciones. Pero hay mucha gente nueva en Internet en muchos países emergentes que no quiere descargar. Las tarifas de datos son carísimas y quieren consumir contenido directamente, sin pasar por el proceso de instalación.</p><p>Es curioso porque yo trabajo en Spotify y siempre tenemos este dilema de si debemos promocionar las aplicaciones nativas (por ejemplo descargar la aplicación de escritorio) y qué casos de uso cubre un reproductor web. ¿Puede reemplazar un reproductor web a la aplicación de escritorio? Este tipo de conversaciones las tenemos casi todos los días. Hay un montón de empresas que están viendo que tienen que ir hacia web si quieren estar donde va a estar el próximo billón (mil millones) de usuarios. Lo vemos con Twitter y Uber, que hace poco lanzó su mobile site, y con muchos otros. Habitualmente son compañías de India y de China las que más están empujando por este tipo de desarrollos.</p><p>Creo que es un buen momento para explicar que hay detrás de las PWAs y qué engloban.</p><p><strong>[I] Perfecto, cuéntanos un poco porque obviamente ya hemos dicho que no son tecnologías completamente nuevas. Es un Progressive Enhancement, que se venía haciendo desde hace ya mucho tiempo. Los que desarrollamos para web debemos tener en cuenta tecnologías más antiguas y dispositivos más antiguos para que tengan una mínima experiencia. Luego vamos sumando funcionalidades para llegar a dar a nuestros usuarios lo que creemos que es mejor para ellos, o lo que creemos que ayuda al negocio en este caso.</strong></p><p>[J] Yo creo que al final eso es lo que tenemos que hacer. Nos tenemos que centrar en qué quiere el usuario y ver cuál es la solución técnica. Muchas veces cuando aparece este tipo de tecnologías todo el mundo quiere utilizarlas. Intentan un proyecto en el que aplicarlas, cuando en realidad debería ser al contrario.</p><p>Cuando hablamos de PWAs lo hacemos principalmente de ServiceWorkers. A veces también de añadir un manifest.json y notificaciones push. ServiceWorker es un fichero Javascript que el navegador se va a descargar una vez cargada la página y es capaz de interceptar peticiones. Cualquier petición que se haga a tu dominio va a ser capturada por este ServiceWorker. Ahí ya puedes hacer lo que quieras: puedes devolver tu respuesta personalizada, puedes acceder a una caché si quiere devolver datos cacheados, etc. En resumen, es un proxy, un fichero Javascript que se pone en medio. Hay un montón de “recetas” (cookbook). Si buscáis en google encontraréis muchas cosas que puedes con ServiceWorkers.</p><p>Por ejemplo vas a tu página web o blog y quieres poder volver a ver el contenido cuando no haya conexión a internet. En este caso puedes tener un ServiceWorker que se descarga el contenido para tenerlo accesible offline. Otro ejemplo es hacer una petición para obtener una imagen y que el ServiceWorker se encargue de devolver el formato que soporta el navegador, como por ejemplo webp.</p><p>La principal característica es offline, que no la teníamos bien implementada hasta ahora. Sí que existía una tecnología llamada Application Cache que prácticamente nadie utilizaba porque era muy difícil de implementar, y que está soportada todavía en iOS. Cuando hablamos de soporte para estas APIs siempre iOS y Safari quedan un poco fuera. Ésta es la tecnología que ServiceWorker intenta reemplazar.</p><blockquote><p>Debemos hacer un uso justo y limpio de estas tecnologías o si no va a resultar en problemas y habrá que establecer límites, lo que no es bueno para nadie.</p></blockquote><p><strong>[I] De hecho ahora mismo es el único navegador moderno que no tiene ServiceWorker integrado, frente a Chrome, Firefox, Opera o Samsung Web Browser.</strong></p><p>[J] Para ser correcto, en Edge están trabajando en implementarlo y Safari ha anunciado que hay cierto interés en implementarlo en su plan de aquí a 5 años, así que con suerte llegará. También podemos hablar de la práctica empresarial de Google promoviendo PWAs frente a Apple, que no lo hace. Podemos ver que hay quizás ciertos intereses detrás de estas decisiones.</p><p>Algo que también permiten los ServiceWorkers es la sincronización background, de tal forma que no necesitas ni siquiera tener la pestaña abierta de tu página para poder acceder al contenido. Si despliegas una nueva versión de tu web puedes comprobar en un ServiceWorker instalado si hay una nueva versión y descargarte los assets. Así, una nueva petición del usuario a tu web puede usar directamente esos nuevos assets, cargando más rápido.</p><p>Un problema es que con el poder de un ServiceWorker viene también una gran responsabilidad. Mucha gente ve el hecho de hacer que una página funcione offline con una excusa para poder descargar toda la web por si acaso el usuario quiera acceder a una de las páginas. Es algo que a mí personalmente no me gusta. Por ejemplo si accedo a tu blog quizás esté interesado en ver esa página offline pero no me gustaría que utilizaras mi conexión a internet para descargar todo el contenido y todas las imágenes de tu blog para hacerlo disponible offline. Hay un conjunto de buenas prácticas como por ejemplo mostrar un botón para que el usuario pueda hacer cierto contenido offline. Debemos ser cuidadosos en este aspecto. Cuando instalas una aplicación en iOS o en Android ves cuántos MBs te estás descargando, al menos para la instalación inicial. Cuando accedes a una página web tú no lo sabes, Debemos hacer un uso justo y limpio de estas tecnologías o si no va a resultar en problemas y habrá que establecer límites, lo que no es bueno para nadie.</p><p><strong>[C] ¿Hay otros mecanismos de almacenamiento?</strong></p><p>[J] Cuando interceptas estas peticiones almacenas los datos en una caché y hay una forma de hacer que el contenido se almacene de forma temporal o persistente. El navegador considera que todo lo que descargas lo puede eliminar si lo necesita, pero hay una cierta cantidad de datos para los que puedes decir que por favor lo mantenga. Esto se calcula como un porcentaje del total de espacio disponible, teniendo en cuenta también cookies y localStorage. Antes había por ejemplo un límite de 5MB en localStorage. Ahora el navegador dedica un porcentaje del espacio de disponible en disco duro para almacenar datos. Así que en principio no hay límite, y ése es el problema. Desde una web puedes hacer una descarga grande hasta que el navegador se quede sin espacio y lance una excepción.</p><p>A la hora de implementar ServiceWorkers se puede hacer o bien a mano o utilizando una librería. Google tiene un par de librerías buenas que para incluir en proyectos: una se llama <a href="https://github.com/GoogleChromeLabs/sw-toolbox" target="_blank" rel="noopener">sw-toolbox</a> y la otra <a href="https://github.com/GoogleChromeLabs/sw-precache" target="_blank" rel="noopener">sw-precache</a>. Hay 3 páginas que me gustan bastante sobre ServiceWorkers. Una es una página de ejemplos que hay en googlechrome/samples y Jake Archibald, que trabaja en Google, tiene también un <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/" target="_blank" rel="noopener">documento muy bueno que se llama The Offline Cookbook</a>, y por último Mozilla tiene en <a href="https://serviceworke.rs/" target="_blank" rel="noopener">serviceworke.rs</a> una lista de diferentes estrategias a la hora de implementar ServiceWorkers.</p><p><strong>[I] Pues luego las anotamos y las dejamos en el programa. Algo que has mencionado son las Push Notifications, que no sé si van directamente ligadas con el hecho de usar una PWA, pero que es algo que va de la mano. Por ejemplo utilizando websockets, obtener información en directo y que vas recopilando en función de cuándo la envías desde un servidor y el usuario va recibiendo ese feedback.</strong></p><p>[J] Todo esto se basa en ServiceWorkers porque al final necesitas tener algo corriendo. Si tu página no está en primer plano tienes que tener un ServiceWorker que es lo que se va a quedar ejecutándose cuando el usuario cierra esa ventana o esa pestaña. Las notificaciones push son la misma notificación push que se ve normalmente en una aplicación. Va por otra vía pero al final la parte visual es exactamente igual.</p><p>Las notificaciones push eran una de las razones principales por las que las empresas querían hacer aplicación nativa. Una de las razones era el descubrir esa aplicación, para lo cual necesitabas hacer una aplicación nativa y ponerla en la tienda, la segunda era poder tener notificaciones push. Es útil para que el usuario vuelva a tu aplicación y no es suficiente con que el usuario instale la aplicación. Prácticamente hoy tenemos acceso a todo lo que tiene acceso una aplicación nativa.</p><p><strong>[I] Hay ciertas APIs que de momento funcionan ahí ahí. Hablamos con tecnologías web sin tener algo de por medio como pueda ser PhoneGap o Ionic. Nosotros desarrollamos una plataforma con WebRTC y tuvimos un montón de problemas para implementarlo porque obviamente no está soportado en varios navegadores. Hasta Edge 14 ó 15 no funcionaba. Obviamente Internet Explorer tampoco. Safari no funcionaba hasta hace muy poquito o han dicho que lo van a implementar en la siguiente versión del sistema operativo y obviamente funcionaba en Chrome. Aunque Chrome es una gran mayoría en uso a nivel mundial no hay que olvidar que hay muchos otros usuarios que no usan Chrome.</strong></p><p>[J] Sí, y luego todos aquellos que usen iPhone están fuera de momento de las PWAs. No es posible añadir una web a la pantalla de inicio y abrirlo a pantalla completa. Como decía, es un tema de marketing. PWA no deja de ser una web de toda la vida a la que le hemos añadido una funcionalidad extra para ponerlo en la pantalla de inicio y que no se abra el navegador, y soporte offline.</p><blockquote><p>ServiceWorker es un progressive enhancement, no puedes suponer que va a estar ahí.</p></blockquote><p><strong>[C] Hablando de ese soporte offline y de ServiceWorkers, he leído el término “offline first”. ¿Nos podías comentar un poco cómo funciona?</strong></p><p>[J] Es gracioso porque estaba escuchando <a href="http://wecodesignpodcast.com/2017/07/04/mobile-first/" target="_blank" rel="noopener">el podcast que hicisteis con Diana sobre Mobile First</a>. A veces nos hablan de offline first, a veces nos hablan de mobile first y a veces de content first cuando se habla sobre response design. Al final como desarrollador dices ¿qué tengo que hacer?</p><p>La idea de offline first está muy bien, no dar nada por hecho, que tu web pueda funcionar sin conexión a internet. Pero a la hora de implementarlo viene la parte difícil porque al introducir ServiceWorkers normalmente introduces el cacheo de fichero Javascript y también un sistema de templates. Para esto funciona muy bien utilizar librerías como Preact o Vue, donde tienes los templates y tienes el JS y no tienes nada server-side. Esto es muy fácil de cachear. También offline se podía conseguir hasta ahora utilizando unas buenas cabeceras de respuesta. Muchas veces no hace falta utilizar ServiceWorkers si quieres que tu página siga funcionando o que no repitas una request. Es cuestión de decirle al navegador que cachee el contenido durante más tiempo. Cuando hablan de offline first se entiende que no hay que asumir cuáles son las condiciones de la red. Supón que no hay red, ¿cómo va a comportarse tu página?</p><p>Uno de las características de ServiceWorkers es que la primera vez que visitas una página, ésta no se va a renderizar utilizando ServiceWorkers. El SW se añade después, lo descarga el navegador y sólo funciona para las siguientes peticiones. Es un progressive enhancement, no puedes suponer que el Service Worker va a estar ahí. Para que tu contenido sea offline primero tienes que visitar la web y tienes que poder cargar este ServiceWorker, que descargará el contenido. Me gusta offline first, igual que se suele pensar sobre qué pasaría si no se pudiera descargar o ejecutar Javascript, en cuyo caso habría que hacer, por ejemplo, Server Side Rendering. O ¿qué pasaría si el usuario tiene problemas de accesibilidad, qué va a ocurrir con el contenido, va a ser leído por lectores de accesibilidad? Todo esto al final va sumando y tenemos que pensar en una experiencia buena para que luego le añadamos funcionalidad. Y offline first no deja de ser otra más. Cuesta mucho decidir qué va primero ¿contenido, mobile, offline? Son metodologías diferentes. Como desarrolladores a veces estamos cansados, hay un poco de fatiga con todo lo que sale nuevo y hay que leerlo e intentar decir “vale, esto lo sitúo aquí y forma parte de mis herramientas para en algún momento determinado poder aplicarlas”.</p><p><strong>[I] Hay una página web de una desarrolladora que se llama [inaudible] que tiene un botoncito para hacer offline un post determinado, como decías tú al principio “quiero que este post en concreto, que me interesa escuchar a lo mejor cuando no tenga conexión”, pues lo guarda y te cachea las imágenes y todo lo que tiene ese post. Ella graba con voz cada uno de los artículos que escribe y deja que los escuches de forma offline si quieres. Creo que es una manera muy buena para dejar que el usuario decida si quiere descargar ese episodio o en este caso un artículo y que lo pueda leer cuando va en el metro sin conexión. No nos olvidemos que aunque vivimos en grandes ciudades en muchísimas ocasiones tenemos eso que llaman Lo-Fi. No tienes conexión suficiente porque estás dentro de un túnel y durante un período de tiempo determinado tienes una conexión realmente mala o directamente ninguna.</strong></p><p>[J] Sí, también lo llaman Lie-Fi, como que es un poco de mentira. Te dice que tiene wi-fi pero intenta descargar cosas por la wi-fi y no acaba de traerse nada. Yo creo que ése es un buen caso de uso. Jake Archibald, que es uno de los ingenieros de Google que ha estado dando presentaciones sobre esto, tiene una PWA para ver artículos de Wikipedia. Y tiene un botón para descargar un artículo y poder leerlo luego. Creo que esa funcionalidad es muy buena. Yo tengo un blog y no uso JS para nada, excepto para un SW. Y si te quedas sin conexión puedes leer el post que estabas leyendo más un par de enlaces más que todo que tengo arriba en el menú. Y ya está, no necesitas nada más. Está muy bien darle al usuario la posibilidad de que si quieren puedan descargar el contenido online. Me parece súper bien y creo que ése es el tipo de casos de uso que tenemos que intentar cubrir, y no intentar usarlo para todo sólo porque es nuevo.</p><blockquote><p>Mucha gente cree que esto de las PWA es sólo para sitios web grandes o de empresas importantes. En realidad puedes añadir un SW y manifest a cualquier web.</p></blockquote><p><strong>[I] Antes has hablado del Manifest. Aunque ya sabemos que es un JSON y que da ciertas funcionalidades como decir “bájate este archivo, baja este otro”. ¿Para qué otras cosas se puede utilizar el Manifest?</strong></p><p>[J] Yo creo que estaban un poco hartos de añadir cabeceras “meta” dentro dentro de las páginas y decidieron crear un fichero donde definir un JSON con un montón de información que queremos tener para esta integración. En Google lo llaman A2HS (Add to Home Screen) y es lo que va a utilizar el sistema operativo móvil para poder abrir la aplicación. Tú le dices con qué orientación quieres abrirla y qué iconos quieres utilizar. Cuando implementas una PWA puedes comprobar dentro de tu código si está corriendo en modo aplicación (lanzada desde la pantalla de inicio) o si está corriendo dentro del navegador, utilizando display-mode. Si es standalone significa que está instalada y corriendo desde la pantalla de inicio. Está bien para analytics, para saber cuánta gente ha instalado la aplicación y la está utilizando así. También puedes utilizarlo para media-queries, para poder cambiar ligeramente en el estilo de la página dependiendo de si lo has lanzado desde la pantalla de inicio o no. Uno de los casos de uso sería mostrar botones de navegación cuando lo lanzas en fullscreen.</p><p>Mucha gente cree que esto de las PWA es sólo para sitios web grandes o de empresas importantes. En realidad puedes añadir un SW y manifest a cualquier web. Hay directorios de PWAs (por ejemplo <a href="https://pwa-directory.appspot.com/" target="_blank" rel="noopener">PWA Directory</a> o <a href="https://pwa.rocks" target="_blank" rel="noopener">PWA Rocks</a>) a poder descubrir dentro de Bing PWAs y te va a ofrecer la posibilidad de instalarlas. Es una especie de store pero en lugar de tú publicar ahí, Microsoft va a utilizar el mismo crawler que usan para Bing y va a poder mostrar ahí directamente la web.</p><p>No creo que las PWAs estén restringidas a webs grandes y pienso que todo el mundo debería probarlas. Los desarrolladores deberíamos hacer pruebas con nuestras webs. Cuando empecé a utilizar ServiceWorkers me di cabezazos contra el ordenador porque las herramientas de desarrollo no estaban muy desarrolladas, valga la redundancia. Cuando hacía una petición no sabía si la respuesta estaba viniendo del ServiceWorker o de verdad estaba sirviendo el fichero del servidor. Teníasque buscar por ahí un menú había muy oculto para activar la opción de que todas las peticiones dentro de localhost fueran directamente al fichero y que no se cacheen. Esto ha mejorado muchísimo.</p><p>Tenemos muchas estrategias sobre cómo hacer versionado de cachés. Cuando almacenas en ServiceWorker estás almacenando en la memoria del navegador. Si haces cambios en tu web y lanzas una nueva versión y versionas de la misma forma que versionas otros scripts, deberías ser un buen ciudadano, acceder a la versión previa que tenías cacheada y eliminarla del navegador. Si no al final vas a acumular un montón de bundles de Javascript o templates que ya no se necesitan.</p><p>Sé que hay alguna pregunta sobre utilizar PWAs con React, Vue y otras librerías. Si habéis utilizado alguna vez Create React App, que es una especie de boilerplate para crear aplicaciones React, también existe la posibilidad de utilizar estas mismas herramientas para crear PWAs. Create React App va a crear directamente por defecto una PWAs y, si utilizáis Preact, lanzaron su CLI para crearlas con Preact, y Vue también tiene su CLI con el que se generan PWAs por defecto.</p><p><strong>[C] Como has comentado antes, Apple no tiene soporte para para PWAs. ¿Ves un poco de guerra entre Google y Apple?</strong></p><p>[J] A veces parece que sí, al igual que Internet Explorer no implementaba nada nuevo en su navegador y entonces salió Firefox que implementaba todo. Mucha gente se pasó a Firefox y posteriormente a Chrome. Siempre existe esta guerra de navegadores y de las empresas que hay detrás. Me gusta mucho Google, que está empujando por estos estándares. Si desarrollamos PWAs el usuario no necesitará ir a la Store a descargarse nada, y ahora mismo tanto puede Google com oApple se llevan un porcentaje cuando descargas aplicaciones de pago y también de los pagos in-app. Al principio Apple sólo ofrecía herramientas web para desarrollar “aplicaciones” para iPhone, no existía nada para hacer una aplicación nativa. Todo giraba en torno a crear webs que tuviera el mismo look&amp;feel. Luego descubrieron que ahí es donde estaba el negocio cuando empezaron a proporcionar estas herramientas para desarrollar aplicaciones nativas. Es difícil que vayas a ir en contra de tu principal fuente de ingresos. Google parece que tienen los ingresos más diversificados. Al confiar en una plataforma de anuncios Google se va a llevar dinero por anuncio, que también se muestran en la web (eg PWA).</p><p>Hay mucho trabajo para estandarizar estas APIs, implementarlas de una forma buena idea y de releasearlas. Pero estoy seguro de que también hay decisiones de negocio. Google se ha posicionado claramente hacia promover esta serie de APIs, hacen workshops en varios sitios del mundo explicando cómo usarlas, muestran cómo diferentes webs están implementando esta funcionalidad (qué problemas tenían de rendimiento, cómo han añadido PWAs y han ido mejorando, cuáles son las métricas que se ha movido como mayor retención de usuarios o más páginas vistas). Trabajan codo con codo con empresas grandes como Flipkart - el “Amazon” de India - o ele.me, que es una empresa muy grande de China de venta de comida online.</p><p>Apple va un poco por su cuenta. Es verdad que Safari está cambiando, implementando mucha funcionalidad que faltaba, pero da la sensación de que son reacios a implementar PWAs. Para entender mejor las razones pienso que es útil pensar cómo puede afectar a las fuentes de ingresos que los desarrolladores migren a web. Las empresas tienen un número limitado de trabajadores y muchas cosas que quieren hacer. Tienen que priorizar unas frente a otras y por lo que sea no están priorizando los ServiceWorkers y toda la funcionalidad para añadir webs a pantalla de inicio para ejecutarlas de forma standalone.</p><p><strong>[I] Yo creo que en este caso Apple a lo mejor no tiene publicidad directa como hace Google, y le da un poco más igual. Como tiene tantísimos beneficios a través de la App Store perder ese mercado, que es inmenso, es un peligro obviamente para ellos. Ahora mismo los que últimamente llegan tarde son Edge y Safari (Edge está mejorando un montón pero aún quedan algunas cosillas) y, en mi opinión, está claro por qué no lo están implementando. Con la salida de Technology Preview, que es la versión de desarrollador, sí está cambiando, pero le queda mucho para que, como pasa con Firefox y Chrome, se actualicen de forma constante.</strong></p><p>[J] También está la restricción de que no puedes correr ningún navegador con otro motor. Así que aunque tú instales Chrome o Firefox en iPhone estás corriendo Webkit por detrás, el motor de Safari. Puedes personalizar la experiencia alrededor del navegador pero no implementar PWAs. Eso es una decisión de negocio, y ahí no hay ninguna excusa. No puedes decir “queremos hacer el entorno más seguro”. Podrían utilizar el proceso de envío y revisión de aplicaciones y que tú pudieras ofrecer un motor de renderizado diferente. Es su ecosistema y controlan lo que ofrecen a los usuarios. El target de usuarios es diferente. Por ejemplo, en India o China el mercado de iOS es bastante más pequeño que en otros países de nuestro alrededor. Cada empresa juega sus cartas.</p><p>Como desarrolladores lo tenemos que ver como una funcionalidad añadida. Si lo soporta el navegador podemos utilizarlo y si no lo soporta, como hemos hecho bien nuestro trabajo, va a dar lo mismo porque el usuario va a poder disfrutar de nuestra web. Son APIs para mejorar nuestra web pero nunca tenemos que asumir que están ahí. Y lo bueno de ServiceWorker es que no se puede asumir su soporte, dado que la primera vez que carga la página no se puede utilizar.</p><p><strong>[I] Si te parece pasamos las preguntas que nos han dejado por Twitter. Pregunta Manuel si has tocado Vue para las PWAs o si sabes algún recurso sobre ServiceWorkers y notificaciones push en castellano.</strong></p><p>[J] No he usado Vue todavía. He estado leyendo sobre Vue pero me he enfocado más en React, que lo estoy utilizando en un proyecto grande, y probando Preact e Inferno por cuestiones de tamaño. Afortunadamente no necesitamos utilizar ninguna de estas librerías para crear PWAs. Como dije, mi blog sólo utiliza Javascript para crear un ServiceWorker y tener contenido offline. Las PWAs no requieren frameworks ni librerías específicos. Ni siquiera tienen que ser una SPA.</p><p>Recomiendo utilizar Vue CLI para crear PWAs con Vue. Habrán tomado algunas decisiones por ti, abstrayéndote para bien o para mal de los detalles de implementación, pero te servirá para crear un esqueleto para una aplicación.</p><p>Sobre recursos en español hay una web que se llama “<a href="https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/" target="_blank" rel="noopener">Tu primera Progressive Web App</a>” y la escribió Pete LePage, que es un desarrollador de Google. Es una traducción al español de la documentación oficial. Es un muy buen recurso y es más detallado que otros artículos que se pueden encuentran en español en Internet.</p><p><strong>[I] Fernando nos pregunta cómo encajan con las PWAs Que, React y Angular.</strong></p><p>[J] Recomiendo que cada uno escoja el framework/librería con la que se sientan más a gusto. Todas estas soluciones son similares y se pueden crear PWAs con ellas.</p><p><strong>[I] Fernando nos deja una segunda pregunta. Quiere saber si se adaptan los servicios workers correctamente a las aplicaciones híbridas Ionic o PhoneGap.</strong></p><p>[J] Es una buena pregunta. Es difícil saber dónde está la frontera entre entrar desarrollando una web que luego va a correr en una WebView, como en el caso de PhoneGap o Ionic. También hay alternativas nativas como ReactNative o NativeScript. Si estás desarrollando en iOS no vas a tener soporte para ServiceWorker independientemente de si es el navegador o si es una WebView porque no deja de ser el mismo navegador; no vas a tener soporte.</p><p>En el caso de Android no estoy seguro de cómo funcionan los ServiceWorkers dentro de las WebViews. Por ejemplo, quizás se cachea, quizás se mantiene en memoria sólo para esa WebView específica. No he llegado a trabajar con PWAs dentro de una aplicación híbrida.</p><p><strong>[C] Vamos a pasar a la tanda de preguntas que hemos. Manuel pregunta si puedes recomendar algún libro que hable sobre PWAs.</strong></p><p>[J] Hasta ahora no conocía ningún libro sobre PWAs y me he puesto a buscar. Casualmente acaba de salir un libro que está en Early Release y se llama “<a href="http://shop.oreilly.com/product/0636920052067.do" target="_blank" rel="noopener">Building Progressive Web Apps: Bringing the Power of Native to the Browser</a>” de O’Reilly. El autor creó también una librería que utilicé para un proyecto llamada “annyang” para hacer reconocimiento de voz.</p><p>Es más habitual encontrar información sobre PWAs en posts (sobre todo los de Developer Relations de Google) y más tarde llegan a libros.</p><p><strong>[C] A Manuel le gustaría saber en qué orden se comienza a desarrollar este tipo de aplicaciones.</strong></p><p>[J] Primero haz una web bien y luego mejórala. Considera PWA como un añadido. No intentes utilizar PWAs desde el principio o como una forma de solucionar problemas. Por ejemplo, si tienes problemas de performance no es buena idea que intentes solucionarlos con PWAs diciendo “sí, esto cacheo con un ServiceWorker y ya está”. Hay otras cosas que vas a tener que mirar antes.</p><p>Busca otras soluciones como por ejemplo hacer split del bundle: en lugar de mandar 1MB manda 200kB y luego carga el resto de forma asíncrona. No veas PWAs como el martillo y cualquier problema como un clavo.</p><p><strong>[C] David nos hace la última pregunta. Está interesado en saber que si el cliente sigue requiriendo una alternativa en forma de aplicación para tenerla en las stores, ¿qué tecnología utilizarías? ¿Cordova con React? ¿React Native?</strong></p><p>Es un problema porque aunque tengas una PWA es probable que te digan que la quieren ver en la tienda. Hay dos alternativas. Puedes implementar una aplicación híbrida con Cordova o Ionic 2, que utiliza Angular, y la empaquetas dentro de un navegador. También puedes utilizar lo último de lo último y utilizar React Native. En este caso tienes que reescribir la vista porque los componentes van a ser diferentes. Lo bueno es que, si la has estructurado bien, puedes reutilizar toda la parte de negocio (por ejemplo Redux). Esta opción es buena si quieres tener una aplicación con un muy buen rendimiento. También existe NativeScript, que se puede utilizar con Preact.</p><p>Independientemente de la solución trata de desacoplar el código. Intenta tener claro qué parte pertenece a la vista y cuál es lógica de negocio. Mueve código estable a una API, de forma que dé igual cuál sea la interfaz que consume los datos. Esto te permite hacer cambios tanto en la API (por ejemplo reescribiéndola en otro lenguaje) como el front (por ejemplo, crear un nuevo cliente para otra plataforma o utilizar una librería diferente).</p><p>Lo que usas hoy se va a quedar “anticuado” en un par de años, así que siempre intenta modularizar el código y optimiza para el mantenimiento y migración del código más que esforzarse en acoplar tu proyecto demasiado con un framework.</p><p><strong>[I] Si te parece con esto cerramos las preguntas de Twitter y pasamos a la más difícil. Dinos cómo ves la web dentro de 5 ó 10 años.</strong></p><p>[J] Pues es una pregunta difícil. Pienso en el desarrollo de los móviles y es impensable lo que hacíamos hace cinco años comparado con lo que hacemos ahora. Hace poco estuve en una charla donde un ponente dijo que somos la última generación que sabrá lo que es un navegador y creo que el futuro de la web es olvidarse del concepto “navegador”, o por lo menos como la única forma de consumir contenidos en la web.</p><p>La web se integra ahora mismo en móviles utilizando PWAs, pero también como una Webview en una aplicación nativa. Tenemos Chrome OS como el mejor ejemplo de cómo ejecutar sitios web que funcionan como aplicaciones. Y tenemos también ejemplos como AMP de Google donde generas contenido que luego va a estar directamente embebido dentro del buscador, o Instant Articles para integrar contenido en Facebook, y Apple News.</p><p>En mi trabajo me doy cuenta de que muchas veces la web se utiliza como un gran backend. Por ejemplo, Google indexa el contenido de Spotify y utilizando la web en la que trabajo (open.spotify.com), extrayendo metadatos para su buscador, que se muestran en un lateral al buscar artistas. También se utiliza para Google Home o Alexa de Amazon para su integración con web. Y de forma similar, cuando compartes en Facebook o Twitter, sus bots utilizan metadatos extraídos de la página para mostrar una previsualización.</p><p>Tenemos que dejar de pensar que hacemos webs que sólo van a ser consumidas a través de un navegador. Creamos contenido utilizando herramientas web pero no tenemos ningún control sobre dónde se van a visualizar. Un ejemplo es WebVR, donde es difícil controlar el entorno, y no existe el concepto de “página”.</p><p>Tenemos que mirar más allá, pensar en nuevas interfaces y cuál va a ser el papel de la web ahí y olvidarse de controlar en entorno. Cuando llegaron los móviles con navegador fue un desafío crear webs. ¿Un sitio aparte? ¿Responsive? Este problema es fácil comparado con lo que viene ahora.</p><p><strong>[C] ¡Sí que está difícil saber lo que vendrá! Si te parece entramos en las ráfagas, y aquí va la primera. Dinos alguien que te haya inspirado.</strong></p><p>Me gustaría mencionar gente con la que he trabajado y me ha inspirado. Me gustó mucho trabajar en Tuenti con Alberto Grajera (@manquismo) que ahora está en Cabify, Davide Mendolia (@davideme) que está en Karumi, y Felipe Ribeiro (@felipernb) con quien trabajo en Spotify. Son desarrolladores que solían hacer web, aunque algunos hacen ahora móvil, y te recuerdan qué es lo importante cuando estás trabajando. La toma de requisitos, evaluar el problema con una mente ingenieril y no dejarse llevar por modas (por ejemplo últimas librerías). A todos nos gusta utilizar lo último pero tenemos que anteponer el hecho de que hay un usuario detrás, que necesita ese proyecto a tiempo y que funcione bien. Hay una empresa que te está pagando por hacer el trabajo, y va a haber un compañero que va a entrar a tu equipo y tiene que heredar o trabajar contigo en ese código. Estas 3 personas me han ayudado mucho a centrarme en lo que de verdad es importante.</p><p>Hay gente conocida del mundo web que me gusta seguir, y que me han inspirado de una forma diferente. Steve Souders fue quien hizo reverse engineering de cómo el navegador hacía peticiones y gestionaba las dependencias entre ellas. Fue quien puso las bases de lo que hoy se conoce como WPO (Optimización de rendimiento web).</p><p>Nicholas C. Zakas, que trabaja en Yahoo, hablaba sobre patrones para escribir Javascript mantenible. Stoyan Stefanov, que trabaja en Facebook, es otro track de Javascript. Algunos más “recientes” son Addy Osmani, que es un devrel de Google que da muchas charlas muy entretenidas. Y por último Dan Abramos, que quien haya trabajado con Redux sabrá que es quien responde cualquier pregunta sobre el tema, y trabaja en Facebook.</p><p><strong>[I] Los dejamos todos anotados para que la gente conozca a gente nueva, aprenda cosas nuevas y amplíe sus horizontes. Recomiéndanos ahora un recurso, una página web o un blog que consideres imprescindible.</strong></p><p>No podía elegir sólo uno, así que he escogido varios. Me gustan mucho las newsletter y estoy suscrito a Frontend Focus y Javascript Weekly, que comparten muchos enlaces a posts y vídeos de conferencias.</p><p>Me gusta mucho ver vídeos de charlas, como por ejemplo los de las JSConf. Esta conferencia es de las principales en JS, las entradas son caras, pero publican todos los vídeos en Youtube, así que es un buen recurso para ponerse al día. Google IO, el evento anual de Google, publican muchos vídeos de sus charlas. Hace un par de meses fue la edición de 2017 y ya están subidos.</p><p>Hay un par de webs que visito bastante: CSSTricks y Smashing Magazine, que hablan sobre frontend en general.</p><p>Un buen libro es “High Performance Browser Networking” de Ilya Grigorik, que es un ingeniero De Google. Te explica todo el stack, qué ocurre cuando se hace una petición y todos los puntos en los que podemos trabajar para mejorar el rendimiento de una web.</p><p><strong>[I] Perfecto. Igualmente lo dejamos apuntado para que la gente los pueda ver.</strong></p><p><strong>[C] Recomiéndanos ahora a un invitado o invitada a quien te gustaría que invitásemos al programa.</strong></p><p>[J] Jaume Sanchez Elias (@thespite en Twitter) es un chico que hace WebGL, WebVR y cosas muy chulas. Hace poco coincidí con él en una charla y me encantó conocerlo. Es muy enriquecedor cuando conoces a gente puntera que es capaz de inspirar tanto a los desarrolladores web. Es impresionante lo que puede conseguir con estas herramientas. Jaume hace que parezca fácil, pero en realidad hay mucho trabajo detrás. Me gustaría escuchar a Jaume hablar de estos temas.</p><p><strong>[I] Perfecto, pues le haremos llegar desde aquí la invitación. Por último recomiéndanos un tema que te gustaría tratar en el programa.</strong></p><p>[J] Soy un enamorado de mejorar la performance. Me gustaría saber si le preocupa a los desarrolladores, si son capaces de convencer a la gente de producto de que es algo a lo que hay que dedicarle tiempo, y si se ve como una feature más. Cuáles son los casos prácticos, si han introducido alguna mejora que se tradujera en más usuarios u otras métricas. Echo en falta ejemplos, sobre todo de empresas españolas, donde se vean mejoras de rendimiento que hayan movido métricas importantes para la empresa.</p><p><strong>[I] Muy bien, pues con esto cerramos el programa. La verdad es que ha sido un verdadero placer tenerte con nosotros. Hemos obtenido un montón de información y sobre temas útiles para que a la gente le pique el gusanillo y se ponga a investigar y a realmente implementarlo.</strong></p><p>[J] Lo divertido es que es fácil jugar con nuestras webs, e inspeccionar el código de cualquier web, aprendiendo de cómo han aplicado otros PWA.</p><p><strong>[C] Muchísimas gracias José Manuel por haber aceptado nuestra invitación.</strong></p><p>[J] A vosotros, un honor.</p><p><strong>[I] Muchas gracias.</strong></p><p>[Música] Recomendaciones. El espacio de sugerencias y recursos útiles para los diseñadores y desarrolladores web.</p><p><strong>[I] En el programa de hoy os traemos cuatro links, así que allá van mis dos primeros. El primero de los links es <a href="https://cloudfour.com/thinks/progressive-web-app-questions/" target="_blank" rel="noopener">un artículo que ha escrito Jason Grigsby de Cloudfour acerca de las PWAs</a>, explicando lo que significa y lo que hacen. Decía que hace unas semanas le escribía un estudiante en su proyecto final y quería preguntarle cómo funcionaban y para qué servían. El segundo link es una herramienta de auditoría que se puede usar a través de terminal y a través de página web, y es <a href="https://github.com/GoogleChrome/lighthouse" target="_blank" rel="noopener">Lighthouse</a>. Es una herramienta que ha desarrollado Google, principalmente Paul Irish, para auditar y ver las métricas de nuestras PWAs.</strong></p><p><strong>[C] El primero de mis links viene de la web de desarrolladores de Google, en la cual tenéis <a href="https://developers.google.com/web/progressive-web-apps/checklist" target="_blank" rel="noopener">una checklist para poder testear y comprobar si cumple todos los requisitos necesarios</a> y además poder poner atención a los detalles y de esa manera mejorar la experiencia a nuestros usuarios. El segundo de mis links es <a href="https://www.timmykokke.com/2017/06/the-pwa-resource-list/" target="_blank" rel="noopener">un listado de recursos que Timmy ha colgado en su página web personal sobre las PWAs</a>.</strong></p>]]></content>
    
    <summary type="html">
    
      He grabado un podcast sobre Progressive Web App para WeCodeSign. Escúchalo o lee la transcripción.
    
    </summary>
    
    
      <category term="pwa" scheme="https://jmperezperez.com/tags/pwa/"/>
    
  </entry>
  
  <entry>
    <title>React Alicante 2017 - A summary of the talks</title>
    <link href="https://jmperezperez.com/react-alicante-2017/"/>
    <id>https://jmperezperez.com/react-alicante-2017/</id>
    <published>2017-10-01T16:00:00.000Z</published>
    <updated>2018-03-22T17:04:06.389Z</updated>
    
    <content type="html"><![CDATA[<p>This weekend I have been in Spain to attend <a href="http://reactalicante.es" target="_blank" rel="noopener">React Alicante</a>. This is the first edition of this conference, focused in React and React Native.</p><p>Continue reading to know more about the event and its contents.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510326427/react-alicante-glenn-reyes_kokxlw.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Glenn Reyes speaking at React Alicante"> <small class="caption">Glenn Reyes speaking at React Alicante</small></p><a id="more"></a><p>The conference was 3-day long, one day with workshops introducing React and React Native, and 2 days for talks in a single track.</p><p>It’s the first edition of the conference, and I believe it’s also the first React conference arranged in Spain. It was truly international, with all talks delivered in English (something unusual in Spain) and 250 attendees from 25+ countries.</p><p>The most impressive is that <strong>it was arranged by 2 Spanish expats who form the company <a href="https://limenius.com/" target="_blank" rel="noopener">Limenius</a>, based in Munich</strong>. <a href="https://twitter.com/nacmartin" target="_blank" rel="noopener">Nacho</a> and <a href="https://twitter.com/vicqr" target="_blank" rel="noopener">Victoria</a> did an impressive job, putting together a top-level conference with a great line-up and contents. They managed to prove that its possible to arrange a good conference in a well-communicated location like Alicante, with good weather and interesting attractions, while making it affordable (the regular tickets for the talks were 99).</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510331531/react-alicante-nacho-martin_wzczdx.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Nacho Martín speaking at React Alicante"> <small class="caption">Nacho Martín speaking at React Alicante</small></p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510331531/react-alicante-flavio-corpa_tg37vj.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Flavio Corpa during his talk"> <small class="caption">Flavio Corpa during his talk</small></p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510331531/react-alicante-overview_hncowx.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Overview of React Alicante"> <small class="caption">General overview of the full room</small></p><p>There were several talks touching on style guides and the difficult world of creating UI components that can be customisable in options and theming. Other topics were forms, CSS in JS, Redux/Mobx, code splitting, GraphQL, and React Native.</p><p>They covered pretty well the current ecosystem of tools when working with React, and they shared learnings that can be applied to our daily jobs.</p><p>Do you want more details about the talks? Continue reading for a short description of each of them and links to their slides.</p><h3 id="Talks-—-Conference-Day-1"><a href="#Talks-—-Conference-Day-1" class="headerlink" title="Talks — Conference Day 1"></a>Talks — Conference Day 1</h3><h4 id="The-effect-of-React-on-web-standards-by-Karl-Horky-Slides"><a href="#The-effect-of-React-on-web-standards-by-Karl-Horky-Slides" class="headerlink" title="The effect of React on web standards by Karl Horky - Slides"></a>The effect of React on web standards by <a href="https://twitter.com/karlhorky" target="_blank" rel="noopener">Karl Horky</a> - <a href="https://work.karlhorky.com/talks/packages/2017-09-28-react-alicante-the-effect-of-react-on-web-standards/" target="_blank" rel="noopener">Slides</a></h4><p>An overview of how the Web Standards committees work and how libraries (jQuery, Dojo, Angular, Knockout, Ember, React) and languages (CoffeeScript) have helped to introduce changes in the DOM and browser APIs.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">&quot;React - Not just a library&quot; indeed!<a href="https://twitter.com/karlhorky?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@karlhorky</a> opening the <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> conference by talking about webstandards 🙌 <a href="https://t.co/4tnVZoyn79" target="_blank" rel="noopener">pic.twitter.com/4tnVZoyn79</a></p>&mdash; React Vienna Meetup (@ReactVienna) <a href="https://twitter.com/ReactVienna/status/913665862829297665?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>It also included a summary of the current TC39 standards proposals and their stage in the specification process.</p><h4 id="Modular-CSS-by-Andrey-Okonetch-Slides"><a href="#Modular-CSS-by-Andrey-Okonetch-Slides" class="headerlink" title="Modular CSS by Andrey Okonetch - Slides"></a>Modular CSS by <a href="https://twitter.com/okonetchnikov" target="_blank" rel="noopener">Andrey Okonetch</a> - <a href="https://speakerdeck.com/okonet/modular-css-v2-css-in-js-edition" target="_blank" rel="noopener">Slides</a></h4><p>This was a fantastic talk taking us through how we used to build sites and the challenges to keep CSS maintainable. It goes through all the stages from pre-BEM, BEM, CSS modules and JSS (CSS in JS).</p><p>Andrey explains how CSS in JS is not such a bad idea, the same way JSX broke the separation of concerns by getting closer to the components logic.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Gmail and Google Maps in the history of CSS with <a href="https://twitter.com/okonetchnikov?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@okonetchnikov</a> at <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> <a href="https://t.co/3zfpAp2WqS" target="_blank" rel="noopener">pic.twitter.com/3zfpAp2WqS</a></p>&mdash; Karl Horky (@karlhorky) <a href="https://twitter.com/karlhorky/status/913683058594902017?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>At the end, he talks about the ecosystem of tools to help us either inlining CSS in JS or creating optimised CSS rules that reduce code duplication. In short, it lets machines do what they are best at.</p><p>The talk covers a topic that is really hot at the moment. In fact several other talks also brought up the idea of moving the styles within the components to help with maintainability, theming and critical css rendering. If you like these topics I recommend you to check <a href="https://www.youtube.com/watch?v=MT4D_DioYC8" target="_blank" rel="noopener">Mark Dalgleishs talk at CSSConf EU 2017</a>.</p><h4 id="React-gt-gt-Redux-a-development-workflow-by-Braulio-Diez"><a href="#React-gt-gt-Redux-a-development-workflow-by-Braulio-Diez" class="headerlink" title="React &gt;&gt; Redux a development workflow by Braulio Diez"></a>React &gt;&gt; Redux a development workflow by <a href="https://twitter.com/braulio_sl" target="_blank" rel="noopener">Braulio Diez</a></h4><p>Braulio was really energetic and gave a talk about how you might not always need Redux when working with React. I couldn’t find tweets nor slides from the talk, so I’ll wait for the videos to add more content.</p><h4 id="React-Storybook-Design-Develop-Document-and-Debug-your-React-UI-components-by-Marie-Laure-Thuret-Slides"><a href="#React-Storybook-Design-Develop-Document-and-Debug-your-React-UI-components-by-Marie-Laure-Thuret-Slides" class="headerlink" title="React-Storybook: Design, Develop, Document and Debug your React UI components by Marie-Laure Thuret - Slides"></a>React-Storybook: Design, Develop, Document and Debug your React UI components by <a href="https://twitter.com/mlthuret" target="_blank" rel="noopener">Marie-Laure Thuret</a> - <a href="https://speakerdeck.com/mlthuret/storybook-dev-design-debug-and-document-your-ui-components" target="_blank" rel="noopener">Slides</a></h4><p>I loved this talk! Do you know that feeling when you are listening someone explaining all your current pains and provides you with great solutions? That’s how I felt.</p><p>Not only did she talked about how to use StoryBook, but also how it was the source of truth and a communication tool with designers and between developers. You send a PR that makes a change in a component? Link directly to the story for that component so the reviewer sees the result without having to browse through the site.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr"><a href="https://twitter.com/mlthuret?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@mlthuret</a> talking about documentation and Visual Regression Testing with StoryBook <a href="https://twitter.com/hashtag/ReactAlicante?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#ReactAlicante</a> <a href="https://twitter.com/hashtag/NiceTalk?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#NiceTalk</a> <a href="https://t.co/3trWkSmlIK" target="_blank" rel="noopener">pic.twitter.com/3trWkSmlIK</a></p>&mdash; Gabriel Garcia Seco (@GGarciaSeco10) <a href="https://twitter.com/GGarciaSeco10/status/913712092900843521?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>I was recently looking for tools to do visual regression testing to catch CSS issues, but in the end we decided to skip it. I liked that Marie-Laure talked about this and demoed <a href="https://loki.js.org" target="_blank" rel="noopener">Loki</a>, which I didnt know about, that integrates with StoryBook and provides visual diffing. It looked easy to use and a great complement to unit tests and snapshot tests for components.</p><h4 id="A-practical-guide-to-Redux-Form-by-Erik-Rasmussen-Slides-and-Code"><a href="#A-practical-guide-to-Redux-Form-by-Erik-Rasmussen-Slides-and-Code" class="headerlink" title="A practical guide to Redux Form by Erik Rasmussen - Slides and Code"></a>A practical guide to Redux Form by <a href="https://twitter.com/erikras" target="_blank" rel="noopener">Erik Rasmussen</a> - <a href="https://speakerdeck.com/erikras/a-practical-guide-to-redux-form" target="_blank" rel="noopener">Slides</a> and <a href="//github.com/erikras/reactalicante2017">Code</a></h4><p>Im fortunate that I dont have to deal with forms that often. If I ever have to do it with React, I think I would go for <a href="https://redux-form.com/" target="_blank" rel="noopener">Redux Form</a>.</p><p>Creating a form involves having multiple fields with a similar logic. It’s easy to end up duplicating code and dealing with unmaintainable code that only works for a given form. Redux Form helps removing boilerplate code and integrates beautifully with Redux.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">.<a href="https://twitter.com/erikras?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@erikras</a> on the difficulties of using forms, including use in environments with unidirectional data flow such as React. <a href="https://t.co/qSteZV458r" target="_blank" rel="noopener">pic.twitter.com/qSteZV458r</a></p>&mdash; Karl Horky (@karlhorky) <a href="https://twitter.com/karlhorky/status/913717121032519681?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>Erik did a ver smooth live demo, going from a simple form as we would implement it, and showing how to add more functionality through Redux Form while refactoring the code.</p><p>I personally love it when I see examples of Higher-Order Components that simplify the code. It’s usually not obvious how they can solve some patterns, and it’s one of the most powerful features of functional programming applied to React.</p><h4 id="React-Native-Case-study-From-zero-to-a-super-hero-app-by-Ferran-Negre-Slides"><a href="#React-Native-Case-study-From-zero-to-a-super-hero-app-by-Ferran-Negre-Slides" class="headerlink" title="React Native  Case study: From zero to a super hero app by Ferran Negre - Slides"></a>React Native Case study: From zero to a super hero app by <a href="https://twitter.com/ferrannp" target="_blank" rel="noopener">Ferran Negre</a> - <a href="https://ferrannp.github.io/slides/react-native-zero-to-superhero/" target="_blank" rel="noopener">Slides</a></h4><p>Ferran ent through some features that most mobile applications need to deal with, and explained the challenges to implement them using React Native. He applied it to an application he had developed to follow TV Series (it reminded me to <a href="https://itunes.apple.com/us/app/ishows-tv-powered-by-trakt-tv/id992387872" target="_blank" rel="noopener">iShows</a>).</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">So happy to have talked in front of such a huge audience (250) in the sunny and beautiful Alicante! <a href="https://twitter.com/hashtag/reactnative?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#reactnative</a> <a href="https://twitter.com/hashtag/react?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#react</a> <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> <a href="https://t.co/crlrB1ungY" target="_blank" rel="noopener">pic.twitter.com/crlrB1ungY</a></p>&mdash; Ferran Negre (@ferrannp) <a href="https://twitter.com/ferrannp/status/913774705521430529?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>It turns out developing React Native applications is not as straightforward as it seems, especially if you want to mimic exactly how a native application behaves in some cases. Some examples are the lack of automatic refresh of the app when changing the system language, or doing data synchronisation when the app is in the background. Ferran has been documenting lots of tips to solve this issues on his <a href="https://medium.com/@ferrannp" target="_blank" rel="noopener">Medium</a>, and contributed with Java bridges to expose native functionality to React.</p><h4 id="Mutable-or-Immutable-Lets-do-both-by-Mattia-Manzati-Slides"><a href="#Mutable-or-Immutable-Lets-do-both-by-Mattia-Manzati-Slides" class="headerlink" title="Mutable or Immutable? Lets do both! by Mattia Manzati - Slides"></a>Mutable or Immutable? Lets do both! by <a href="https://twitter.com/MattiaManzati" target="_blank" rel="noopener">Mattia Manzati</a> - <a href="https://mattiamanzati.github.io/slides-react-alicante-2017/" target="_blank" rel="noopener">Slides</a></h4><p>Mattia compares MobX and Redux showing their pros and cons and then introduces <a href="https://github.com/mobxjs/mobx-state-tree" target="_blank" rel="noopener">mobx-state-tree</a> which aims to combine the best of MobXs mutability and Reduxs immutability.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">.<a href="https://twitter.com/MattiaManzati?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@MattiaManzati</a> blowing people’s minds at <a href="https://twitter.com/hashtag/ReactAlicante?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#ReactAlicante</a>. 👍 <a href="https://t.co/vD7Cbjm8yP" target="_blank" rel="noopener">pic.twitter.com/vD7Cbjm8yP</a></p>&mdash; Erik Rasmussen (@erikras) <a href="https://twitter.com/erikras/status/913784924485844994?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>Not having used myself MobX, and being comfortable with the simplicity of React, it was a bit difficult to wrap my head around the problems solved by the library.</p><h4 id="Why-I-Love-Create-React-App-by-Valerii-Sorokobatko-Write-up"><a href="#Why-I-Love-Create-React-App-by-Valerii-Sorokobatko-Write-up" class="headerlink" title="Why I Love Create React App by Valerii Sorokobatko - Write up"></a>Why I Love Create React App by <a href="https://twitter.com/tuchk4" target="_blank" rel="noopener">Valerii Sorokobatko</a> - <a href="https://medium.com/@tuchk4/react-alicante-2017-why-i-love-create-react-app-ed2670b03cc3" target="_blank" rel="noopener">Write up</a></h4><p>Valerii explains how they used create-react-app at his company to provide a unified developer experience and avoid dealing with config and setup, focusing on building features instead. I like how he shows that even though you might be tempted to eject, it might be better to find an alternative that keeps you using create-react-app and getting its updates.</p><p>I love that the talk is supported by <a href="https://medium.com/@tuchk4/why-i-love-create-react-app-e63b1be689a3" target="_blank" rel="noopener">a write up on Medium</a>, which makes it easily digestible for someone that doesnt have time to go through the video.</p><h4 id="Custom-CSS-is-the-path-to-inconsistent-UI-by-Artem-Sapegin-Slides"><a href="#Custom-CSS-is-the-path-to-inconsistent-UI-by-Artem-Sapegin-Slides" class="headerlink" title="Custom CSS is the path to inconsistent UI by Artem Sapegin - Slides"></a>Custom CSS is the path to inconsistent UI by <a href="https://twitter.com/iamsapegin" target="_blank" rel="noopener">Artem Sapegin</a> - <a href="https://sapegin.github.io/slides/inconsistent-styles" target="_blank" rel="noopener">Slides</a></h4><p>The title of this lightning talk is a strong statement, and Artem explains during his talk that we should avoid magic numbers and use components to solve typography and spacing in CSS.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">.<a href="https://twitter.com/iamsapegin?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@iamsapegin</a> about standard UI design and solutions for this at <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> <a href="https://t.co/eB5NDnHsme" target="_blank" rel="noopener">pic.twitter.com/eB5NDnHsme</a></p>&mdash; Karl Horky (@karlhorky) <a href="https://twitter.com/karlhorky/status/913745863297683456?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>To solve spacing specifically he developed <a href="https://github.com/sapegin/react-spaceman" target="_blank" rel="noopener">react-spaceman</a> (see <a href="https://sapegin.github.io/react-spaceman/" target="_blank" rel="noopener">the demo</a>), inspired by <a href="https://medium.com/eightshapes-llc/space-in-design-systems-188bcbae0d62" target="_blank" rel="noopener">Nathan Curtis’ framework</a>.</p><p>Artem is also the author of <a href="https://react-styleguidist.js.org/" target="_blank" rel="noopener">Styleguidist</a>, which was subject of <a href="https://twitter.com/NikkitaFTW" target="_blank" rel="noopener">Sara Vieira’s</a> talk the day after (read more below).</p><h4 id="Beyond-JavaScript-The-Real-Benefit-of-React-Native-by-Wojciech-Ogrodowczyk"><a href="#Beyond-JavaScript-The-Real-Benefit-of-React-Native-by-Wojciech-Ogrodowczyk" class="headerlink" title="Beyond JavaScript: The Real Benefit of React Native by Wojciech Ogrodowczyk"></a>Beyond JavaScript: The Real Benefit of React Native by <a href="https://twitter.com/sharnik" target="_blank" rel="noopener">Wojciech Ogrodowczyk</a></h4><p>This lightning talk tried to make us developers more critic about what languages we use.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">.<a href="https://twitter.com/sharnik?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@sharnik</a> teaching about language choices, using an example of the Pirahã People in the Amazon <a href="https://t.co/PFd22TQnxF" target="_blank" rel="noopener">pic.twitter.com/PFd22TQnxF</a></p>&mdash; Karl Horky (@karlhorky) <a href="https://twitter.com/karlhorky/status/913752918091866113?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><p>Instead of saying we are JS developers we should consider ourselves developers and see the good and bad points of the different languages. Use the best tool for the job.</p><h4 id="How-to-make-React-applications-really-reactive-with-Focal-by-Gregory-Shehet-Slides"><a href="#How-to-make-React-applications-really-reactive-with-Focal-by-Gregory-Shehet-Slides" class="headerlink" title="How to make React applications really reactive with Focal? by Gregory Shehet - Slides"></a>How to make React applications really reactive with Focal? by <a href="https://twitter.com/AGambit95" target="_blank" rel="noopener">Gregory Shehet</a> - <a href="https://www.dropbox.com/sh/hnbra4ezcj72jj2/AAAHVE9lrkusriYtDsTyCr7Ga?dl=0" target="_blank" rel="noopener">Slides</a></h4><p>Gregory went through an example application using Reactive Programming and Observables in his lightning talk, and showed how <a href="https://github.com/grammarly/focal" target="_blank" rel="noopener">Focal</a> can overcome the limitations of React for rendering Observables.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">.<a href="https://twitter.com/AGambit95?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@AGambit95</a> on rendering observables within React using Focal at <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> <a href="https://t.co/LhmOofGgmj" target="_blank" rel="noopener">pic.twitter.com/LhmOofGgmj</a></p>&mdash; Karl Horky (@karlhorky) <a href="https://twitter.com/karlhorky/status/913791213681115137?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">29 September 2017</a></blockquote><h3 id="Talks-—-Conference-Day-2"><a href="#Talks-—-Conference-Day-2" class="headerlink" title="Talks — Conference Day 2"></a>Talks — Conference Day 2</h3><h4 id="End-to-End-testing-React-applications-by-Forbes-Lindesay-Repo-with-slides"><a href="#End-to-End-testing-React-applications-by-Forbes-Lindesay-Repo-with-slides" class="headerlink" title="End to End testing React applications by Forbes Lindesay - Repo (with slides)"></a>End to End testing React applications by <a href="https://twitter.com/ForbesLindesay" target="_blank" rel="noopener">Forbes Lindesay</a> - <a href="https://github.com/ForbesLindesay/end-to-end-testing-react-applications" target="_blank" rel="noopener">Repo (with slides)</a></h4><p>Forbes, who ran the <a href="https://github.com/ForbesLindesay/intro-to-react" target="_blank" rel="noopener">React workshop</a> at the conference, also gave a talk. Forbes used to work in the Ads team at Facebook London, and a very active programmer with many projects on GitHub.</p><p>In his talk he presented an alternative Testing Pyramid compose by static analysis + javascript unit tests + end to end tests, describing tools to use and the limitations of every step. Lots of these tools like Flow, Jest or Prettier have actually been created at Facebook and now for part of the workflow of many of us.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Starting this second day of talks with End to end testing React applications by <a href="https://twitter.com/ForbesLindesay?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ForbesLindesay</a> <a href="https://twitter.com/hashtag/ReactAlicante?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#ReactAlicante</a> <a href="https://t.co/h414HbNAqO" target="_blank" rel="noopener">pic.twitter.com/h414HbNAqO</a></p>&mdash; ReactAlicante ⚛️🌞🥘 (@ReactAlicante) <a href="https://twitter.com/ReactAlicante/status/914025944855334912?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>End to end tests usually present problems, being slow, unreliable and expensive. Forbes has worked on <a href="https://github.com/ForbesLindesay/cabbie" target="_blank" rel="noopener">cabbie</a> and <a href="https://github.com/ForbesLindesay/taxi-rank" target="_blank" rel="noopener">taxi-rank</a> to make this easier. Cabbie is a webdriver client for Node.js. With it you can control Chrome through chromedriver, but also run the tests using JSDom through taxi-rank, which can run way faster than controlling a real browser, and could be a good alternative in some cases.</p><h4 id="Writing-highly-reusable-React-components-by-Javi-Velasco"><a href="#Writing-highly-reusable-React-components-by-Javi-Velasco" class="headerlink" title="Writing highly reusable React components by Javi Velasco"></a>Writing highly reusable React components by <a href="https://twitter.com/javivelasco" target="_blank" rel="noopener">Javi Velasco</a></h4><p>Javi is the author of <a href="http://react-toolbox.com" target="_blank" rel="noopener">react-toolbox</a>, a suite of React components that use Material Design. The project started back in October 2015 and Javi explained some architectural decisions that were taken and he would address now in a different way.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">.<a href="https://twitter.com/javivelasco?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@javivelasco</a> about to start showing us how to write highly reusable React components <a href="https://t.co/Iy0nzkP3Dx" target="_blank" rel="noopener">pic.twitter.com/Iy0nzkP3Dx</a></p>&mdash; ReactAlicante ⚛️🌞🥘 (@ReactAlicante) <a href="https://twitter.com/ReactAlicante/status/914037890828718080?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>I like these talks that show the evolution of a project since that’s what we live everyday with. We build for what’s needed today and try to make it last, but 2 years in a web project are very long and we quickly find better ways of dealing with past issues.</p><p>Javi explained the theming and customizable constraints imposed by those components, and how he was thinking of isolating the functionality in a <a href="https://www.npmjs.com/package/react-toolbox-core" target="_blank" rel="noopener">react-toolbox-core package</a> (<a href="https://github.com/react-toolbox/react-toolbox/tree/agnostic-components" target="_blank" rel="noopener">here the branch</a> and <a href="https://github.com/javivelasco/react-toolbox-airbnb" target="_blank" rel="noopener">demo</a>), and make it easy to use any CSS-in-JS (aka JSS) method for styling.</p><h4 id="The-Dream-of-Styleguide-Driven-Development-by-Sara-Vieira-Slides-and-Repo"><a href="#The-Dream-of-Styleguide-Driven-Development-by-Sara-Vieira-Slides-and-Repo" class="headerlink" title="The Dream of Styleguide Driven Development by Sara Vieira - Slides and Repo"></a>The Dream of Styleguide Driven Development by <a href="https://twitter.com/NikkitaFTW" target="_blank" rel="noopener">Sara Vieira</a> - <a href="https://styleguide-driven-development-anvohjeduy.now.sh/" target="_blank" rel="noopener">Slides</a> and <a href="https://github.com/SaraVieira/styleguide-driven-development" target="_blank" rel="noopener">Repo</a></h4><p>Sara talked about how to split a design into smaller chunks (eg typography, buttons, icons and cards) and isolate them in a style guide that serves to communicate with the designers.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">React <a href="https://twitter.com/styleguidist?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@styleguidist</a> at <a href="https://twitter.com/hashtag/reactalicante?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#reactalicante</a> by <a href="https://twitter.com/NikkitaFTW?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@NikkitaFTW</a> 🥘🛥🌅<a href="https://t.co/r7pbggUMag" target="_blank" rel="noopener">https://t.co/r7pbggUMag</a> <a href="https://t.co/E2F0QlSnh8" target="_blank" rel="noopener">pic.twitter.com/E2F0QlSnh8</a></p>&mdash; Artem Sapegin ☕ (@iamsapegin) <a href="https://twitter.com/iamsapegin/status/914057821397897216?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>Creating new pages is a matter of putting those components together, instead of coming up with new ways to codify the style needed for each page. Sara showed 2 tools for creating style guides: <a href="https://github.com/styleguidist/react-styleguidist" target="_blank" rel="noopener">Styleguidist</a> and <a href="https://storybook.js.org/" target="_blank" rel="noopener">Storybook</a>.</p><p>Storybook had been covered at the first day of the conference, so Sara focused on demoing Styleguidist and showing the differences between the two.</p><p>Regardless of the tool, I really think we should componentise early and evolve the design based on the components.</p><h4 id="Building-a-Realtime-Chat-with-GraphQL-Subscriptions-by-Nikolas-Burk-Slides-and-Demo-code"><a href="#Building-a-Realtime-Chat-with-GraphQL-Subscriptions-by-Nikolas-Burk-Slides-and-Demo-code" class="headerlink" title="Building a Realtime Chat with GraphQL Subscriptions by Nikolas Burk - Slides and Demo code"></a>Building a Realtime Chat with GraphQL Subscriptions by <a href="https://twitter.com/nikolasburk" target="_blank" rel="noopener">Nikolas Burk</a> - <a href="https://www.slideshare.net/nburk/building-a-realtime-chat-with-react-graphql-subscriptions" target="_blank" rel="noopener">Slides</a> and <a href="https://github.com/nikolasburk/graphql-chat" target="_blank" rel="noopener">Demo code</a></h4><p>Many of us have heard about GraphQL but arent using it in production. Nikolas gave a quick overview about GraphQL and coded a chat application based on React + <a href="http://dev.apollodata.com/" target="_blank" rel="noopener">Apollo</a>. For the backend he used <a href="http://graph.cool/" target="_blank" rel="noopener">graphcool</a>, a hosted GraphQL service.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr"><a href="https://twitter.com/nikolasburk?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@nikolasburk</a> speaking on GraphQL subscriptions <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> <a href="https://t.co/tmqHVJSTG3" target="_blank" rel="noopener">pic.twitter.com/tmqHVJSTG3</a></p>&mdash; Shawn Leberknight (@shawns_beard) <a href="https://twitter.com/shawns_beard/status/914070758892163072?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>Nikolas made it look really easy, and thanks to the tools we have today at reach using GraphQL is not a daunting task anymore.</p><h4 id="Code-splitting-in-React-apps-by-Glenn-Reyes-Slides"><a href="#Code-splitting-in-React-apps-by-Glenn-Reyes-Slides" class="headerlink" title="Code-splitting in React apps by Glenn Reyes - Slides"></a>Code-splitting in React apps by <a href="https://twitter.com/glnnrys" target="_blank" rel="noopener">Glenn Reyes</a> - <a href="https://speakerdeck.com/glennreyes/code-splitting-in-react-apps" target="_blank" rel="noopener">Slides</a></h4><p>I was hoping someone would bring up the topic of performance, and that was Glenn. He address the topic of code splitting, generating several bundles out of the JS and CSS code in our React apps.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Our own <a href="https://twitter.com/glnnrys?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@glnnrys</a> is kicking off with code splitting in <a href="https://twitter.com/reactjs?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@reactjs</a> apps <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> 👏👏👏 <a href="https://t.co/pvHAUU0JrX" target="_blank" rel="noopener">pic.twitter.com/pvHAUU0JrX</a></p>&mdash; React Vienna Meetup (@ReactVienna) <a href="https://twitter.com/ReactVienna/status/914078814342467584?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>Using <code>import()</code>, a higher-order component and Webpack we can easilly split our bundles in vendor + app chunks, but also at a path or a component level. Thus the browsers requests the bundles needed for the views as we browse them (or we let the browser preload them when it’s idle).</p><p>I liked the mention to <a href="https://github.com/zeit/next.js/" target="_blank" rel="noopener">Next.js</a>, which has built-in lots of these concepts, and the idea of using <a href="https://github.com/aweary/react-perimeter" target="_blank" rel="noopener">react-perimeter</a> to lazy load components as the user moved the cursor close to an element.</p><h4 id="Redux-Saga-the-Viking-way-to-manage-side-effects-by-Nacho-Martin-Slides"><a href="#Redux-Saga-the-Viking-way-to-manage-side-effects-by-Nacho-Martin-Slides" class="headerlink" title="Redux Saga, the Viking way to manage side effects by Nacho Martín - Slides"></a>Redux Saga, the Viking way to manage side effects by <a href="https://twitter.com/nacmartin" target="_blank" rel="noopener">Nacho Martín</a> - <a href="https://www.slideshare.net/nachomartin/redux-sagas-react-alicante" target="_blank" rel="noopener">Slides</a></h4><p>Nacho was one of the organisers and apart from the React Native workshop he also presented a talk. He described Redux Saga as a way to manage side-effects.</p><p>If you have ever tried to get promises back from dispatching actions or orchestrate other sub-actions as a result of actions, youre likely to have used sagas or something like <a href="https://github.com/gaearon/redux-thunk" target="_blank" rel="noopener">redux-thunk</a>.</p><p>He started the talk in the best possible way, by saying:</p><blockquote><p>Maybe you don’t need redux-saga</p></blockquote><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">.<a href="https://twitter.com/nacmartin?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@nacmartin</a> about to start his talk, showing how to manage side-effects with Redux Saga <a href="https://twitter.com/hashtag/ReactAlicante?src=hash&amp;ref_src=twsrc%5Etfw" target="_blank" rel="noopener">#ReactAlicante</a> <a href="https://t.co/C9egYqumQp" target="_blank" rel="noopener">pic.twitter.com/C9egYqumQp</a></p>&mdash; ReactAlicante ⚛️🌞🥘 (@ReactAlicante) <a href="https://twitter.com/ReactAlicante/status/914114831367725058?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>More often than not we like to pull more and more tooling when developing React applications just because we think we need them. Nacho explained where Sagas fit and how the use generators underneath, which makes writing async code always as easy as writing synchronous one.</p><p>I think it’s a good library when thunks fail short.</p><h4 id="The-Road-to-a-Statically-Typed-Future-by-Patrick-Stapfer-Slides"><a href="#The-Road-to-a-Statically-Typed-Future-by-Patrick-Stapfer-Slides" class="headerlink" title="The Road to a Statically Typed Future by Patrick Stapfer - Slides"></a>The Road to a Statically Typed Future by <a href="https://twitter.com/ryyppy" target="_blank" rel="noopener">Patrick Stapfer</a> - <a href="https://speakerdeck.com/ryyppy/the-road-to-a-statically-typed-future-reactalicante-2017" target="_blank" rel="noopener">Slides</a></h4><p>Patrick talked about typing (eg using Typescript or Flow) and how it improves functional patterns writing JS apps, but also as contracts communications client and server to accomplish fully-typed architectures.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">The evolution of static type systems with <a href="https://twitter.com/ryyppy?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ryyppy</a> at <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> <a href="https://t.co/8wW5MGlrAA" target="_blank" rel="noopener">pic.twitter.com/8wW5MGlrAA</a></p>&mdash; Karl Horky (@karlhorky) <a href="https://twitter.com/karlhorky/status/914125965390905344?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>Finally, Patrick shows how ReasonML and BuckleScript can enforce code correctness even more with an example of a Tic Tac Toe game implementation.</p><h4 id="Case-study-Lucentum-creating-our-own-React-component-library-by-Flavio-Corpa"><a href="#Case-study-Lucentum-creating-our-own-React-component-library-by-Flavio-Corpa" class="headerlink" title="Case study: Lucentum, creating our own React component library by Flavio Corpa"></a>Case study: Lucentum, creating our own React component library by <a href="https://twitter.com/FlavioCorpa" target="_blank" rel="noopener">Flavio Corpa</a></h4><p>Flavio talked about Lucentum, a component library he developed for a client. He shared his learnings and challenges theming and creating awefully complex components, while keeping everything working.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr"><a href="https://twitter.com/FlavioCorpa?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@FlavioCorpa</a> speaking on React component library: case study <a href="https://twitter.com/ReactAlicante?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">@ReactAlicante</a> <a href="https://t.co/Rk59QaLBge" target="_blank" rel="noopener">pic.twitter.com/Rk59QaLBge</a></p>&mdash; Shawn Leberknight (@shawns_beard) <a href="https://twitter.com/shawns_beard/status/914144631495041024?ref_src=twsrc%5Etfw" target="_blank" rel="noopener">30 September 2017</a></blockquote><p>It was a down-to-earth talk in which most of us felt identified with. It was also a nice way to link back to Javi Velasco’s talk about UI components, and how difficult it is to build them to be flexible and accommodate for any imaginable situation.</p><h4 id="Deploying-atomic-design-system-at-scale-by-Nick-Balestra-Slides"><a href="#Deploying-atomic-design-system-at-scale-by-Nick-Balestra-Slides" class="headerlink" title="Deploying atomic design system at scale by Nick Balestra - Slides"></a>Deploying atomic design system at scale by <a href="https://twitter.com/nickbalestra" target="_blank" rel="noopener">Nick Balestra</a> - <a href="https://speakerdeck.com/nickbalestra/deploying-atomic-design-system-at-scale" target="_blank" rel="noopener">Slides</a></h4><p>Nick talked about scaling websites through <a href="https://github.com/opentable/oc" target="_blank" rel="noopener">OpenComponents</a>. Think of the microservice approach taken all the way till the frontend.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510331530/react-alicante-nick-balestra_gzaig6.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Nick Balestra speaking at React Alicante"></p><p>I liked his presentation very much’W eve been trying to solve some of these issues at Spotify for years, in creative ways like <a href="https://speakerdeck.com/jmperez/cross-platform-web-development" target="_blank" rel="noopener">pushing the boundaries of what iframes can do</a>.</p><p>OC’s approach (and thus OpenTable’s, the company that built it) is to have parts of the UI served my different services, that can be written in different languages, and maintained/versioned/deployed by a certain team without dependencies on others. The same services can be used to compose email messages or create embeddable widgets.</p><p>I still wonder how everything can be put in place without breaking anything, and where shared state is stored. Still, this architecture seems to work OpenTable.</p><h3 id="Videos"><a href="#Videos" class="headerlink" title="Videos"></a>Videos</h3><p>The videos for the talks are expected to be published in the coming weeks. I’ll link to them when they are live.</p><p>I really hope the conference will be back next year. I think these initiatives help showing that there is a lot of talent in Alicante and it can be a very good destination for remote workers and companies.</p><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>]]></content>
    
    <summary type="html">
    
      First React conference in Spain, covering React and React Native. An international event with workshops and talks.
    
    </summary>
    
    
      <category term="conference" scheme="https://jmperezperez.com/tags/conference/"/>
    
      <category term="web" scheme="https://jmperezperez.com/tags/web/"/>
    
      <category term="react" scheme="https://jmperezperez.com/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>Speaking at Alicante Frontend</title>
    <link href="https://jmperezperez.com/speaking-alicante-frontend/"/>
    <id>https://jmperezperez.com/speaking-alicante-frontend/</id>
    <published>2017-09-09T06:00:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>This week I had a blast speaking at <a href="https://www.meetup.com/Alicante-Frontend/events/242461990/" target="_blank" rel="noopener">a meetup organised by Alicante Frontend</a>. To me this was really special. Alicante is my home town and it’s also where I studied Computer Science.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510326708/alicante-frontend_anptgy.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Alicante Frontend"></p><a id="more"></a><p>After having been far from the region for some time, I was happy to catch up with some colleagues and confirm that web development is really healthy in Alicante. There are more companies, co-working spaces, meetups and conferences than ever. There is a feeling of collaboration and helping each other that will continue fostering good things.</p><h2 id="Visiting-ULab"><a href="#Visiting-ULab" class="headerlink" title="Visiting ULab"></a>Visiting ULab</h2><p><img src="/assets/images/posts/ulab.jpg" alt="Entrance of ULab — taken from ulab.es"> <small class="caption">Entrance of ULab — taken from <a href="https://ulab.es" target="_blank" rel="noopener">ulab.es</a></small></p><p>The meetup was hosted at <a href="https://ulab.es/" target="_blank" rel="noopener">ULab</a>, a coworking space in the centre of Alicante. They offer desks, offices, training rooms and meeting rooms for rent, and have been hosting Alicante Frontend meetups.</p><p>I had the chance to meet with <a href="http://www.soyisabelromero.com/" target="_blank" rel="noopener">Isabel Romer</a>, Product Manager at ULab, who showed me the facilities. We talked about the ecosystem of companies in the area and how Alicante is becoming a hub of tech start-ups.</p><p>The space reminded me of <a href="https://skillsmatter.com/event-space" target="_blank" rel="noopener">CodeNode London</a>, though a bit smaller (1,300 vs 2,100 sqm). I had heard of a few co-working spaces in the region but whenever I checked their website it felt like old offices recycled as mere desks for rent, not taking advantage of an eco-system of companies and professionals collaborating with each other, nor hosting external events.</p><p>I was actually looking for a place like this. I have tried to work remotely sporadically while spending some days in Alicante visiting my family. I’ll definitely try it out when coming back.</p><h2 id="Meeting-the-team-behind-Alicante-Frontend"><a href="#Meeting-the-team-behind-Alicante-Frontend" class="headerlink" title="Meeting the team behind Alicante Frontend"></a>Meeting the team behind Alicante Frontend</h2><p><img src="/assets/images/posts/alicante-frontend-organisers.jpg" alt="Alex Jover, me, Alex Mayol and Álvaro Yuste. The first ones arriving at ULab to prepare the meetup"> <small class="caption">Alex Jover, me, Alex Mayol and Álvaro Yuste. The first ones arriving at ULab to prepare the meetup. — <a href="https://medium.com/r/?url=https%3A%2F%2Ftwitter.com%2Falexjoverm%2Fstatus%2F905118087648858112" target="_blank" rel="noopener">Twitter</a></small></p><p>After attending JSDayES 2017 I came in contact with lots of web developers in Spain and got to join two large Slack channels where Frontend developers hang out, at a national (Frontaneros) regional level (Alicante Frontend).</p><p>The organisers of Alicante Frontend gave me the opportunity of speaking at their meetup. They have been arranging events since December 2016 and are very active on Twitter, GitHub and the aforementioned Slack channels.</p><h2 id="The-talk"><a href="#The-talk" class="headerlink" title="The talk"></a>The talk</h2><p>I talked about web performance optimisation focused on images. The talk was based on the one I gave at JSDayES, but this time I translated it to Spanish.</p><p>Here are <a href="https://slides.com/jmperez/pir-alicante-frontend" target="_blank" rel="noopener">the slides</a>:</p><div class="videoWrapper"><iframe src="//slides.com/jmperez/pir-alicante-frontend/embed" width="576" height="420" scrolling="no" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen></iframe></div><p>There were many questions in the Q&amp;A. Some of them were related with the contents of the talk, like how to tackle retina displays, some doubts about lazy loading and whether I had been using Service Workers in my projects at Spotify.</p><p>Lots of other questions were about Spotify and Sweden. How is it working at Spotify, what the culture is like, how we are organised or how we work with designers were a few ones. Also whether it’s very cold and there are lots of depressed people in Sweden. If you wonder, it’s not that cold, at least in Stockholm, and darkness can affect your humour but you’ll probably be fine.</p><p>There were around 60 attendees, and I was told this was the most crowded meetup organised by Alicante Frontend, which made me extra happy.</p><p>I’m sure Alicante Frontend will continue growing and showcasing the local talent.</p>]]></content>
    
    <summary type="html">
    
      I have presented a talk at Alicante Frontend, a meetup about web development in Spain.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Collaborative listening on Spotify using Connect endpoints</title>
    <link href="https://jmperezperez.com/collaborative-listening-spotify/"/>
    <id>https://jmperezperez.com/collaborative-listening-spotify/</id>
    <published>2017-08-21T15:50:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>This is a post about a hack project I have been working on lately, and I wanted to share some information about why and how I built it.</p><p>tl;dr <a href="https://c-spotify.herokuapp.com" target="_blank" rel="noopener">Here is <strong>the demo</strong></a> and <a href="https://github.com/JMPerez/c" target="_blank" rel="noopener"><strong>the project on GitHub</strong></a>.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510476635/c-collaborative_k8kxsa.png" sizes="(max-width: 768px) 100vw, 684px" alt="C, collaborative room to listen to Spotify"></p><a id="more"></a><p><small class="caption">A screenshot of C, a simple collaborative room built using Spotify’s Web API.</small></p><h3 id="Collaborative-listening"><a href="#Collaborative-listening" class="headerlink" title="Collaborative listening"></a>Collaborative listening</h3><p>The idea is basic. You go to a page where you can propose songs to listen to, and other people do the same thing. The playback is synchronised for all users that are connected in that moment.</p><p>These pages are called “rooms”, and are normally based on some genre, to guide users when proposing songs. You don’t want to hear “Despacito” in a the latest rock album in a “80s Classic Hits“ room. The songs that are going to play next, which are in a queue, can also be voted up (sometimes down too). Great if you don’t feel like proposing new songs but you see one you like in the proposed ones.</p><p>As I said, this is not new at all, and in fact it was part of Spotify’s desktop application since <a href="https://www.youtube.com/watch?v=apvqiFsJcas" target="_blank" rel="noopener">end of 2011</a>, as an app called Soundrop:</p><div class="videoWrapper"><iframe width="720" height="405" src="https://www.youtube.com/embed/cavizRODpL0" frameborder="0" allowfullscreen></iframe></div><p><small class="caption">Video showing the Soundrop Spotify App.</small></p><p>The app was based on the now defunct <a href="https://developer.spotify.com/technologies/apps/" target="_blank" rel="noopener">Spotify Apps API</a>. This set of tools allowed custom web apps to run in an isolated view on Spotify’s desktop application, being able to control playback and user’s library.</p><p>Soundrop as a collaborative app is no more. After the removal of the Apps API <a href="http://www.show.co/blog/heavy-hearts" target="_blank" rel="noopener">they pivoted to a different product</a>.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510495292/spotify-app-finder_lfgest.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Spotify App Finder"> <small class="caption">List of the initial Spotify Apps. Source: <a href="http://evolver.fm/2011/12/02/spotify-apps-slated-to-roll-out-next-week/" target="_blank" rel="noopener">evolver.fm</a></small></p><p>The Apps API was the first project I worked on when I joined in Spotify in 2012. I would review submissions, support developers that had questions about how to use it, and create example apps.</p><p>The project <a href="https://techcrunch.com/2014/11/13/rip-spotify-apps-rip-soundrop/" target="_blank" rel="noopener">was discontinued end of 2014</a>, and with it these integrations. The Apps API were replaced by mobile SDKs (<a href="https://developer.spotify.com/technologies/spotify-ios-sdk/" target="_blank" rel="noopener">iOS</a> and <a href="https://developer.spotify.com/technologies/spotify-android-sdk/" target="_blank" rel="noopener">Android</a>) and a <a href="https://developer.spotify.com/web-api/" target="_blank" rel="noopener">REST API</a>, which we called Web API. The Web API had endpoints for fetching metadata and managing the user’s library through some scopes. If you have ever consumed any other API using OAuth 2.0, this one follows the same approach.</p><p>Though there were many endpoints added through the time, it was still impossible to control the playback through the API. This changed recently with the release of <a href="https://developer.spotify.com/web-api/web-api-connect-endpoint-reference/" target="_blank" rel="noopener">the Connect endpoints</a>.</p><h3 id="Spotify-Connect"><a href="#Spotify-Connect" class="headerlink" title="Spotify Connect"></a>Spotify Connect</h3><p>Say you are playing music on your phone. You arrive home and want to start playing on your desktop application. You can transfer the playback from the phone to the desktop, which will pick it up from that moment. The combination phone ↔ desktop works also with speakers, video consoles and the Web Player, which makes this very powerful. These capabilities are called <a href="https://www.spotify.com/connect/" target="_blank" rel="noopener">Connect</a>.</p><p>The Connect endpoints allow you to list the devices available for the user and transfer the playback between them. The set of endpoints is still in beta and subject to change, but it’s handy to work on a few hacks.</p><h4 id="Now-Playing"><a href="#Now-Playing" class="headerlink" title="Now Playing"></a>Now Playing</h4><p>A few weeks ago <a href="/spotify-connect-api">I published a post talking about a small library I built to fetch what you are playing on Spotify</a>. The library is handy for not having to deal with the authorisation flow, and makes it easy to crease visualisations such as <a href="https://codepen.io/jmperez/full/MmwObE" target="_blank" rel="noopener">this one</a>:</p><iframe id="cp_embed_MmwObE" src="//codepen.io/jmperez/embed/MmwObE?height=389&theme-id=0&slug-hash=MmwObE&default-tab=result" scrolling="no" frameborder="no" height="389" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="100%" style="width: 100%; overflow: hidden"></iframe><p>I created some other visualisations and organised them on <a href="https://codepen.io/collection/AyVBYB" target="_blank" rel="noopener">this Codepen collection</a>.</p><h3 id="Implementing-basic-collaborative-listening-with-Connect"><a href="#Implementing-basic-collaborative-listening-with-Connect" class="headerlink" title="Implementing basic collaborative listening with Connect"></a>Implementing basic collaborative listening with Connect</h3><p>Now that we’ve gone through an overview of what we want to accomplish and what tools we have available, let’s go for it.</p><p>When you log in with your Spotify account you will enter a room where y<strong>ou can add songs and let the website control your playback</strong> (you should have a Spotify application opened, like the mobile app, desktop app or <a href="https://open.spotify.com" target="_blank" rel="noopener">web player</a>)</p><p>If you think about it, <strong>a room for adding songs is basically a chat room</strong>. Instead of sending regular text messages you send commands like “add song” or “remove song” and the server makes sure all connected users get the updates and are kept in sync.</p><p>One use case is using the demo only as a controller, and not a speaker. Imagine that we have a speaker at work. We might want to queue songs but not having them playing from our computer. That’s what the mute/unmute button does. It will mute or stop syncing your playback with the room’s playback.</p><p>Another feature, or lack of it, is that the controller is the web site and not the server. <strong>Your playback will be synced with the room as long as you have the website open</strong>. This could be changed by letting the server make these requests on your behalf. After all, it has access to your refresh token when logging in. However, it’s easy to forget that you didn’t log out from the demo and freak out when something is changing your playback randomly, so that’s why I didn’t take this approach.</p><p>A limitation is that the project only works with Spotify Premium accounts, <a href="https://developer.spotify.com/web-api/working-with-connect/#Premium%20Only" target="_blank" rel="noopener">due to this restriction on the Connect endpoints</a>. You can still add songs, but the “play” command won’t work if your account is a free one.</p><p><strong>The Robot</strong></p><p>You are not alone in the room. <strong>A bot called “Robot” is always online</strong>, taking care of adding songs to the queue when it gets empty, based on previous submitted songs by users.</p><p>The data is provided by the Web API through its <a href="https://developer.spotify.com/web-api/get-recommendations/" target="_blank" rel="noopener">Get Recommendations Based on Seeds</a> endpoint. This endpoint returns a list of tracks that are based on a list of artists, genres and tracks, and you can set constraints on many music attributes.</p><p>Thus, you could want the Robot to put more energetic music on Fridays. Or have a robot adding recommendations based on Rock music in a Rock room. For this one, check out <a href="https://developer.spotify.com/web-api/get-recommendations/#available-genre-seeds" target="_blank" rel="noopener">the list of available genre seeds</a>. At the moment there are 126 genres of them. Not bad!</p><p><strong>Future?</strong></p><p>The demo is basic. The design is unpolished and the site is limited to a single room. However, it’s easy to deploy on a custom instance and the main goal is to serve to others that want to integrate with Spotify’s APIs. It’s open source, so you can fork it and do as you wish.</p><p>The project would be easy to tweak to cover other use cases. One of them would be <strong>synchronised sessions</strong>. Say I listen to great music (no, I don’t) and someone wants to tune in and listen exactly to what I’m listening to. You <em>just</em> need to assume every publishing user is a room, listen to changes in user’s playback and publish them, synchronising the subscribed users.</p><h3 id="Nerdy-details"><a href="#Nerdy-details" class="headerlink" title="Nerdy details"></a>Nerdy details</h3><p>The project uses React + Redux for rendering, and Node in the backend,this is all done using <a href="https://github.com/zeit/next.js/" target="_blank" rel="noopener">Next.js</a>, which also make Server-Side Rendering easy. An additional tweak is that React is replaced with Preact in production for a smaller payload. The whole thing is deployed on a Heroku instance.</p><p>One of the reasons I wanted to hack on Next.js was to have a better picture of its overhead. For this hack, the main page loads a bundle for the index page that is ~2.8kB minified &amp; gzipped, and the common bundle which is 80.6kB minified &amp; gzipped. It’s not the lightest alternative, but <strong>Next.js is designed to scale well as you add more pages to your site</strong>, due to how the bundles are split per page out of the box. Adding a large component to one page will not have an impact in the JS loaded for another page.</p><p>I have played with several ideas in the code base, that’s why it’s not very uniform and you’ll see, for example, several ways of doing CSS-in-JS.</p><p>I use this kind of hacks to give some new libraries and techniques a try, making them part of my tool belt and maybe using them in some real project. It’s also good to give Spotify’s Web API folks some feedback about the endpoints.</p><p>Regarding Next.js this project was pretty much an excuse to try out this library/framework. Yes, I could have picked any other project but my ideas always gravitate around Spotify-stuff. I wanted to see how opinionated it was, how SSR worked in that page-component pattern they use, and how it feels working with it.</p><h4 id="Why-Next-js"><a href="#Why-Next-js" class="headerlink" title="Why Next.js"></a>Why Next.js</h4><p>If you’ve ever tried to set up your own React.JS + ES6 + Webpack + react-intl + whatnot and have succeed without sweating, I’m your fan. Whenever I try, I always end up using some boilerplate project with everything in place.</p><p>I like <a href="https://github.com/facebookincubator/create-react-app" target="_blank" rel="noopener">create-react-app</a>. It makes everything so easier, and you can always go leave the wizard mode by eject-ing. No lock-in.</p><p>I have been following Next.js from the distance. I would read about it, but never had the time nor the energy to give it a try. I decided it was about time I put it in practice.</p><p><img src="/assets/images/posts/learn-nextjs.png" alt="Learn Next.js"></p><p><small class="caption"><a href="https://learnnextjs.com" target="_blank" rel="noopener">learnnext.js</a> is a great interactive step-by-step tutorial. If I ever write a library I’ll make sure the tutorial is as great as the library itself, so it’s easy to learn and adopt.</small></p><p>I started reading a bit and followed <a href="https://learnnextjs.com" target="_blank" rel="noopener">LearnNext.js</a>. I found it too basic at first, then I jumped to the code, but quickly had to go back to the tutorial. It’s good not to take shortcuts. Their tutorial might seem easy but there are some concepts that are important, or you face problems soon.</p><p>The best resource I found for Next.js is <a href="https://github.com/zeit/next.js/tree/master/examples" target="_blank" rel="noopener">the examples folder in their repo</a>. It’s pure gold. Lots of concise examples of how to use Next.js with pretty much anything. Pick ’n’ mix. I wanted to combine express + preact + redux + socket.io, and I had examples there for all of this.</p><p>I would say the most difficult part is when you realise that part of your code is running on the server. It’s quite surprising, but it’s what SSR is about. <code>localStorage</code> and <code>fetch</code> would fail, and other browser-only properties we are used to access when working with JS.</p><p>Overall I’m really happy. Most of your code is the same and you only need to adapt a bit to their routing. That’s what I like the most. It gives you the glue to put everything together, but you can still use the tools you are used to.</p><p>Zeit’s project are really awesome. Simple but extremely useful.</p><p>If you haven’t done it yet, have a look at <a href="https://c-spotify.herokuapp.com" target="_blank" rel="noopener"><strong>the demo</strong></a> and <a href="https://github.com/JMPerez/c" target="_blank" rel="noopener"><strong>the project on GitHub</strong></a>.</p>]]></content>
    
    <summary type="html">
    
      A project to create a collaborative room to listen to songs in sync using Next.JS and Spotify&#39;s Connect Web API endpoints.
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hiding the outline or :focus ring in an accessible way</title>
    <link href="https://jmperezperez.com/outline-focus-ring-a11y/"/>
    <id>https://jmperezperez.com/outline-focus-ring-a11y/</id>
    <published>2017-08-14T15:50:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>Last week I came across <a href="https://hackernoon.com/removing-that-ugly-focus-ring-and-keeping-it-too-6c8727fefcd2" target="_blank" rel="noopener">Removing that ugly :focus ring (and keeping it too)</a>. It’s a really good post about <code>outline</code>, that CSS property lots of devs tend to hide. The post explains some a11y-friendly alternatives to not display it, and show it when needed.</p><a id="more"></a><p>In the past I have made the same mistake of hiding the <code>outline</code> altogether, but no more!</p><p>A few months ago I came across a similar technique David Gilbertson describes, while inspecting the markup on Youtube.com. They take accessibility seriously and their player is a very good example to get inspiration from.</p><p>I then applied it to one of the Spotify sites I work on. Take <a href="https://open.spotify.com/track/2ZBNclC5wm4GtiWaeh0DMx?fo=1" target="_blank" rel="noopener">this Spotify page as an example</a>. This is how it works:</p><ol><li>Add a <code>no-focus-outline</code> CSS class to the <code>&lt;html&gt;</code> element.</li><li>Hide the outline using CSS only in <code>&lt;a&gt;</code> and <code>&lt;button&gt;</code> elements that descend from that class.</li><li>When tabbing, remove the CSS class.</li></ol><p>The complete code:</p><p><strong>CSS</strong><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.no-focus-outline</span> <span class="selector-tag">a</span><span class="selector-pseudo">:focus</span>,</span><br><span class="line"><span class="selector-class">.no-focus-outline</span> <span class="selector-tag">button</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>JS</strong><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Listen to tab events to enable outlines (accessibility improvement)</span></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.which === <span class="number">9</span>) <span class="comment">/* tab */</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.documentElement.classList.remove(<span class="string">'no-focus-outline'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>And a video showing what it looks like when tabbing:</p><div style="text-align:center"><video width="320" height="560" controls src="https://res.cloudinary.com/jmperez/video/upload/v1510495843/css-outline-focus_olx6zh.mp4"></video></div><p>Some additional a11y improvements are that I apply the same effect on hover and on focus, like when going through the “More by …” albums section. Last, but not least, the track row acts as a button to start the playback.</p><p>These are some small touches that very few people will realise, but are not difficult to implement and can have a very positive impact for some users.</p>]]></content>
    
    <summary type="html">
    
      A simple technique to hide the outline CSS property while making your website accessible when using keyboard navigation.
    
    </summary>
    
    
      <category term="web" scheme="https://jmperezperez.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Reading List</title>
    <link href="https://jmperezperez.com/2017-07-reading-list/"/>
    <id>https://jmperezperez.com/2017-07-reading-list/</id>
    <published>2017-06-29T11:10:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>This is a list of some posts and talks I have read and watch during the last days. I write it to keep track of interesting content for myself, but you might also find it useful.</p><a id="more"></a><h2 id="Posts"><a href="#Posts" class="headerlink" title="Posts"></a>Posts</h2><ul><li><p><a href="https://twitter.com/jonsneyers" target="_blank" rel="noopener">Jon Sneyers</a> from Cloudinary posted <a href="http://cloudinary.com/blog/detecting_the_psychovisual_impact_of_compression_related_artifacts_using_ssimulacra" target="_blank" rel="noopener">Detecting the psychovisual impact of compression related artifacts using SSIMULACRA</a>. It talks about SSIM (which <a href="/ssim-jpeg-io">I have covered in the past</a>), used to compress images based as much as possible without affecting the visual appearance (no visible artifacts). Jon describes <a href="https://github.com/cloudinary/ssimulacra" target="_blank" rel="noopener">Cloudinary’s SSIMULACRA</a> and benchmarks it agains the top perceptual metrics.</p></li><li><p><a href="https://hackernoon.com/tech-companies-these-are-the-perks-and-benefits-i-want-5e9788c30958" target="_blank" rel="noopener">Tech companies: these are the perks (and benefits) I want</a>. I agree with Tara’s points about what I find important in my job and hope more companies embrace them.</p></li></ul><h2 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h2><ul><li><a href="http://cloudinary.com/blog/introducing_website_speed_test_an_image_analysis_tool_integrated_with_webpagetest" target="_blank" rel="noopener">Cloudinary released</a> their <a href="https://webspeedtest.cloudinary.com" target="_blank" rel="noopener">Website Speed Test Image Analysis Tool</a>, which is also integrated with WebPagetest.</li></ul><p><img src="/assets/images/posts/website-speed-test.png" alt="Website Speed Test"></p><p><small class="caption">A screenshot of Cloudinary’s Website Speed Test checking this site.</small></p><h2 id="Talks"><a href="#Talks" class="headerlink" title="Talks"></a>Talks</h2><ul><li><a href="https://twitter.com/nicj" target="_blank" rel="noopener">Nic Jansma</a> and <a href="https://twitter.com/shubhie" target="_blank" rel="noopener">Shubhie Panicker</a> gave a talk at Fluent Conf named “Reliably Measuring Responsiveness in the Wild”. <a href="https://docs.google.com/presentation/d/15DsvKVrt9vIL5s-wH4VhCGEhS-FkjD5pP3dH1-hzPi8/edit" target="_blank" rel="noopener">The slides for the talk</a> are already available. They are full with great insights and are a must if you are into web performance. They show how to on measure responsiveness using old and new Browser APIs like <a href="/paint-timing-api">PerformanceObserver</a>, and show examples from real sites and how these metrics affect conversion rates.</li></ul><p><img src="/assets/images/posts/reliably-measuring-responsiveness.png" alt="Reliably measuring responsiveness"></p><p><small class="caption">One of the slides <a href="https://docs.google.com/presentation/d/15DsvKVrt9vIL5s-wH4VhCGEhS-FkjD5pP3dH1-hzPi8/edit" target="_blank" rel="noopener">of the talk</a> explaining how to detect long tasks on our sites.</small></p><h2 id="Conferences"><a href="#Conferences" class="headerlink" title="Conferences"></a>Conferences</h2><ul><li><p><a href="https://twitter.com/pinchito" target="_blank" rel="noopener">Alex Fernández</a> has published <a href="http://pinchito.es/2017/jsdayes-2017-cost.html" target="_blank" rel="noopener">How Much Did JSDayES 2017 Cost?</a>. This is a conference <a href="/jsdayes-madrid-2017">I attended</a> and it’s eye-opening to see how much effort is put behind the scenes.</p></li><li><p>I’m from Alicante, Spain, and I was very happy to find out about <a href="http://reactalicante.es" target="_blank" rel="noopener">React Alicante 2017</a>. There are not many tech conferences in the area, and I hope it is a success. I’m glad I’ll attend!</p></li></ul>]]></content>
    
    <summary type="html">
    
      Reading List with some articles from June 2017
    
    </summary>
    
    
      <category term="web" scheme="https://jmperezperez.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>The (mobile) web is making a come-back</title>
    <link href="https://jmperezperez.com/web-is-back/"/>
    <id>https://jmperezperez.com/web-is-back/</id>
    <published>2017-06-29T11:10:00.000Z</published>
    <updated>2018-03-11T08:21:01.379Z</updated>
    
    <content type="html"><![CDATA[<p>The web ecosystem is maturing and every day we understand better how to architecture large and maintainable web applications. We also understand what makes our sites slower and are coming up with solutions to overcome this.</p><p>Building a complex site that can work on slow networks is a challenge. One that some companies have decided to accept without fear and share with the developer community.</p><a id="more"></a><h2 id="Western-companies-looking-at-users-from-developing-countries"><a href="#Western-companies-looking-at-users-from-developing-countries" class="headerlink" title="Western companies looking at users from developing countries"></a>Western companies looking at users from developing countries</h2><p>Instagram, Twitter, Uber, Tinder. They have in common that they are well known in the developed world, and also that they have embraced the web as the channel to reach users in emerging markets. Not as a basic site with a large modal to download the app, but with a full-feature experience. After all, web users shouldn’t be considered second-class citizens.</p><p>Twitter has been great at talking about implementation details (see <a href="https://blog.twitter.com/official/en_us/topics/product/2017/introducing-twitter-lite.html" target="_blank" rel="noopener">Introducing Twitter Lite</a> and <a href="https://medium.com/@paularmstrong/twitter-lite-and-high-performance-react-progressive-web-apps-at-scale-d28a00e780a3" target="_blank" rel="noopener">Twitter Lite and High Performance React Progressive Web Apps at Scale</a>) which is really helpful for devs like me who face some of these challenges on a daily basis. And, because anyone can see the code you ship, it’s easy to look <a href="https://medium.com/statuscode/dissecting-twitters-redux-store-d7280b62c6b1" target="_blank" rel="noopener">into the details</a>.</p><p><img src="/assets/images/posts/twitter-lite.png" alt="Twitter Lite&#39;s saving options"></p><p><small class="caption">Twitter Lite also offers an option to save data.</small></p><p>The case of Instagram is notable too because of its scale. They recently <a href="http://fortune.com/2017/05/09/instagram-mobile-website-upload-photos/" target="_blank" rel="noopener">added photo upload</a> to their mobile site in a clear sign of their investment on the platform, but haven’t shared details about how the tech behind the site. Tinder is a similar case, with <a href="http://blog.gotinder.com/introducing-tinder-online/" target="_blank" rel="noopener">a newer website</a>.</p><p>And a couple of days ago it was Uber with <a href="https://eng.uber.com/m-uber/" target="_blank" rel="noopener">Building m.uber: Engineering a high-performance web app for the global market</a>. They describe their JS stack, some interesting things they are doing to reduce the payload and also what they plan for the future.</p><p><a href="https://building.calibreapp.com/beyond-the-bubble-real-world-performance-9c991dcd5342" target="_blank" rel="noopener">It’s evident where the next Internet users are going to come from</a> and no big company wants to miss the opportunity.</p><h2 id="Emerging-markets-leading-PWA"><a href="#Emerging-markets-leading-PWA" class="headerlink" title="Emerging markets leading PWA"></a>Emerging markets leading PWA</h2><p>If you want to find the leading companies on web development stop looking in Silicon Valley and turn your head towards India and China. There is no talk from Google about PWA where a company from from these countries doesn’t showcase their site. <a href="http://flipkart.com" target="_blank" rel="noopener">Flipkart</a>, <a href="https://www.treebo.com" target="_blank" rel="noopener">Treebo</a>, <a href="https://housing.com" target="_blank" rel="noopener">Housing</a>, and <a href="https://www.ele.me" target="_blank" rel="noopener">ele.me</a> are some examples. Have a look at the recent <a href="https://www.youtube.com/watch?v=aCMbSyngXB4" target="_blank" rel="noopener">Production Progressive Web Apps With JavaScript Frameworks (Google I/O ‘17)</a>.</p><p><img src="/assets/images/posts/flipkart-pwa.png" alt="Flipkart&#39;s PWA seems to be improving important metrics"></p><p><small class="caption">Some insights from Flipkart and the impact of their mobile site.</small></p><p>Before anyone else they saw the benefits of building sites that can work offline and can work fine on a slow network without the hassle of app downloads and updates.</p><p>I believe this is good for users, but also for companies. Updating web content is almost instantaneous. This means deploying new features, but also fixing bugs. And believe me, when there is a big issue and you need to fix something right now, time is precious.</p><p>Developers can ship code without an expensive process of building whole apps and have them go through a submission/revision system. They also benefit from quicker feedback loops when coding and seeing their changes on the screen (to be fair, React Native is making this one way better in the native world).</p><h2 id="The-mobile-web-in-2017"><a href="#The-mobile-web-in-2017" class="headerlink" title="The mobile web in 2017"></a>The mobile web in 2017</h2><p>When I saw <a href="https://twitter.com/markdalgleish/status/879144162389393409" target="_blank" rel="noopener">this tweet</a> I laughed out loud.</p><p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Updated: The mobile web in 2017, <strong>now with web fonts!</strong><br><br>(Original: <a href="https://t.co/nLta2tqk42" target="_blank" rel="noopener">https://t.co/nLta2tqk42</a>) <a href="https://t.co/c4ZgEdkbU8" target="_blank" rel="noopener">pic.twitter.com/c4ZgEdkbU8</a></p>&mdash; Mark Dalgleish (@markdalgleish) <a href="https://twitter.com/markdalgleish/status/879144162389393409" target="_blank" rel="noopener">26 June 2017</a></blockquote></p><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script><p>A moment later I got sad since this is quite true. It seems that everyone at every company assumes that apps are more engaging and retain users better than a web experience.</p><p>This is true when:</p><ul><li>a) you haven’t made an effort in making your web better,</li><li>b) you don’t hesitate in adding 3rd party tracking code that worsens your site</li><li>c) you fill the screen with banners and modals, hiding the actual content.</li></ul><p>Have a look at <a href="https://twitter.com/sbholtrop/status/878611398527520768" target="_blank" rel="noopener">this tweet and its thread</a>. You’ll see screenshots that should probably remind some of your past experiences browsing the web on mobile.</p><h2 id="What-does-the-future-look-like"><a href="#What-does-the-future-look-like" class="headerlink" title="What does the future look like?"></a>What does the future look like?</h2><p>I don’t know if the importance of the mobile apps will decrease, or whether those mobile web users will eventually use apps instead of the web. Will even network speed be a problem in the future?</p><p>It’s very interesting to see these trends going back and forth. At a minimum, we should always build for our users and avoid assumptions. Not all of them use powerful MacBook Pros nor have the latest iPhone.</p><p>We are paid to face these challenges, to serve our users. Let’s prioritise that instead of developer ergonomics and everyone will benefit.</p>]]></content>
    
    <summary type="html">
    
      Some recent examples of large companies implementing Progressive Web Apps, changing their mobile strategy
    
    </summary>
    
    
      <category term="web" scheme="https://jmperezperez.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>PerformanceObserver and Paint Timing API</title>
    <link href="https://jmperezperez.com/paint-timing-api/"/>
    <id>https://jmperezperez.com/paint-timing-api/</id>
    <published>2017-06-17T07:15:00.000Z</published>
    <updated>2018-03-29T11:34:25.324Z</updated>
    
    <content type="html"><![CDATA[<p>In <a href="https://blog.chromium.org/2017/06/chrome-60-beta-paint-timing-api-css.html" target="_blank" rel="noopener">a recent post about Chrome 60 Beta</a>, Google announced the support of the Paint Timing API to get metrics on when your page starts rendering and when the user gets content that can be consumed (more info on the definition of the events below). Here I’m going to describe this new API a bit and show you how to use it.</p><a id="more"></a><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510494808/paint-timing-example_byc6z2.png" sizes="(max-width: 768px) 100vw, 684px" alt="Example of Paint Timing API entries"> <small class="caption">Image taken from the <a href="https://blog.chromium.org/2017/06/chrome-60-beta-paint-timing-api-css.html" target="_blank" rel="noopener">Chrome 60 blog post</a>, which first appeared in <a href="https://youtu.be/6Ljq-Jn-EgU" target="_blank" rel="noopener">“Web Performance: Leveraging the Metrics that Most Affect User Experience”</a> at Google I/O 2017</small></p><p>Up until now we have been measuring performance through other metrics, mostly using the <a href="https://developer.mozilla.org/docs/Web/API/Navigation_timing_API" target="_blank" rel="noopener">Navigation Timing API</a>, which is also what Google Analytics uses for their <a href="http://www.ericmobley.net/measuring-performance-google-analytics/" target="_blank" rel="noopener">Site Speed report</a>. Yet those metrics don’t tell us the whole picture about the rendering experience.</p><p>The <a href="https://github.com/WICG/paint-timing" target="_blank" rel="noopener">Paint Timing API</a> aims to improve this by exposing metrics on paint events that are grouped in two types of entries. By <a href="https://w3c.github.io/paint-timing/#sec-terminology" target="_blank" rel="noopener">its definition</a>:</p><ul><li><code>&quot;first-paint&quot;</code> entries contain a <code>DOMHighResTimeStamp</code> reporting the time when the browser first rendered after navigation. This excludes the default background paint, but includes non-default background paint. This is the first key moment developers care about in page load – when the browser has started to render the page.</li><li><code>&quot;first-contentful-paint&quot;</code> contain a <code>DOMHighResTimestamp</code> reporting the time when the browser first rendered any text, image (including background images), non-white canvas or SVG. This includes text with pending webfonts. This is the first time users could start consuming page content.</li></ul><p>A picture is worth a thousand words, so let’s see how these entries would be reported by some real web sites:</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510476598/paint-timing-filmstrip_anq3pv.png" sizes="(max-width: 768px) 100vw, 684px" alt="Filmstrip from several sites showing when Paint Timing API entries are triggered"> <small class="caption">Image taken from the <a href="https://github.com/WICG/paint-timing#examples" target="_blank" rel="noopener">Paint timing API repo on WICG</a>.</small></p><h4 id="Hacking-on-it"><a href="#Hacking-on-it" class="headerlink" title="Hacking on it"></a>Hacking on it</h4><p>As a hack project I decided to give it a try and implement it on a web site. You have a basic example <a href="https://github.com/WICG/paint-timing#usage" target="_blank" rel="noopener">on the Paint timing page</a>:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> observer = <span class="keyword">new</span> PerformanceObserver(<span class="function"><span class="keyword">function</span>(<span class="params">list</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> perfEntries = list.getEntries();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; perfEntries.length; i++) &#123;</span><br><span class="line">     <span class="comment">// Process entries</span></span><br><span class="line">     <span class="comment">// report back for analytics and monitoring</span></span><br><span class="line">     <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// register observer for long task notifications</span></span><br><span class="line">observer.observe(&#123;<span class="attr">entryTypes</span>: [<span class="string">"paint"</span>]&#125;);</span><br></pre></td></tr></table></figure><p>In practice you will probably want to report the information somewhere you can track it. If you are using Google Analytics, you can use <a href="https://developers.google.com/web/updates/2017/06/user-centric-performance-metrics#tracking_fpfcp" target="_blank" rel="noopener">this snippet from Google’s Developer site</a> (ES6):</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> observer = <span class="keyword">new</span> PerformanceObserver(<span class="function">(<span class="params">list</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> entry <span class="keyword">of</span> list.getEntries()) &#123;</span><br><span class="line">    <span class="comment">// `name` will be either 'first-paint' or 'first-contentful-paint'.</span></span><br><span class="line">    <span class="keyword">const</span> metricName = entry.name;</span><br><span class="line">    <span class="keyword">const</span> time = <span class="built_in">Math</span>.round(entry.startTime + entry.duration);</span><br><span class="line"></span><br><span class="line">    ga(<span class="string">'send'</span>, <span class="string">'event'</span>, &#123;</span><br><span class="line">      eventCategory: <span class="string">'Performance Metrics'</span>,</span><br><span class="line">      eventAction: metricName,</span><br><span class="line">      eventValue: time,</span><br><span class="line">      nonInteraction: <span class="literal">true</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start observing paint entries.</span></span><br><span class="line">observer.observe(&#123;<span class="attr">entryTypes</span>: [<span class="string">'paint'</span>]&#125;);</span><br></pre></td></tr></table></figure><h4 id="Word-of-Caution"><a href="#Word-of-Caution" class="headerlink" title="Word of Caution"></a>Word of Caution</h4><p>The API is still experimental and <a href="https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver" target="_blank" rel="noopener">in “Editor’s Draft” state</a>. Also, the fact that a browser supports PerformanceObserver doesn’t mean that it supports the Paint events.</p><p>In the quick test I run, the above snippet would throw an exception:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Uncaught TypeError: Failed to execute ‘observe’ on</span><br><span class="line">‘PerformanceObserver’: A Performance Observer MUST</span><br><span class="line">have at least one valid entryType in its entryTypes</span><br><span class="line">attribute.</span><br></pre></td></tr></table></figure><p>It turns out that if you only observe the <code>paint</code> entryType and this is not supported in the browser, <strong>it will throw an exception</strong>. According to <a href="https://w3c.github.io/performance-timeline/#dom-performanceobserverinit-entrytypes" target="_blank" rel="noopener">the specification</a>:</p><blockquote><p><code>entryTypes</code>: A list of entry names to be observed. The list must not be empty and types not recognized by the user agent must be ignored.</p></blockquote><p>In short, if you are giving this API a try, make sure you <code>try...catch</code> the <code>observer.observe()</code> call.</p><h4 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h4><p>This is a bit in early stages but I’m looking forward to see how the API evolves and we can use it to track Web Performance even better. This will also be a great addition to <a href="https://developers.google.com/web/tools/lighthouse/" target="_blank" rel="noopener">LightHouse</a>, <a href="http://www.webpagetest.org" target="_blank" rel="noopener">WebPageTest</a>, <a href="https://calibreapp.com" target="_blank" rel="noopener">Calibre</a> and the rest of tools we use to monitor metrics on our sites.</p>]]></content>
    
    <summary type="html">
    
      A quick look at the Paint Timing API to get metrics about render events on our pages.
    
    </summary>
    
    
      <category term="performance" scheme="https://jmperezperez.com/tags/performance/"/>
    
  </entry>
  
  <entry>
    <title>Speaking at JSDayES 2017</title>
    <link href="https://jmperezperez.com/jsdayes-madrid-2017/"/>
    <id>https://jmperezperez.com/jsdayes-madrid-2017/</id>
    <published>2017-05-14T10:50:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>I just attended <a href="http://2017.jsday.es" target="_blank" rel="noopener">JSDayES 2017</a> in Madrid, where I gave my talk about images and web performance. It feels great to be back to the same venue where <a href="/spain-js-2013">I gave my first talk 4 years ago in SpainJS</a> with <a href="https://twitter.com/tomasperezv" target="_blank" rel="noopener">Tomás Pérez</a>, who also made it to the event.</p><p>I have caught up with lots of colleagues I used to work with in Tuenti, and lots of JS devs from the Spanish community. There is a lot going on in Madrid and the rest of Spain, with very interesting companies building awesome products.</p><a id="more"></a><p>There were 500+ attendees and the event had 3 tracks with 26 talks, shorter and longer ones, and workshops. It was difficult to attend the talks and workshops I wanted to, not only because of time constraints but also space. I’m looking forward to watching some of the talks on video when they upload the recordings, and update this post with the ones I find most interesting.</p><p>The event showcased the local talent, with a track dedicated to “rising stars” for speakers with less experience, which I think was a great idea. There was an international one with English-speaking talks, and finally the main track with some talks in English, some others in Spanish.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510476603/jsdayes-2017-pinchito-substack_gvvsvg.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Pinchito and Substack"> <small class="caption">Alex (<a href="https://twitter.com/pinchito" target="_blank" rel="noopener">@pinchito</a>) introducing James Halliday’s (<a href="https://twitter.com/substack" target="_blank" rel="noopener">@substack</a>) talk.</small></p><p>This is the third edition of the event, which is consolidating as the main Javascript conference in Spain.</p><p>Being a Spaniard myself it was fine, but I would like to see even more talks in English, making the event more internationally renowned. This would not only help the event, but also the speakers which could have a higher impact by making their talks more accessible to the rest of the world.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1510496367/jsdayes-2017-sign_lojgs2.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="The JSDayES 2017 sign by the entrance of the venue"></p><h2 id="My-talk-about-“Progressive-Image-Rendering”"><a href="#My-talk-about-“Progressive-Image-Rendering”" class="headerlink" title="My talk about “Progressive Image Rendering”"></a>My talk about “Progressive Image Rendering”</h2><div class="videoWrapper"><iframe src="https://player.vimeo.com/video/220960739?byline=0&portrait=0" width="684" height="385" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen></iframe></div><p>This talk is similar to the one I gave at <a href="/cssconf-au-2016">CSSConf AU</a> and <a href="/render-conf-oxford-2017">RenderConf Oxford</a>. I decided to give <a href="https://slides.com/" target="_blank" rel="noopener">slides.com</a> a try and moved my presentation to their platform.</p><p>I also made some changes in the content. I tried to focus more on user’s perceived performance and remove other parts to not make it that heavy. I also revisited the examples and used JSDayES’s site to illustrate a few of those.</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Great talk by <a href="https://twitter.com/jmperezperez" target="_blank" rel="noopener">@jmperezperez</a> about image loading process in a <a href="https://twitter.com/hashtag/Website?src=hash" target="_blank" rel="noopener">#Website</a> | let&#39;s have fun trying different type of loading! Seen at <a href="https://twitter.com/hashtag/JsDayEs?src=hash" target="_blank" rel="noopener">#JsDayEs</a> <a href="https://t.co/jgNJpzFB6n" target="_blank" rel="noopener">pic.twitter.com/jgNJpzFB6n</a></p>&mdash; Belen Moreno (@belenxi) <a href="https://twitter.com/belenxi/status/863380478132461569" target="_blank" rel="noopener">13 May 2017</a></blockquote><p>I think it went pretty well and got positive feedback both <a href="http://2017.jsday.es/#5740078466859008/99974003" target="_blank" rel="noopener">online</a> and there in person.</p><h3 id="Slides"><a href="#Slides" class="headerlink" title="Slides"></a>Slides</h3><p>The slides are available on <a href="https://slides.com/jmperez/pir" target="_blank" rel="noopener">slides.com/jmperez/pir</a> and you can also see it right here embedded:</p><div class="videoWrapper"><iframe src="//slides.com/jmperez/pir/embed" width="576" height="420" scrolling="no" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen></iframe></div><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>]]></content>
    
    <summary type="html">
    
      I spoke at JSDayES 2017 in Madrid about web performance and images.
    
    </summary>
    
    
      <category term="images" scheme="https://jmperezperez.com/tags/images/"/>
    
  </entry>
  
  <entry>
    <title>Playing with the Spotify Connect API</title>
    <link href="https://jmperezperez.com/spotify-connect-api/"/>
    <id>https://jmperezperez.com/spotify-connect-api/</id>
    <published>2017-04-21T20:10:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>Spotify <a href="https://developer.spotify.com/news-stories/2017/04/10/new-endpoints-beta-web-api-connect/" target="_blank" rel="noopener">released recently a set of endpoints</a> in beta to fetch information of what is playing and send playback commands. This allows for a wide range of integrations and I wanted to hack a bit with it.</p><p><img src="/assets/images/posts/spotify-connect.jpg" alt="Spotify Connect"></p><a id="more"></a><h4 id="What-is-Spotify-Connect"><a href="#What-is-Spotify-Connect" class="headerlink" title="What is Spotify Connect"></a>What is Spotify Connect</h4><p><a href="https://www.spotify.com/connect/" target="_blank" rel="noopener">Spotify Connect</a> is a way to transmit the playback from one device to another one without having to use a physical connection like a cable or bluetooth. You can send the music from your Spotify desktop client to a speaker, from the Spotify app on mobile to Spotify for PlayStation, from the Spotify web player to Chromecast… In short, you have controllers and devices that can play music.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510477863/spotify-web-player_k5sx2j.png" sizes="(max-width: 768px) 100vw, 684px" alt="Spotify Web Player"> <small class="caption">Spotify’s Web Player (zoomed in). Clicking on the icon next to the volume we get a list of connected devices (FireTV, desktop client, speakers and the web player).</small></p><p>Your application can become a controller through the Web API endpoints, getting information about what is playing currently and from where, being able to transmit the playback to another connected device or interact with the current context (pausing, changing the volume, skipping, playing something else…).</p><h4 id="How-to-use-the-endpoints"><a href="#How-to-use-the-endpoints" class="headerlink" title="How to use the endpoints"></a>How to use the endpoints</h4><p>Before using the Connect endpoints we need to obtain an access token on behalf of the user with certain permissions. There is more information about what scopes are needed in the documentation for each endpoint.</p><p>You don’t need to have a premium account to get the playback status, a free account is alright. You will do need a premium one if you want to <a href="https://developer.spotify.com/web-api/working-with-connect/#premium-only" target="_blank" rel="noopener">send commands to change the playback</a>.</p><p>A caveat at the moment is that the endpoints don’t support any kind of web socket connection nor long polling. Thus, if you want to get updates on the position of the current playing track or any other change in the context, you need to poll every few seconds.</p><h4 id="A-small-library-to-make-it-easier-to-use-the-endpoints"><a href="#A-small-library-to-make-it-easier-to-use-the-endpoints" class="headerlink" title="A small library to make it easier to use the endpoints"></a>A small library to make it easier to use the endpoints</h4><p>The trickiest part of using the Spotify Web API is to implement the authorization flow. <a href="https://developer.spotify.com/web-api/authorization-guide/" target="_blank" rel="noopener">The Authorization Guide</a> does a good job explaining it, but I thought I could do something so developers wouldn’t need to worry about setting up the whole flow, hiding away the authentication and just getting.</p><p>That’s why I have created <a href="https://github.com/JMPerez/spotify-player" target="_blank" rel="noopener">spotify-player</a>. It’s both a server and a library that you use to communicate with it. To use it, you just need to include a script, call login() and subscribe to the updates:</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://spotify-player.herokuapp.com/spotify-player.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> spotifyPlayer = <span class="keyword">new</span> SpotifyPlayer();</span><br><span class="line"></span><br><span class="line">spotifyPlayer.on(<span class="string">'update'</span>, response =&gt; &#123;</span><br><span class="line">  <span class="comment">// render the track received</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">spotifyPlayer.on(<span class="string">'login'</span>, user =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (user === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// no user</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// say hello to the user, and tell them to play something!</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">spotifyPlayer.init();</span><br><span class="line"></span><br><span class="line">spotifyPlayer.login();</span><br></pre></td></tr></table></figure><p>You can forget about <a href="https://developer.spotify.com/my-applications" target="_blank" rel="noopener">setting up a Spotify application</a> and a server, carrying out the token exchange, token refresh, and persisting the current user, <strong>so you can focus on the fun part</strong>.</p><p>Other methods include a function to make calls to other Spotify endpoints reusing the same access token, so you can fetch other data that can help you creating a more complete visualisation.</p><p>Let’s have a look at <a href="https://codepen.io/jmperez/full/MmwObE" target="_blank" rel="noopener">this pen</a> as an example of a basic visualisation:</p><iframe id="cp_embed_MmwObE" src="//codepen.io/jmperez/embed/MmwObE?height=389&theme-id=0&slug-hash=MmwObE&default-tab=result" scrolling="no" frameborder="no" height="389" allowtransparency="true" allowfullscreen="true" class="cp_embed_iframe" data-amp-width="100%" style="width: 100%; overflow: hidden"></iframe><p>And in case you can’t try it or don’t have a Spotify account this is pretty much what it looks like:</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510476629/spotify-connect-api-visualisation-example_hwu7uw.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Example of a visualisation of Spotify"> <small class="caption">See <a href="https://codepen.io/jmperez/full/MmwObE" target="_blank" rel="noopener">the Pen on Codepen</a></small></p><p>I have kept the example very basic since the point is understanding the usage of the library. If you are into performance and UX you’ll see there is room for improvement, but as a front-end developer I know an example can get out of hand very easily when adding things.</p><p>I encourage you to fork it and start making your own visualisation. And once you do it, ping me so I include it in <a href="https://codepen.io/collection/AyVBYB" target="_blank" rel="noopener">this Codepen collection</a>.</p><h3 id="Possible-applications"><a href="#Possible-applications" class="headerlink" title="Possible applications"></a>Possible applications</h3><p><em>Disclaimer: This is a list of some use cases. You still need to comply with <a href="https://developer.spotify.com/developer-terms-of-use/" target="_blank" rel="noopener">Spotify’s terms of use</a> when implementing an application that uses Spotify’sWeb API. This might mean adding certain messaging and link to the song in Spotify.</em></p><h4 id="Dynamic-visualisations"><a href="#Dynamic-visualisations" class="headerlink" title="Dynamic visualisations"></a>Dynamic visualisations</h4><p>You could combine the playback position with <a href="https://developer.spotify.com/web-api/get-audio-analysis/" target="_blank" rel="noopener">the audio analysis of the track</a> to generate dynamic visualisations using loudness, tempo, key, timbre or pitch of the segments that compose the track. You can also use <a href="https://developer.spotify.com/web-api/get-audio-features/" target="_blank" rel="noopener">the endpoint to fetch audio features of a track</a>, which gives you high level information about characteristics of the song.</p><div class="videoWrapper"><iframe width="720" height="405" src="https://www.youtube.com/embed/KO9huh-Y03g" frameborder="0" allowfullscreen></iframe></div><p><small class="caption">See <a href="https://codepen.io/jmperez/full/GmJOMJ" target="_blank" rel="noopener">the Pen on Codepen</a> and <a href="https://github.com/possan/webgl-spotify-connect-now-playing-screen-example" target="_blank" rel="noopener">Possan’s original visualisation on GitHub</a></small></p><h4 id="Now-playing-view"><a href="#Now-playing-view" class="headerlink" title="Now playing view"></a>Now playing view</h4><p>Are you a coffee-shop owner and people always wonder what song is playing? You could have a TV showing a branded now playing view. You could even have a widget on your website, or a script posting to a social network what is currently playing so your customers know. Or a small browser extension showing what is playing and/or <a href="https://developer.chrome.com/extensions/notifications" target="_blank" rel="noopener">showing desktop notifications</a> when the track changes.</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510477615/spotify-connect-api-visualisation-notification_mgxad5.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Spotify Visualisation showing Web Notifications when the track changes"> <small class="caption">See <a href="https://codepen.io/jmperez/full/VbvPbR" target="_blank" rel="noopener">the Pen on Codepen</a>. When the track changes the browser shows a Web Notification.</small></p><p>Or if you are at home hosting a dinner or party, show on the TV or computer what is playing.</p><p>You can combine other Spotify Web API endpoints too. Eg you could <a href="https://developer.spotify.com/web-api/get-artist/" target="_blank" rel="noopener">fetch the artists info</a> to show the artist profile image in the background:</p><p><img src="https://res.cloudinary.com/jmperez/image/upload/w_auto,f_auto,c_scale/v1510477674/spotify-connect-api-visualisation-artist_ebk7cc.jpg" sizes="(max-width: 768px) 100vw, 684px" alt="Spotify Visualisation showing the artist profile image in the background"> <small class="caption">See <a href="https://codepen.io/jmperez/full/YVXEaz" target="_blank" rel="noopener">the Pen on Codepen</a>. A simple visualisation of what’s playing in Spotify rendering the artist profile image as the background.</small></p><p>You could use an API like <a href="https://developer.musixmatch.com/" target="_blank" rel="noopener">Musixmatch</a>’s and create an app or a website showing the lyrics for the current song, synchronised with the playback position.</p><p>And your imagination is the limit. Use <a href="https://genius.com/developers" target="_blank" rel="noopener">Genius’ API</a> to get <a href="https://docs.genius.com/#annotations-h2" target="_blank" rel="noopener">annotations</a> about a song, or search for trivia and more info about the song or artist using <a href="https://www.mediawiki.org/wiki/API:Main_page" target="_blank" rel="noopener">Wikipedia’s API</a>. And if you don’t want to miss what’s happening in the world, implement a news ticker in your view using <a href="https://newsapi.org/" target="_blank" rel="noopener">News API</a>.</p><div class="videoWrapper"><iframe width="720" height="405" src="https://www.youtube.com/embed/q4I3ymLgewE" frameborder="0" allowfullscreen></iframe></div><p><small class="caption">See <a href="https://codepen.io/jmperez/full/OmVKOO" target="_blank" rel="noopener">the Pen on Codepen</a><small class="caption"></small></small></p><h4 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h4><p><a href="https://github.com/JMPerez/spotify-player" target="_blank" rel="noopener">The library</a> is really small and it only supports <em>reading</em> the playback state and not send commands. Let’s call it an MVP. I might work on adding more features in the future.</p>]]></content>
    
    <summary type="html">
    
      The new Web API endpoints let you show what is playing in your Spotify account. It is easy to create views that update in real time.
    
    </summary>
    
    
      <category term="api" scheme="https://jmperezperez.com/tags/api/"/>
    
  </entry>
  
  <entry>
    <title>Speaking at Render Oxford 2017</title>
    <link href="https://jmperezperez.com/render-conf-oxford-2017/"/>
    <id>https://jmperezperez.com/render-conf-oxford-2017/</id>
    <published>2017-03-31T17:00:00.000Z</published>
    <updated>2018-01-04T11:39:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>I just attended <a href="http://www.render-conf.com" target="_blank" rel="noopener">Render 2017</a>, where I gave a talk about images and web performance. It’s my first time in Oxford and I was impressed by its beauty. The organisation was great and I had a lot of fun.</p><p><a href="/assets/images/posts/render-conf-2017-sign.jpg"><img src="/assets/images/posts/render-conf-2017-sign.jpg" alt="The Render Conf 2017 sign by the entrance of King&#39;s Centre"></a></p><a id="more"></a><p>This is the second time they organise Render Conf, which commenced as the evolution of jQuery UK. The venue was next to the Thames river, with a very spacious room for the talks, another large room for sponsors and meals, and a third room for speakers.</p><p>I have only talked in two other occasions and this is the first time I get to enjoy a speakers room. It really helps calming the nerves, focusing, and making those last minute fixes to the slides. And there are always nice words when a speaker finishes their talk and need these positive messages the most.</p><h2 id="My-talk-about-“Progressive-Image-Rendering”"><a href="#My-talk-about-“Progressive-Image-Rendering”" class="headerlink" title="My talk about “Progressive Image Rendering”"></a>My talk about “Progressive Image Rendering”</h2><p>This talk is similar to the one I gave at <a href="/cssconf-au-2016">CSSConf AU</a>. This time I wasn’t able to make many changes, and I just updated a couple of things and double checked the browser support for IntersectionObserver.</p><div class="videoWrapper"><iframe width="720" height="405" src="https://www.youtube.com/embed/S70xyRYCNdY?list=PLBzScQzZ83I_n5kvxmUaRNZvc_vsCuEQD" frameborder="0" allowfullscreen></iframe></div><p>I felt less nervous than at CSSConf, and everything went well except for some minor tech issues (completely my fault) and things I wanted to mention but forgot to.</p><p><a href="https://twitter.com/malweene" target="_blank" rel="noopener">Malwine</a>‘s drawing summarises the talk very well:</p><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Progressive Image Rendering by <a href="https://twitter.com/jmperezperez" target="_blank" rel="noopener">@jmperezperez</a> at <a href="https://twitter.com/hashtag/RenderConf?src=hash" target="_blank" rel="noopener">#RenderConf</a> <a href="https://t.co/B3cOEyi3VI" target="_blank" rel="noopener">pic.twitter.com/B3cOEyi3VI</a></p>&mdash; Malwine (@malweene) <a href="https://twitter.com/malweene/status/847487007018418176" target="_blank" rel="noopener">30 March 2017</a></blockquote><p>After the talk I had some nice conversations with some attendees both in person and on Twitter who were trying to implement lazy-loading or were interested in web performance.</p><h3 id="Slides"><a href="#Slides" class="headerlink" title="Slides"></a>Slides</h3><p>The slides are available on <a href="https://jmperezperez.com/renderconf17/">jmperezperez.com/renderconf17</a> and contain some animations and videos. A <em>static</em> version <a href="https://speakerdeck.com/jmperez/progressive-image-rendering-1" target="_blank" rel="noopener">is available on SpeakerDeck</a>.</p><div class="videoWrapper"><iframe width="560" height="315" src="https://speakerdeck.com/player/90be5b09730b45618fe43359ee2877ba"></iframe></div><h2 id="Some-personal-reflections"><a href="#Some-personal-reflections" class="headerlink" title="Some personal reflections"></a>Some personal reflections</h2><p>When I attend a conference I usually have a hard time breaking the ice and talking with other people, but when you are the speaker it makes lot easier since people recognises you and approach. And the dinner prior to the conference is a very good opportunity to know about the other speakers, their projects, experience, tips… In short, attending a speaker makes me enjoy the conference a lot more.</p><p>Moreover, this time I managed to meet some devs I have been following on Twitter and reading their blog posts for a long time.</p><ul><li><a href="https://adactio.com/" target="_blank" rel="noopener">Jeremy Keith</a>, whose <a href="https://resilientwebdesign.com/" target="_blank" rel="noopener">Resilient Web Design</a> I read recently and included in <a href="/2017-01-reading-list">my reading list post</a>.</li><li><a href="http://www.p01.org/" target="_blank" rel="noopener">Mathieu Henry aka @p01</a> who did an AWESOME live-coding visualisation using the Audio API and canvas.</li></ul><blockquote class="twitter-tweet" data-lang="en-gb"><p lang="en" dir="ltr">Pretty sure that <a href="https://twitter.com/p01" target="_blank" rel="noopener">@p01</a> had hypnotised the whole <a href="https://twitter.com/render_conf" target="_blank" rel="noopener">@render_conf</a> audience with that live code art! <a href="https://twitter.com/hashtag/RenderConf?src=hash" target="_blank" rel="noopener">#RenderConf</a> <a href="https://t.co/rRfU6nGs59" target="_blank" rel="noopener">pic.twitter.com/rRfU6nGs59</a></p>&mdash; Ben Seymour (@bseymour) <a href="https://twitter.com/bseymour/status/847470593171636227" target="_blank" rel="noopener">30 March 2017</a></blockquote><ul><li><a href="https://andydavies.me/" target="_blank" rel="noopener">Andy Davies</a>, who knows a ton about Webpagetest and how to make sites fast. He gave a workshop the day before the conference about web performance.</li><li><a href="https://www.clicktorelease.com/" target="_blank" rel="noopener">Jaume Sanchez aka @thespite</a> who builds crazy visualisations (<a href="https://www.clicktorelease.com/code/polygon-shredder/" target="_blank" rel="noopener">example</a>) and redesigned his site recently and used <a href="/more-progressive-image-loading#Clicktorelease">a creative technique to load images</a>.</li><li><a href="https://rachelandrew.co.uk/" target="_blank" rel="noopener">Rachel Andrew</a>, from whom I first knew about the CSS Grid specification when I attended <a href="/fronteers-2015">Fronteers 2015</a>. Her talk at Render was the first one after all major browsers finally supported CSS Grids, so it was an interesting way to close the circle.</li><li>And the rest of speakers from which I learned some devtools tricks, convolutional neural networks and how web sites don’t only run on browsers anymore.</li></ul><p><a href="/assets/images/posts/render-conf-jaume-elias.jpg"><img src="/assets/images/posts/render-conf-jaume-elias.jpg" alt="Jaume Elias (thespite) talking about Virtual Reality on the Web at Render Conf"></a> ^ <em>Jaume Elias talking about Virtual Reality on the Web at Render Conf</em></p><p>It’s been a great honour sharing stage with such a great line-up. I felt like I was doing the opening act’s performance at a concert by your favourite band.</p><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>]]></content>
    
    <summary type="html">
    
      I spoke at Render Conf 2017 in Oxford about web performance and images.
    
    </summary>
    
    
      <category term="images" scheme="https://jmperezperez.com/tags/images/"/>
    
  </entry>
  
</feed>
